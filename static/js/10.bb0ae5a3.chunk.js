(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[10],{233:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(60),l=t(77),i=Object(c.a)({root:{position:"absolute",width:"100%",height:"100%"},image:{objectFit:"cover",pointerEvents:"none",width:"100%",height:"100%"}});a.a=function(e){var a=e.src,t=e.alt,n=i();return r.a.createElement("picture",{className:n.root},r.a.createElement(l.a,{src:a,alt:t,className:n.image}))}},262:function(e,a,t){"use strict";var n=t(12),r=t(0),c=t.n(r),l=t(394),i=t(240),o=t.n(i),s=t(300),u=t(301),m=t(302),p=t(303),d=t(407),b=t(304),f=function(e){var a=e.setIsOpen,t=e.isOpen,i=e.callback,o=Object(r.useState)(""),f=Object(n.a)(o,2),v=f[0],h=f[1],g=function(){a(!1)};return c.a.createElement("div",null,c.a.createElement(s.a,{open:t,onClose:g},c.a.createElement(u.a,null,"Upload via link"),c.a.createElement(m.a,null,c.a.createElement(p.a,null,"Provide a valid URL to your image:"),c.a.createElement(d.a,{autoFocus:!0,margin:"dense",id:"name",label:"Image URL",type:"text",fullWidth:!0,autoComplete:"off",onChange:function(e){h(e.target.value)}})),c.a.createElement(b.a,null,c.a.createElement(l.a,{onClick:g,color:"primary"},"Cancel"),c.a.createElement(l.a,{onClick:function(){var e=v;if(v.startsWith("https://www.instagram.com/")){var a=v.match("/p/(.*)/"),t=a&&a[1];e="https://www.instagram.com/p/".concat(t,"/media/?size=l")}else if(v.startsWith("https://drive.google.com/")){var n=v.match("/d/(.*)/"),r=n&&n[1];e="https://drive.google.com/uc?export=view&id=".concat(r)}i(e||""),g()},color:"primary",disabled:!v.length},"Submit"))))};a.a=function(e){var a=e.callback,t=e.children,i=Object(r.useState)(!1),s=Object(n.a)(i,2),u=s[0],m=s[1],p=function(){m(!0)},d=c.a.createElement(l.a,{onClick:p,variant:"outlined",color:"primary",startIcon:c.a.createElement(o.a,null)},"Attach a link"),b=t&&c.a.Children.toArray(t)[0];return c.a.createElement(c.a.Fragment,null,c.a.createElement(f,{callback:a,isOpen:u,setIsOpen:m}),c.a.isValidElement(b)?c.a.cloneElement(b,{onClick:p}):d)}},409:function(e,a,t){"use strict";t.r(a);var n=t(62),r=t.n(n),c=t(12),l=t(71),i=t(0),o=t.n(i),s=t(372),u=t.n(s),m=t(10),p=t(60),d=t(370),b=t(289),f=t(184),v=t(406),h=t(394),g=t(78),E=t(43),j=t(369),O=t(113),k=t(404),y=t(405),C=t(262),w=t(375),x=t(381),S=t.n(x),N=function(e){var a=e.callback,t=e.children,n=Object(w.useFilePicker)(),r=n.files,c=n.onClick,l=n.HiddenFileInput;Object(i.useEffect)((function(){if(null===r||void 0===r?void 0:r.length){var e=r[0];w.utils.loadFile(e).then((function(t){return a(t,e)}))}}),[r,a]);var s=t&&o.a.Children.toArray(t)[0],u=o.a.createElement(h.a,{onClick:c,variant:"contained",color:"primary",size:"large",startIcon:o.a.createElement(S.a,null)},"Upload");return o.a.createElement(o.a.Fragment,null,o.a.createElement(l,{accept:".jpg, .jpeg, .png, .gif",multiple:!1}),o.a.isValidElement(s)?o.a.cloneElement(s,{onClick:c}):u)},F=t(233),I=Object(p.a)({root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"50%"},clearIcon:{opacity:".5",fontSize:50},overlay:{backgroundColor:"rgba(0, 0, 0, 0.45)",color:"white",position:"absolute",top:0,left:0,height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",transitionDuration:"0.5s"},invisible:{backgroundColor:"rgba(0, 0, 0, 0)"},icon:{color:"white"}}),z=function(e){var a=e.callback,t=e.progress,n=I(),r=Object(i.useState)(),l=Object(c.a)(r,2),s=l[0],u=l[1],m=function(e,t){u(e),a(t||e)},p=o.a.createElement("div",{className:n.root},o.a.createElement(N,{callback:m}),o.a.createElement(E.a,{variant:"h6"}," or "),o.a.createElement(C.a,{callback:m})),d=o.a.createElement(j.a,{onClick:function(){u(void 0),a(void 0)},className:n.root,disabled:Boolean(t)},o.a.createElement(F.a,{src:s}),o.a.createElement("div",{className:"".concat(n.overlay," ").concat(100===t&&n.invisible)},t?t<100?o.a.createElement(O.a,{variant:"static",value:t,className:n.icon}):o.a.createElement(k.a,{className:n.icon,fontSize:"large"}):o.a.createElement(y.a,{className:n.icon,fontSize:"large"})));return s?d:p},R=t(75),U=t(27),V=t(32),W=t(74),P=t(85),A=t.n(P),B=function(){var e=Object(i.useState)(),a=Object(c.a)(e,2),t=a[0],n=a[1],o=Object(i.useState)(),s=Object(c.a)(o,2),u=s[0],m=s[1],p=Object(i.useState)(0),d=Object(c.a)(p,2),b=d[0],f=d[1],v=Object(i.useMemo)((function(){return Boolean(u||t)}),[u,t]),h=Object(i.useCallback)((function(e){e instanceof File?(m(e),n(void 0)):(n(e),m(void 0))}),[n,m]),g=Object(i.useCallback)((function(e){f(Math.round(95*e.loaded/e.total))}),[f]);return{setValue:h,isReady:v,resolve:Object(i.useCallback)(Object(l.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=4;break}return a={headers:{"Content-Type":"image/png"},onUploadProgress:g},f(.01),e.abrupt("return",Object(U.a)("/files").then((function(e){return e.data})).then((function(e){return A.a.put(e,u,a)})).then((function(e){f(100);var a=e.config.url;return a?a.slice(0,a.indexOf("?")):""})));case 4:return f(100),e.abrupt("return",t||"");case 6:case"end":return e.stop()}}),e)}))),[u,g,t]),progress:b}},D=Object(p.a)((function(e){return{root:{marginBottom:e.spacing(4)},images:{height:e.spacing(50),display:"flex"}}}));a.default=function(){var e=D(),a=Object(m.f)(),t=Object(g.b)().enqueueSnackbar,n=Object(V.b)().user,i=Object(W.a)().mutate,s=B(),p=s.setValue,E=s.progress,j=s.resolve,O=s.isReady,k=B(),y=k.setValue,C=k.progress,w=k.resolve,x=k.isReady,S=function(){var e=Object(l.a)(r.a.mark((function e(){var n,l,o,s,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.all([j(),w()]);case 3:n=e.sent,l=Object(c.a)(n,2),o=l[0],s=l[1],m={left:{url:o},right:{url:s}},a.push("/feed"),Object(U.c)("/polls/",{contents:m}).then((function(){i(),t("Your poll has been successfully created!",{variant:"success"})})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t("Failed to create a poll. Please, try again.",{variant:"error"}),a.push("/feed");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(d.a,{maxWidth:"sm",disableGutters:!0},o.a.createElement(b.a,{className:e.root},n&&o.a.createElement(R.a,{user:n,info:""}),o.a.createElement(f.a,null),o.a.createElement("div",{className:e.images},o.a.createElement(z,{callback:p,progress:E}),o.a.createElement(z,{callback:y,progress:C})),E||C?o.a.createElement(v.a,{color:"primary"}):o.a.createElement(h.a,{color:"primary",disabled:!(O&&x),variant:"contained",onClick:S,fullWidth:!0},"Submit")))}}}]);
//# sourceMappingURL=10.bb0ae5a3.chunk.js.map
(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[10],{252:function(e,a,t){"use strict";var n=t(19),r=t(0),c=t.n(r),l=t(381),i=t(230),o=t.n(i),s=t(289),u=t(290),m=t(291),d=t(292),b=t(394),f=t(293),p=function(e){var a=e.setIsOpen,t=e.isOpen,i=e.callback,o=Object(r.useState)(""),p=Object(n.a)(o,2),v=p[0],h=p[1],g=function(){a(!1)};return c.a.createElement("div",null,c.a.createElement(s.a,{open:t,onClose:g},c.a.createElement(u.a,null,"Upload via link"),c.a.createElement(m.a,null,c.a.createElement(d.a,null,"Provide a valid URL to your image:"),c.a.createElement(b.a,{autoFocus:!0,margin:"dense",id:"name",label:"Image URL",type:"text",fullWidth:!0,autoComplete:"off",onChange:function(e){h(e.target.value)}})),c.a.createElement(f.a,null,c.a.createElement(l.a,{onClick:g,color:"primary"},"Cancel"),c.a.createElement(l.a,{onClick:function(){var e=v;if(v.startsWith("https://www.instagram.com/")){var a=v.match("/p/(.*)/"),t=a&&a[1];e="https://www.instagram.com/p/".concat(t,"/media/?size=l")}else if(v.startsWith("https://drive.google.com/")){var n=v.match("/d/(.*)/"),r=n&&n[1];e="https://drive.google.com/uc?export=view&id=".concat(r)}i(e||""),g()},color:"primary",disabled:!v.length},"Submit"))))};a.a=function(e){var a=e.callback,t=e.children,i=Object(r.useState)(!1),s=Object(n.a)(i,2),u=s[0],m=s[1],d=function(){m(!0)},b=c.a.createElement(l.a,{onClick:d,variant:"outlined",color:"primary",startIcon:c.a.createElement(o.a,null)},"Attach a link"),f=t&&c.a.Children.toArray(t)[0];return c.a.createElement(c.a.Fragment,null,c.a.createElement(p,{callback:a,isOpen:u,setIsOpen:m}),c.a.isValidElement(f)?c.a.cloneElement(f,{onClick:d}):b)}},396:function(e,a,t){"use strict";t.r(a);var n=t(58),r=t.n(n),c=t(19),l=t(73),i=t(0),o=t.n(i),s=t(10),u=t(103),m=t(360),d=t(278),b=t(175),f=t(393),p=t(381),v=t(72),h=t(56),g=t(358),E=t(359),O=t(143),k=t(391),j=t(392),y=t(252),C=t(362),w=t(368),x=t.n(w),S=function(e){var a=e.callback,t=e.children,n=Object(C.useFilePicker)(),r=n.files,c=n.onClick,l=n.HiddenFileInput;Object(i.useEffect)((function(){if(null===r||void 0===r?void 0:r.length){var e=r[0];C.utils.loadFile(e).then((function(t){return a(t,e)}))}}),[r,a]);var s=t&&o.a.Children.toArray(t)[0],u=o.a.createElement(p.a,{onClick:c,variant:"contained",color:"primary",size:"large",startIcon:o.a.createElement(x.a,null)},"Upload");return o.a.createElement(o.a.Fragment,null,o.a.createElement(l,{accept:".jpg, .jpeg, .png, .gif",multiple:!1}),o.a.isValidElement(s)?o.a.cloneElement(s,{onClick:c}):u)},I=Object(u.a)({root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"50%"},clearIcon:{opacity:".5",fontSize:50},media:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},darkOverlay:{backgroundColor:"rgba(0, 0, 0, 0.45)",color:"white",position:"absolute",top:0,left:0,transitionDuration:"0.5s"},invisible:{backgroundColor:"rgba(0, 0, 0, 0)"},icon:{color:"white"}}),N=function(e){var a=e.callback,t=e.progress,n=I(),r=Object(i.useState)(),l=Object(c.a)(r,2),s=l[0],u=l[1],m=function(e,t){u(e),a(t||e)},d=o.a.createElement("div",{className:n.root},o.a.createElement(S,{callback:m}),o.a.createElement(h.a,{variant:"h6"}," or "),o.a.createElement(y.a,{callback:m})),b=o.a.createElement(g.a,{onClick:function(){u(void 0),a(void 0)},className:n.root,disabled:Boolean(t)},o.a.createElement(E.a,{image:s,className:n.media},o.a.createElement("div",{className:"".concat(n.media," ").concat(n.darkOverlay," ").concat(100===t&&n.invisible)},t?t<100?o.a.createElement(O.a,{variant:"static",value:t,className:n.icon}):o.a.createElement(k.a,{className:n.icon,fontSize:"large"}):o.a.createElement(j.a,{className:n.icon,fontSize:"large"}))));return s?b:d},F=t(70),z=t(31),R=t(32),U=t(69),V=t(80),W=t.n(V),P=function(){var e=Object(i.useState)(),a=Object(c.a)(e,2),t=a[0],n=a[1],o=Object(i.useState)(),s=Object(c.a)(o,2),u=s[0],m=s[1],d=Object(i.useState)(0),b=Object(c.a)(d,2),f=b[0],p=b[1],v=Object(i.useMemo)((function(){return Boolean(u||t)}),[u,t]),h=Object(i.useCallback)((function(e){e instanceof File?(m(e),n(void 0)):(n(e),m(void 0))}),[n,m]),g=Object(i.useCallback)((function(e){p(Math.round(100*e.loaded/e.total))}),[p]);return{setValue:h,isReady:v,resolve:Object(i.useCallback)(Object(l.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=3;break}return a={headers:{"Content-Type":"image/png"},onUploadProgress:g},e.abrupt("return",Object(z.a)("/files").then((function(e){return e.data})).then((function(e){return W.a.put(e,u,a)})).then((function(e){var a=e.config.url;return a?a.slice(0,a.indexOf("?")):""})));case 3:return p(100),e.abrupt("return",t||"");case 5:case"end":return e.stop()}}),e)}))),[u,g,t]),progress:f}},A=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(4)},images:{height:e.spacing(50),display:"flex"}}}));a.default=function(){var e=A(),a=Object(s.f)(),t=Object(v.b)().enqueueSnackbar,n=Object(R.b)().user,i=Object(U.a)().mutate,u=P(),h=u.setValue,g=u.progress,E=u.resolve,O=u.isReady,k=P(),j=k.setValue,y=k.progress,C=k.resolve,w=k.isReady,x=function(){var e=Object(l.a)(r.a.mark((function e(){var n,l,o,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O||!w){e.next=10;break}return e.next=3,Promise.all([E(),C()]);case 3:n=e.sent,l=Object(c.a)(n,2),o=l[0],s=l[1],u={left:{url:o},right:{url:s}},Object(z.c)("/polls/",{contents:u}).then((function(){i(),t("Your poll has been successfully created!",{variant:"success"})})),a.push("/feed");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(m.a,{maxWidth:"sm",disableGutters:!0},o.a.createElement(d.a,{className:e.root},n&&o.a.createElement(F.a,{user:n,info:""}),o.a.createElement(b.a,null),o.a.createElement("div",{className:e.images},o.a.createElement(N,{callback:h,progress:g}),o.a.createElement(N,{callback:j,progress:y})),g||y?o.a.createElement(f.a,{color:"primary"}):o.a.createElement(p.a,{color:"primary",disabled:!(O&&w),variant:"contained",onClick:x,fullWidth:!0},"Submit")))}}}]);
//# sourceMappingURL=10.3acceb80.chunk.js.map
(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[0],{197:function(e,t,a){e.exports=a(285)},285:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),l=a.n(c),o=a(184),i=a(352),s=a(353),u=a(37),m=a(130),d=a.n(m),f=(a(202),a(19)),h=a(329),p=a(330),g=a(358),v=a(331),E=a(332),b=a(54),j=a(322),O=a(39),w=a(172),y=a.n(w),k=a(171),x=a.n(k),N=a(170),S=a.n(N),C=a(10),I=a(70),T=a.n(I),U=a(92),A=a(164),R=a.n(A),L=a(165),z=a.n(L),F=R.a.create({baseURL:"https://which-api.herokuapp.com"});F.interceptors.request.use((function(e){var t=localStorage.getItem("token");return z.a.set(e,"headers.Authorization",t)})),F.interceptors.response.use((function(e){return e}),(function(e){return"Request failed with status code 401"===e.message&&localStorage.getItem("token")&&(localStorage.setItem("shouldClear","true"),window.location.reload()),Promise.reject(e)}));var P=F.get,B=F.post,W=(F.put,F.patch),D=Object(n.createContext)({user:null,setUser:function(){},login:function(){var e=Object(U.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){},isAuthenticated:function(){return!1}}),H=function(e){var t=e.children,a=function(){var e=Object(n.useState)(null),t=Object(C.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){localStorage.getItem("shouldClear")&&localStorage.clear();var e=localStorage.getItem("userId");e&&P("/users/".concat(e)).then((function(e){r(e.data)}))}),[]),{user:a,setUser:r,login:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return B("/authentication",{strategy:"local",username:e,password:t}).then((function(e){var t=e.data.user,n=e.data.accessToken;return r(t),localStorage.setItem("userId",t._id),localStorage.setItem("token",n),a||localStorage.setItem("shouldClear","true"),!0})).catch((function(){return!1}))},logout:function(){r(null),localStorage.removeItem("userId"),localStorage.removeItem("token")},isAuthenticated:function(){return Boolean(a)}}}(),c=D.Provider;return r.a.createElement(c,{value:a},t)},q=function(){return Object(n.useContext)(D)},M=a(169),_=a.n(M),Y=a(326),G=a(186),V=a(327),J=a(287),$=a(328),K=a(359),Q=a(99),X=a.n(Q),Z=a(325),ee=Object(j.a)((function(e){return{root:{display:"flex",alignItems:"center"},verified:{marginLeft:e.spacing(.5),width:e.spacing(2),height:e.spacing(2)},avatar:{cursor:"pointer"}}})),te=function(e){var t=e.user,a=e.info,n=ee(),c=Object(f.f)(),l=t.username,o=t.avatarUrl,i=t.verified,s=r.a.createElement(g.a,{src:o,alt:l[0].toUpperCase(),onClick:function(){c.push("/profile/".concat(l))},className:n.avatar}),u=r.a.createElement("div",{className:n.root},l,i&&r.a.createElement(X.a,{color:"primary",className:n.verified}));return r.a.createElement(Z.a,{avatar:s,title:u,subheader:a})},ae=Object(j.a)((function(e){return{root:{position:"relative",background:"rgba(255, 255, 255, 0.5)",borderRadius:"2px",padding:e.spacing(.5),display:"flex",alignItems:"center"},results:{position:"absolute",width:"100%",top:e.spacing(5)},listItem:{padding:0}}})),ne=function(){var e=Object(n.useState)([]),t=Object(C.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(C.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(i),m=Object(C.a)(u,2),d=m[0],h=m[1],p=Object(f.f)(),g=ae();Object(n.useEffect)((function(){var e=setTimeout((function(){return h(i)}),300);return function(){return clearTimeout(e)}}),[i]),Object(n.useEffect)((function(){d?P("/users?username[$regex]=".concat(d,"&$limit=").concat(7)).then((function(e){return c(e.data)})).catch((function(){return c([])})):c([])}),[d]);var v=function(){h(""),s("")},E=function(e){return function(){var t=a[e].username;p.push("/profile/".concat(t)),v()}},b=r.a.createElement(Y.a,{onClickAway:v},r.a.createElement(G.a,{className:g.results},r.a.createElement(V.a,null,a.map((function(e,t){return r.a.createElement("div",{key:e._id},r.a.createElement(J.a,{button:!0,onClick:E(t),className:g.listItem},r.a.createElement(te,{user:e})),t<a.length-1&&r.a.createElement($.a,null))})))));return r.a.createElement("div",{className:g.root},r.a.createElement(_.a,null),r.a.createElement(K.a,{placeholder:"Search...",value:i,onChange:function(e){s(e.target.value.trim())}}),a.length>0&&b)},re=Object(j.a)((function(e){return{mobile:{top:"auto",bottom:0},toolbar:{display:"flex",justifyContent:"space-around"},browserToolbar:{width:"60%",margin:"auto"},logo:{fontWeight:"bold",cursor:"pointer",color:"white"},round:{width:e.spacing(3),height:e.spacing(3)}}})),ce=function(){var e=re(),t=q().user,a=Object(O.a)(),n=Object(f.f)(),c=Object(h.a)(a.breakpoints.down("sm")),l=function(){n.push("/")},o=r.a.createElement(p.a,{onClick:function(){n.push("/feed")}},r.a.createElement(S.a,null)),i=r.a.createElement(p.a,{onClick:function(){n.push("/notifications")}},r.a.createElement(x.a,null)),s=r.a.createElement(p.a,{onClick:function(){t?n.push("/profile/".concat(t.username)):n.push("/login")}},(null===t||void 0===t?void 0:t.avatarUrl)?r.a.createElement(g.a,{className:e.round,src:null===t||void 0===t?void 0:t.avatarUrl}):r.a.createElement(y.a,null)),u=r.a.createElement(v.a,{position:"fixed"},r.a.createElement(E.a,{className:"".concat(e.toolbar," ").concat(e.browserToolbar)},r.a.createElement(b.a,{variant:"h5",className:e.logo,onClick:l},"Which"),r.a.createElement(ne,null),r.a.createElement("div",null,o,i,s))),m=r.a.createElement(v.a,{position:"fixed",className:e.mobile},r.a.createElement(E.a,{className:e.toolbar},r.a.createElement(p.a,{onClick:l},r.a.createElement(b.a,{className:"".concat(e.logo," ").concat(e.round)},"W")),o,i,s));return c?m:u},le=a(173),oe=a.n(le),ie=Object(j.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(10),left:e.spacing(10),zIndex:1e3,cursor:"pointer",opacity:.4,"&:hover":{opacity:1},background:e.palette.primary.main,borderRadius:"50%"},icon:{fontSize:80,color:"white"}}})),se=function(){var e=Object(n.useState)(!1),t=Object(C.a)(e,2),a=t[0],c=t[1],l=Object(O.a)(),o=ie(),i=Object(h.a)(l.breakpoints.down("sm"));return window.addEventListener("scroll",(function(){!a&&window.pageYOffset>400?c(!0):a&&window.pageYOffset<=400&&c(!1)})),r.a.createElement("div",{className:o.root},a&&!i&&r.a.createElement(oe.a,{className:o.icon,color:"primary",onClick:function(){window.scrollTo({top:0})}}))},ue=a(46),me=a(50),de=a(347),fe=a(342),he=a(175),pe=a.n(he),ge=a(341),ve=a(185),Ee=a(335),be=a(174),je=a.n(be),Oe=Object(j.a)({moreMenu:{position:"absolute",right:10,zIndex:100}}),we=function(){var e=Oe(),t=r.a.useState(null),a=Object(C.a)(t,2),n=a[0],c=a[1],l=q().logout,o=Object(f.f)(),i=Boolean(n);return r.a.createElement("div",{className:e.moreMenu},r.a.createElement("div",null,r.a.createElement(p.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){c(e.currentTarget)}},r.a.createElement(je.a,null)),r.a.createElement(ve.a,{id:"long-menu",anchorEl:n,keepMounted:!0,open:i,onClose:function(){c(null)},PaperProps:{style:{maxHeight:216,width:"20ch"}}},r.a.createElement(Ee.a,{onClick:function(){l(),o.push("/login")}},"Log out"))))},ye=Object(j.a)({root:{position:"relative"},menuButton:{width:200,height:50,textAlign:"center"},menuNumber:{fontWeight:800,color:"black"},menuText:{color:"darkgray"}}),ke=function(e){var t=e.text,a=e.value,n=ye();return r.a.createElement("div",{className:n.menuButton},r.a.createElement("div",{className:n.menuNumber},a),r.a.createElement("div",{className:n.menuText},t))},xe=a(356),Ne=a(336),Se=a(337),Ce=a(338),Ie=a(354),Te=a(339),Ue=a(340),Ae=function(e){var t=e.setIsOpen,a=e.isOpen,c=e.callback,l=Object(n.useState)(""),o=Object(C.a)(l,2),i=o[0],s=o[1],u=function(){t(!1)};return r.a.createElement("div",null,r.a.createElement(xe.a,{open:a,onClose:u},r.a.createElement(Ne.a,null,"Upload an Image"),r.a.createElement(Se.a,null,r.a.createElement(Ce.a,null,"Unfortunetly we do not support uploading images yet. Please provide a valid URL to your image:"),r.a.createElement(Ie.a,{autoFocus:!0,margin:"dense",id:"name",label:"Image URL",type:"text",fullWidth:!0,autoComplete:"off",onChange:function(e){s(e.target.value)}})),r.a.createElement(Te.a,null,r.a.createElement(Ue.a,{onClick:u,color:"primary"},"Cancel"),r.a.createElement(Ue.a,{onClick:function(){var e=i;if(i.startsWith("https://www.instagram.com/")){var t=i.match("/p/(.*)/"),a=t&&t[1];e="https://www.instagram.com/p/".concat(a,"/media/?size=l")}else if(i.startsWith("https://drive.google.com/")){var n=i.match("/d/(.*)/"),r=n&&n[1];e="https://drive.google.com/uc?export=view&id=".concat(r)}c(e||""),u()},color:"primary",disabled:!i.length},"Submit"))))},Re=Object(j.a)((function(e){return{root:{position:"relative"},avatar:{width:150,height:150,margin:"0 auto"},name:{margin:e.spacing(1,0),display:"flex",alignItems:"center",justifyContent:"center"},verified:{marginLeft:e.spacing(.5),width:e.spacing(3),height:e.spacing(3)},profileMenu:{display:"flex",width:"100%",height:50,margin:"50px 0",borderBottom:"1px solid lightgray"},menuButton:{width:200,height:50,textAlign:"center"},badge:{width:e.spacing(5),height:e.spacing(5),borderRadius:"50%",cursor:"pointer",background:"#d3d3d3",display:"flex",alignItems:"center","& svg":{margin:"0 auto"}},avatarContainer:{position:"relative",textAlign:"center"},menuNumber:{fontWeight:800,color:"black"},menuText:{color:"darkgray"},skeleton:{margin:"10px auto",borderRadius:2}}})),Le=function(e){var t=e.savedPolls,a=e.totalVotes,c=e.setUserInfo,l=e.userInfo,o=e.isLoading,i=Re(),s=Object(n.useState)(!1),u=Object(C.a)(s,2),m=u[0],d=u[1],f=q().setUser,h=new Date((null===l||void 0===l?void 0:l.createdAt)||"").toLocaleDateString();return r.a.createElement("div",{className:i.root},o?r.a.createElement(ge.a,{animation:"wave",variant:"circle",width:150,height:150,className:i.avatar}):(null===l||void 0===l?void 0:l._id)===localStorage.getItem("userId")?r.a.createElement("div",null,r.a.createElement(we,null),r.a.createElement("div",{className:i.avatarContainer},r.a.createElement(fe.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:r.a.createElement("div",{className:i.badge},r.a.createElement(pe.a,{onClick:function(){d(!m)}}))},r.a.createElement(g.a,{className:i.avatar,src:null===l||void 0===l?void 0:l.avatarUrl}))),r.a.createElement(Ae,{isOpen:m,setIsOpen:d,callback:function(e){var t=localStorage.getItem("userId");W("/users/".concat(t),{avatarUrl:e}).then((function(e){c(e.data),f(e.data)}))}})):r.a.createElement(g.a,{className:i.avatar,src:null===l||void 0===l?void 0:l.avatarUrl}),o?r.a.createElement(ge.a,{animation:"wave",variant:"rect",width:100,height:20,className:i.skeleton}):r.a.createElement(b.a,{variant:"h5",className:i.name},null===l||void 0===l?void 0:l.username,(null===l||void 0===l?void 0:l.verified)&&r.a.createElement(X.a,{className:i.verified,color:"primary"})),r.a.createElement("div",{className:i.profileMenu},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{animation:"wave",variant:"rect",width:170,height:20,className:i.skeleton}),r.a.createElement(ge.a,{animation:"wave",variant:"rect",width:170,height:20,className:i.skeleton}),r.a.createElement(ge.a,{animation:"wave",variant:"rect",width:170,height:20,className:i.skeleton})):r.a.createElement(r.a.Fragment,null,r.a.createElement(ke,{text:"Polls",value:t}),r.a.createElement(ke,{text:"Since",value:h}),r.a.createElement(ke,{text:"Total votes",value:a}))))},ze=a(106),Fe=a(346),Pe=a(61),Be=a(343),We=a(344),De=a(345),He=a(180),qe=a.n(He),Me=Object(j.a)({root:{position:"absolute",color:"white",top:"86%",fontSize:20,textShadow:"0 0 3px black",display:"flex",alignItems:"center"},left:{left:30},right:{right:30}}),_e=function(e){var t=e.value,a=e.which,n=e.like,c=Me();return r.a.createElement("div",{className:"".concat(c.root," ").concat(c[a])},n&&r.a.createElement(qe.a,null),"".concat(t,"%"))},Ye={month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},Ge=Object(j.a)((function(e){return{images:{height:e.spacing(50)},imagesBlock:{display:"flex"},rateLine:{position:"relative",width:"100%",height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},highlight:{backgroundColor:"".concat(e.palette.primary.main," !important")},fillRateLine:{height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"}}})),Ve=function(e){var t,a,c=e.initialPoll,l=Object(n.useState)(c),o=Object(C.a)(l,2),i=o[0],s=o[1],u=Ge(),m=i.author,d=i.contents,f=d.left,h=d.right,p=i.vote,g=Object(me.b)().enqueueSnackbar,v=q().isAuthenticated,E=new Date(i.createdAt).toLocaleString("default",Ye),b=function(e){if(v())if(p)g("You have already voted in this poll",{variant:"error"});else{var t={which:e,pollId:i._id};B("votes/",t),i.contents[e].votes+=1,i.vote=Object(Pe.a)({_id:"",authorId:"",createdAt:new Date},t),s(Object(Pe.a)({},i))}else g("Unauthorized users can not vote in polls",{variant:"error"})};f.votes||h.votes?a=100-(t=Math.round(f.votes/(f.votes+h.votes)*100)):(t=0,a=0);var j=f.votes>=h.votes?"left":"right";return r.a.createElement(Be.a,null,r.a.createElement(te,{user:m,info:E}),r.a.createElement("div",{className:u.imagesBlock},r.a.createElement(We.a,{onDoubleClick:function(){return b("left")}},r.a.createElement(De.a,{className:u.images,image:f.url}),r.a.createElement(_e,{value:t,which:"left",like:"left"===(null===p||void 0===p?void 0:p.which)})),r.a.createElement(We.a,{onDoubleClick:function(){return b("right")}},r.a.createElement(De.a,{className:u.images,image:h.url}),r.a.createElement(_e,{value:a,which:"right",like:"right"===(null===p||void 0===p?void 0:p.which)}))),r.a.createElement("div",{className:"".concat(u.rateLine," ").concat("right"===j?u.highlight:"")},r.a.createElement("div",{className:"".concat(u.fillRateLine," ").concat("left"===j?u.highlight:""),style:{width:"".concat(t,"%")}})))},Je=Object(j.a)((function(e){return{loader:{width:"100%",textAlign:"center",marginTop:e.spacing(10)}}})),$e=function(e){var t=e.polls,a=Je(),n=function(e){var a=e.index,n=e.style,c=e.key,l=t[a];return r.a.createElement("div",{key:c,style:n},r.a.createElement(Ve,{initialPoll:l}))},c=r.a.createElement("div",{className:a.loader},r.a.createElement(Fe.a,{color:"primary",style:{margin:"0 auto"}})),l=r.a.createElement(ze.c,null,(function(e){var a=e.height,c=e.isScrolling,l=e.registerChild,o=e.onChildScroll,i=e.scrollTop;return r.a.createElement(ze.a,{disableHeight:!0},(function(e){var s=e.width;return r.a.createElement("div",{ref:l},r.a.createElement(ze.b,{autoHeight:!0,height:a,isScrolling:c,onScroll:o,rowCount:t.length,rowHeight:550,rowRenderer:n,scrollTop:i,width:s,containerStyle:{pointerEvents:"auto"},overscanRowCount:1}))}))}));return t.length?l:c},Ke=function(){var e=Object(n.useState)(),t=Object(C.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(C.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(0),m=Object(C.a)(u,2),d=m[0],h=m[1],p=Object(n.useState)(!1),g=Object(C.a)(p,2),v=g[0],E=g[1],b=Object(n.useState)(!1),j=Object(C.a)(b,2),O=j[0],w=j[1],y=Object(f.f)(),k=Object(f.g)().username,x=q().user;return Object(n.useEffect)((function(){E(!0);var e=function(){x?y.push("/profile/".concat(x.username)):y.push("/login")};k?P("/users?username=".concat(k)).then((function(t){t.data.length||e(),c(t.data[0]),E(!1)})).catch((function(){return e()})):e()}),[k,x,y]),Object(n.useEffect)((function(){(null===a||void 0===a?void 0:a._id)&&(w(!0),P("/profiles/".concat(a._id)).then((function(e){w(!1),s([]),s(e.data),h(e.data.reduce((function(e,t){var a=t.contents,n=a.left,r=a.right;return e+n.votes+r.votes}),0))})))}),[a]),r.a.createElement(de.a,{maxWidth:"sm",disableGutters:!0},r.a.createElement(Le,{userInfo:a,setUserInfo:c,savedPolls:i.length,totalVotes:d,isLoading:v}),O?r.a.createElement($e,{polls:[]}):i.length>0&&r.a.createElement($e,{polls:i}))},Qe=a(333),Xe=a(181),Ze=a.n(Xe),et=a(182),tt=a.n(et),at=Object(j.a)({root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},clearIcon:{opacity:".5",fontSize:50},media:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},text:{textAlign:"center"}}),nt=function(e){var t=e.url,a=e.setUrl,c=at(),l=Object(n.useState)(!1),o=Object(C.a)(l,2),i=o[0],s=o[1],u=Object(n.useState)(!1),m=Object(C.a)(u,2),d=m[0],f=m[1],h=r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze.a,{fontSize:"large",color:"primary"}),r.a.createElement(b.a,{variant:"h5",className:c.text}," Upload an image ")),p=r.a.createElement(De.a,{image:t,className:c.media,onMouseEnter:function(){f(!0)},onMouseLeave:function(){f(!1)}},d&&r.a.createElement(tt.a,{className:c.clearIcon}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(We.a,{onClick:function(){i||(t?a(""):s(!i))},className:c.root},t?p:h),r.a.createElement(Ae,{isOpen:i,setIsOpen:s,callback:a}))},rt=Object(j.a)((function(e){return{root:{marginBottom:e.spacing(4)},images:{height:e.spacing(50),display:"flex"}}})),ct={left:{url:""},right:{url:""}},lt=function(e){var t=e.addPoll,a=rt(),c=Object(n.useState)(!1),l=Object(C.a)(c,2),o=l[0],i=l[1],s=Object(n.useState)(ct),u=Object(C.a)(s,2),m=u[0],d=u[1],f=Object(me.b)().enqueueSnackbar,h=q().user,p=m.left.url&&m.right.url,g=function(e){return function(t){d(Object(Pe.a)(Object(Pe.a)({},m),{},Object(ue.a)({},e,{url:t})))}};return r.a.createElement(Y.a,{onClickAway:function(){i(!1)}},r.a.createElement(Be.a,{className:a.root},r.a.createElement(Qe.a,{in:o,timeout:"auto",unmountOnExit:!0},h&&r.a.createElement(te,{user:h,info:""}),r.a.createElement($.a,null),r.a.createElement("div",{className:a.images},r.a.createElement(nt,{url:m.left.url,setUrl:g("left")}),r.a.createElement(nt,{url:m.right.url,setUrl:g("right")}))),r.a.createElement(Ue.a,{color:"primary",disabled:o&&!p,variant:o?"contained":"outlined",onClick:function(){o&&p&&(B("/polls/",{contents:m}).then((function(e){t(e.data),f("Your poll has been successfully created!",{variant:"success"})})),d(Object(Pe.a)({},ct))),i(!o)},fullWidth:!0},o?"Submit":"Create a Poll")))},ot=function(){var e=Object(n.useState)([]),t=Object(C.a)(e,2),a=t[0],c=t[1],l=q().isAuthenticated;Object(n.useEffect)((function(){P("/feed").then((function(e){c(e.data)}))}),[]);return r.a.createElement(de.a,{maxWidth:"sm",disableGutters:!0},l()&&r.a.createElement(lt,{addPoll:function(e){a.unshift(e),c([]),c(a)}}),r.a.createElement($e,{polls:a}))},it=a(348),st=a(360),ut=Object(j.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:e.spacing(35)},display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},formHeader:{textAlign:"center",fontSize:25},formTransfer:{display:"flex",justifyContent:"center"},transferButton:{marginLeft:10,color:"green",cursor:"pointer"}}})),mt=function(){var e=Object(n.useState)(!1),t=Object(C.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),o=Object(C.a)(l,2),i=o[0],s=o[1],u=ut(),m=Object(n.useRef)(),d=Object(n.useRef)(),h=q().login,p=Object(f.f)(),g=function(){var e=Object(U.a)(T.a.mark((function e(){var t,a,n,r,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=null===(t=m.current)||void 0===t||null===(a=t.value)||void 0===a?void 0:a.toLowerCase(),l=null===(n=d.current)||void 0===n?void 0:n.value,r&&l&&h(r,l,i).then((function(e){e?p.push("/profile/".concat(r)):c(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:u.formHeader},"Sign In"),r.a.createElement("form",{className:u.root,noValidate:!0,autoComplete:"off"},r.a.createElement(Ie.a,{inputRef:m,error:a,label:"Login"}),r.a.createElement(Ie.a,{inputRef:d,error:a,helperText:a&&"Invalid credentials",label:"Password",type:"password"}),r.a.createElement(it.a,{control:r.a.createElement(st.a,{color:"primary",onClick:function(){s(!i)},checked:i,size:"small"}),label:"Remember me"}),r.a.createElement(Ue.a,{variant:"contained",onClick:g},"submit")),r.a.createElement("div",{className:u.formTransfer},r.a.createElement("div",null,"Don't have an account?"),r.a.createElement("span",{onClick:function(){p.push("/registration")},className:u.transferButton,role:"presentation"},"Sign up")))},dt=Object(j.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),width:e.spacing(35)},display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},formHeader:{textAlign:"center",fontSize:25},formTransfer:{display:"flex",justifyContent:"center"},transferButton:{marginLeft:10,color:"green",cursor:"pointer"}}})),ft=function(){var e=Object(n.useState)(!1),t=Object(C.a)(e,2),a=t[0],c=t[1],l=dt(),o=Object(n.useRef)(),i=Object(n.useRef)(),s=Object(n.useRef)(),u=q().login,m=Object(f.f)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:l.formHeader},"Sign Up"),r.a.createElement("form",{className:l.root,noValidate:!0,autoComplete:"off"},r.a.createElement(Ie.a,{inputRef:o,label:"Username",error:a,helperText:a&&"This field is required!",required:!0}),r.a.createElement(Ie.a,{inputRef:i,label:"Email"}),r.a.createElement(Ie.a,{inputRef:s,label:"Password",type:"password",required:!0,error:a,helperText:a&&"This field is required!"}),r.a.createElement(Ue.a,{variant:"contained",onClick:function(){var e,t,a,n,r=null===(e=o.current)||void 0===e||null===(t=e.value)||void 0===t?void 0:t.toLowerCase(),l=null===(a=s.current)||void 0===a?void 0:a.value,d=null===(n=i.current)||void 0===n?void 0:n.value;r&&l?B("/users",{username:r,password:l,email:d}).then((function(){return u(r,l)})).then((function(){return m.push("/profile/".concat(r))})):c(!0)}},"submit")),r.a.createElement("div",{className:l.formTransfer},r.a.createElement("div",null,"Already have an account?"),r.a.createElement("span",{onClick:function(){m.push("/login")},className:l.transferButton,role:"presentation"},"Log in")))},ht=a(350),pt=a(351),gt=a(183),vt=a.n(gt),Et=a(357),bt=a(349),jt=Object(j.a)((function(e){return{root:{margin:e.spacing(4,0,1,0)}}})),Ot=function(e){var t=e.feedback,a=jt();return r.a.createElement(Be.a,{className:a.root,elevation:2},r.a.createElement(te,{user:t.author,info:r.a.createElement(Et.a,{value:t.score,readOnly:!0,size:"small"})}),t.contents&&r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,null),r.a.createElement(bt.a,null,r.a.createElement(b.a,null,t.contents))))},wt=Object(j.a)((function(e){return{root:{display:"flex",flexDirection:"column"},textField:{margin:e.spacing(2,0)}}})),yt=function(){var e=Object(n.useState)(""),t=Object(C.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(0),o=Object(C.a)(l,2),i=o[0],s=o[1],u=wt(),m=Object(f.f)(),d=Object(me.b)().enqueueSnackbar;return r.a.createElement("div",{className:u.root},r.a.createElement(Et.a,{value:i,onChange:function(e,t){s(t||0)},size:"large"}),r.a.createElement(Ie.a,{value:a,onChange:function(e){var t;c((null===(t=e.target)||void 0===t?void 0:t.value)||"")},label:"Feedback",variant:"outlined",className:u.textField,rows:4,multiline:!0}),r.a.createElement("div",null,r.a.createElement(Ue.a,{variant:"contained",color:"primary",size:"large",onClick:function(){i&&B("/feedback",{contents:a,score:i,version:"v1.0.0"}).then((function(){d("Your feedback has been submitted!",{variant:"success"}),m.push("/feed")}))}},"submit")))},kt=Object(j.a)((function(e){return{root:{overflow:"hidden",padding:e.spacing(0,2)},logo:{width:e.spacing(20),height:e.spacing(20)},score:{fontWeight:"bold"},signup:{marginLeft:e.spacing(2)},reviews:Object(ue.a)({},e.breakpoints.up("md"),{padding:e.spacing(0,10)})}})),xt=function(){var e=Object(n.useState)([]),t=Object(C.a)(e,2),a=t[0],c=t[1],l=kt(),o=Object(f.f)(),i=q(),s=i.isAuthenticated,u=i.user,m=Object(O.a)(),d=Object(h.a)(m.breakpoints.down("sm")),p=a.length&&a.reduce((function(e,t){return e+t.score}),0)/a.length;Object(n.useEffect)((function(){P("/feedback").then((function(e){c(e.data)}))}),[]);var g=function(){o.push("/registration")},v=r.a.createElement(ht.a,{href:"https://github.com/which-ecosystem"},"GitHub"),E=r.a.createElement(ht.a,{href:"https://www.typescriptlang.org/"},"Typescript"),j=r.a.createElement(ht.a,{href:"https://reactjs.org/"},"React"),w=r.a.createElement(ht.a,{href:"https://feathersjs.com"},"Feathers"),y=r.a.createElement(ht.a,{href:"https://material-ui.com"},"Material-UI"),k=r.a.createElement(ht.a,{href:"mailto: eug-vs@keemail.me"},"eug-vs@keemail.me"),x=r.a.createElement("div",{className:l.reviews},a.map((function(e){return r.a.createElement(Ot,{feedback:e})}))),N=a.findIndex((function(e){return e.author._id===(null===u||void 0===u?void 0:u._id)}))>=0?r.a.createElement("p",null,"You have already left feedback for this version. If you have more to say, please open GitHub issue or contact us directly via email: ",k,". Alternatively, you can just wait for another application patch to come out."):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"Here you can share your thougts about Which with us! Note that you can ony leave feedback once per application version (there will be plenty of them later)."),s()?r.a.createElement(yt,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null," You must be authorized to leave feedback."),r.a.createElement(Ue.a,{variant:"outlined",color:"primary",onClick:g},"sign in")));return r.a.createElement("div",{className:l.root},r.a.createElement(pt.a,{container:!0,spacing:4},r.a.createElement(pt.a,{item:!0,xs:12,md:4},r.a.createElement(pt.a,{container:!0,direction:"column",spacing:1,alignItems:"center"},r.a.createElement(pt.a,{item:!0},r.a.createElement("img",{src:"".concat("/which","/which-logo-512.png"),alt:"logo",className:l.logo})),r.a.createElement(pt.a,{item:!0},0!==p&&r.a.createElement(Et.a,{value:p,readOnly:!0,size:"large"})),r.a.createElement(pt.a,{item:!0},0!==p&&r.a.createElement(b.a,{variant:"h5",className:l.score},"User score: ",p.toFixed(1)))),d||x),r.a.createElement(pt.a,{item:!0,xs:12,md:5},r.a.createElement(pt.a,{container:!0,direction:"column",spacing:6},r.a.createElement(pt.a,{item:!0},r.a.createElement(b.a,{variant:"h4"}," Which one to choose? "),r.a.createElement($.a,null),r.a.createElement(b.a,null,r.a.createElement("p",null,"Have you ever found yourself stuck between two options, not being able to choose any? This is exactly the problem we are going to solve!"),r.a.createElement("p",null,"Share your minor everyday uncertainties with the whole world and see what others think!"),r.a.createElement(Ue.a,{variant:"contained",color:"primary",size:"large",onClick:function(){o.push("/feed")}},"let's go!"),!s()&&r.a.createElement(Ue.a,{variant:"outlined",color:"primary",size:"large",className:l.signup,onClick:g},"sign up"))),r.a.createElement(pt.a,{item:!0},r.a.createElement(b.a,{variant:"h4"}," About the project "),r.a.createElement($.a,null),r.a.createElement(b.a,null,r.a.createElement("p",null,"The project is written in ",E," and features ",j,", ",w,", and ",y,". It is currently open-source and you can visit our ",v," (make sure to star our repositories)!"),r.a.createElement("p",null,"We encourage any developer to check it out. Feel free to open issues and create Pull Requests!"),r.a.createElement("p",null,"All the development process is being tracked on the KanBan board (thanks GitHub). You can always check it to see what is the current state of the project."),r.a.createElement(Ue.a,{variant:"outlined",color:"primary",startIcon:r.a.createElement(vt.a,null),href:"https://github.com/orgs/which-ecosystem/projects/1"},"track our progress"))),r.a.createElement(pt.a,{item:!0},r.a.createElement(b.a,{variant:"h4"}," Leave feedback "),r.a.createElement($.a,null),r.a.createElement(b.a,null,N)),d&&r.a.createElement(pt.a,{item:!0},x)))))},Nt=Object(j.a)((function(e){return{root:{marginTop:e.spacing(25),textAlign:"center"}}})),St=function(){var e=Nt();return r.a.createElement(b.a,{variant:"h4",className:e.root},"Sorry, this page is being constructed yet.")},Ct=Object(j.a)((function(e){var t;return{root:(t={},Object(ue.a)(t,e.breakpoints.down("sm"),{margin:e.spacing(2,0,12,0)}),Object(ue.a)(t,e.breakpoints.up("md"),{margin:e.spacing(15,5,8,5)}),t)}})),It=function(){var e=Ct(),t=Object(O.a)(),a=Object(h.a)(t.breakpoints.down("sm"));return r.a.createElement(me.a,{maxSnack:3,anchorOrigin:{vertical:a?"top":"bottom",horizontal:"right"}},r.a.createElement("div",{className:e.root},r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:xt}),r.a.createElement(f.a,{exact:!0,path:"/login",component:mt}),r.a.createElement(f.a,{exact:!0,path:"/registration",component:ft}),r.a.createElement(f.a,{exact:!0,path:"/feed",component:ot}),r.a.createElement(f.a,{exact:!0,path:"/notifications",component:St}),r.a.createElement(f.a,{path:"/profile/:username",component:Ke}))))},Tt=Object(o.a)({palette:{primary:{main:d.a[700],light:d.a[100]}}}),Ut=function(){return r.a.createElement(u.a,null,r.a.createElement(H,null,r.a.createElement(i.a,{theme:Tt},r.a.createElement(s.a,null),r.a.createElement(ce,null),r.a.createElement(It,null),r.a.createElement(se,null))))};l.a.render(r.a.createElement(Ut,null),document.getElementById("root"))}},[[197,1,2]]]);
//# sourceMappingURL=main.df709220.chunk.js.map
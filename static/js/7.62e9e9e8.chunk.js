(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[7],{311:function(e,t,a){"use strict";var n=a(45),r=a(0),i=a.n(r),o=a(13),l=a(32),c=a(215),s=a(216),u=a(446),h=a(63),d=a(353),m=a.n(d),g=Object(h.a)((function(e){var t;return{root:(t={zIndex:1e3,position:"fixed"},Object(n.a)(t,e.breakpoints.down("sm"),{right:e.spacing(2),bottom:e.spacing(8)}),Object(n.a)(t,e.breakpoints.up("md"),{right:e.spacing(5),bottom:e.spacing(5)}),t)}}));t.a=function(e){var t=e.hideOnScroll,a=void 0!==t&&t,n=g(),r=Object(o.g)(),h=Object(c.a)();return i.a.createElement(s.a,{appear:!1,direction:"up",in:!a||!h},i.a.createElement(l.b,{to:{pathname:"/new",state:{background:r}}},i.a.createElement(u.a,{className:n.root,color:"secondary"},i.a.createElement(m.a,null))))}},328:function(e,t,a){"use strict";var n=a(27),r=a.n(n),i=a(35),o=a(7),l=a(0),c=a.n(l),s=a(364),u=a(94),h=a.n(u),d=a(366),m=a(351),g=a(63),v=a(239),p=a(235),b=a(66),f=a(352),w=a.n(f),E=Object(g.a)({root:{position:"absolute",color:"white",top:"86%",fontSize:20,textShadow:"0 0 3px black",display:"flex",alignItems:"center"},left:{left:30},right:{right:30}}),k=function(e){var t=e.value,a=e.which,n=e.like,r=E();return c.a.createElement("div",{className:"".concat(r.root," ").concat(r[a])},n&&c.a.createElement(w.a,null),"".concat(t,"%"))},O=a(64),j=a(95),y=a(26),C=a(33),x={month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},S=Object(g.a)((function(e){return{media:{display:"flex",height:e.spacing(50)},rateLine:{position:"relative",width:"100%",height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},highlight:{backgroundColor:"".concat(e.palette.primary.main," !important")},fillRateLine:{height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"}}})),R=c.a.memo((function(e){var t,a,n=e.poll,r=e.setPoll,i=S(),o=n.author,l=n.contents,s=l.left,u=l.right,h=n.vote,d=Object(b.b)().enqueueSnackbar,g=Object(C.b)().isAuthenticated,f=new Date(n.createdAt).toLocaleString("default",x),w=function(e){return function(){if(g)if(h)d("You have already voted in this poll",{variant:"error"});else{var t={which:e,pollId:n._id},a=Object(m.a)({},n);a.contents[e].votes+=1,a.vote=Object(m.a)({_id:"",authorId:"",createdAt:new Date},t),r(a),Object(y.c)("votes/",t)}else d("Unauthorized users can not vote in polls",{variant:"error"})}};s.votes||u.votes?a=100-(t=Math.round(s.votes/(s.votes+u.votes)*100)):(t=0,a=0);var E=s.votes>=u.votes?"left":"right";return c.a.createElement(v.a,{elevation:3},c.a.createElement(O.a,{user:o,info:f}),c.a.createElement("div",{className:i.media},c.a.createElement(p.a,{onDoubleClick:w("left"),className:i.media},c.a.createElement(j.a,{src:s.url}),c.a.createElement(k,{value:t,which:"left",like:"left"===(null===h||void 0===h?void 0:h.which)})),c.a.createElement(p.a,{onDoubleClick:w("right"),className:i.media},c.a.createElement(j.a,{src:u.url}),c.a.createElement(k,{value:a,which:"right",like:"right"===(null===h||void 0===h?void 0:h.which)}))),c.a.createElement("div",{className:"".concat(i.rateLine," ").concat("right"===E?i.highlight:"")},c.a.createElement("div",{className:"".concat(i.fillRateLine," ").concat("left"===E?i.highlight:""),style:{width:"".concat(t,"%")}})))})),N=c.a.memo((function(e){var t=e.polls,a=e.mutate,n=e.index,r=e.style,i=e._key,o=t[n],s=Object(l.useCallback)((function(e){var r=Object(d.a)(t);r[n]=e,a([],!1),a(r,!1)}),[a,n,t]);return c.a.createElement("div",{key:"".concat(i,"-").concat(o._id),style:r},c.a.createElement(R,{poll:o,setPoll:s}))}),(function(e,t){return e._key===t._key&&(e.index===t.index&&e.polls===t.polls)}));t.a=function(e){var t=e.polls,a=e.mutate,n=Object(l.useState)(10),u=Object(o.a)(n,2),d=u[0],m=u[1],g=Object(l.useCallback)((function(e){var n=e.index,r=e.style,i=e.key;return c.a.createElement(N,{polls:t,mutate:a,index:n,style:r,key:i,_key:i})}),[t,a]),v=Object(l.useCallback)(Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m((function(e){return e+10}));case 1:case"end":return e.stop()}}),e)}))),[]),p=Object(l.useCallback)((function(e){return e.index<d-1||d===t.length}),[d,t]),b=Object(l.useMemo)((function(){return h.a.min([d,t.length])||t.length}),[d,t.length]);return c.a.createElement(s.d,null,(function(e){var t=e.height,a=e.isScrolling,n=e.registerChild,r=e.onChildScroll,i=e.scrollTop;return c.a.createElement(s.a,{disableHeight:!0},(function(e){var o=e.width;return c.a.createElement("div",{ref:n},c.a.createElement(s.b,{isRowLoaded:p,loadMoreRows:v,rowCount:b,threshold:1},(function(e){var n=e.onRowsRendered,l=e.registerChild;return c.a.createElement(s.c,{autoHeight:!0,height:t,isScrolling:a,onScroll:r,rowCount:b,rowHeight:550,rowRenderer:g,scrollTop:i,width:o,containerStyle:{pointerEvents:"auto"},overscanRowCount:2,onRowsRendered:n,ref:l})})))}))}))}},447:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(238),o=a(328),l=a(311),c=a(69),s=a(65),u=a(33),h=a(58);t.default=function(){var e=Object(h.a)(),t=e.data,a=e.isValidating,n=e.mutate,d=Object(u.b)().isAuthenticated;return r.a.createElement(i.a,{maxWidth:"sm",disableGutters:!0},d&&r.a.createElement(l.a,{hideOnScroll:!0}),t?t.length?r.a.createElement(o.a,{polls:t,mutate:n}):r.a.createElement(s.a,null):a&&r.a.createElement(c.a,null))}}}]);
//# sourceMappingURL=7.62e9e9e8.chunk.js.map
(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[8],{310:function(e,t,a){"use strict";var n=a(85),r=a(0),i=a.n(r),o=a(13),l=a(28),c=a(214),s=a(215),m=a(445),u=a(60),d=a(352),h=a.n(d),g=Object(u.a)((function(e){var t;return{root:(t={zIndex:1e3,position:"fixed"},Object(n.a)(t,e.breakpoints.down("sm"),{right:e.spacing(2),bottom:e.spacing(8)}),Object(n.a)(t,e.breakpoints.up("md"),{right:e.spacing(5),bottom:e.spacing(5)}),t)}}));t.a=function(e){var t=e.hideOnScroll,a=void 0!==t&&t,n=g(),r=Object(o.g)(),u=Object(c.a)();return i.a.createElement(s.a,{appear:!1,direction:"up",in:!a||!u},i.a.createElement(l.b,{to:{pathname:"/new",state:{background:r}}},i.a.createElement(m.a,{className:n.root,color:"secondary"},i.a.createElement(h.a,null))))}},327:function(e,t,a){"use strict";var n=a(32),r=a.n(n),i=a(44),o=a(7),l=a(0),c=a.n(l),s=a(363),m=a(95),u=a.n(m),d=a(365),h=a(350),g=a(60),v=a(238),f=a(234),p=a(64),b=a(351),O=a.n(b),w=Object(g.a)({root:{position:"absolute",color:"white",top:"86%",fontSize:20,textShadow:"0 0 3px black",display:"flex",alignItems:"center"},left:{left:30},right:{right:30}}),E=function(e){var t=e.value,a=e.which,n=e.like,r=w();return c.a.createElement("div",{className:"".concat(r.root," ").concat(r[a])},n&&c.a.createElement(O.a,null),"".concat(t,"%"))},y=a(62),j=a(96),k=a(26),x=a(33),C={month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},N=Object(g.a)((function(e){return{media:{display:"flex",height:e.spacing(50)},rateLine:{position:"relative",width:"100%",height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},highlight:{backgroundColor:"".concat(e.palette.primary.main," !important")},fillRateLine:{height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"}}})),R=c.a.memo((function(e){var t,a,n=e.poll,r=e.setPoll,i=N(),o=n.author,l=n.contents,s=l.left,m=l.right,u=n.vote,d=Object(p.b)().enqueueSnackbar,g=Object(x.b)().isAuthenticated,b=new Date(n.createdAt).toLocaleString("default",C),O=function(e){return function(){if(g)if(u)d("You have already voted in this poll",{variant:"error"});else{var t={which:e,pollId:n._id},a=Object(h.a)({},n);a.contents[e].votes+=1,a.vote=Object(h.a)({_id:"",authorId:"",createdAt:new Date},t),r(a),Object(k.c)("votes/",t)}else d("Unauthorized users can not vote in polls",{variant:"error"})}};s.votes||m.votes?a=100-(t=Math.round(s.votes/(s.votes+m.votes)*100)):(t=0,a=0);var w=s.votes>=m.votes?"left":"right";return c.a.createElement(v.a,{elevation:3},c.a.createElement(y.a,{user:o,info:b}),c.a.createElement("div",{className:i.media},c.a.createElement(f.a,{onDoubleClick:O("left"),className:i.media},c.a.createElement(j.a,{src:s.url}),c.a.createElement(E,{value:t,which:"left",like:"left"===(null===u||void 0===u?void 0:u.which)})),c.a.createElement(f.a,{onDoubleClick:O("right"),className:i.media},c.a.createElement(j.a,{src:m.url}),c.a.createElement(E,{value:a,which:"right",like:"right"===(null===u||void 0===u?void 0:u.which)}))),c.a.createElement("div",{className:"".concat(i.rateLine," ").concat("right"===w?i.highlight:"")},c.a.createElement("div",{className:"".concat(i.fillRateLine," ").concat("left"===w?i.highlight:""),style:{width:"".concat(t,"%")}})))})),S=c.a.memo((function(e){var t=e.polls,a=e.mutate,n=e.index,r=e.style,i=e._key,o=t[n],s=Object(l.useCallback)((function(e){var r=Object(d.a)(t);r[n]=e,a([],!1),a(r,!1)}),[a,n,t]);return c.a.createElement("div",{key:"".concat(i,"-").concat(o._id),style:r},c.a.createElement(R,{poll:o,setPoll:s}))}),(function(e,t){return e._key===t._key&&(e.index===t.index&&e.polls===t.polls)}));t.a=function(e){var t=e.polls,a=e.mutate,n=Object(l.useState)(10),m=Object(o.a)(n,2),d=m[0],h=m[1],g=Object(l.useCallback)((function(e){var n=e.index,r=e.style,i=e.key;return c.a.createElement(S,{polls:t,mutate:a,index:n,style:r,key:i,_key:i})}),[t,a]),v=Object(l.useCallback)(Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h((function(e){return e+10}));case 1:case"end":return e.stop()}}),e)}))),[]),f=Object(l.useCallback)((function(e){return e.index<d-1||d===t.length}),[d,t]),p=Object(l.useMemo)((function(){return u.a.min([d,t.length])||t.length}),[d,t.length]);return c.a.createElement(s.d,null,(function(e){var t=e.height,a=e.isScrolling,n=e.registerChild,r=e.onChildScroll,i=e.scrollTop;return c.a.createElement(s.a,{disableHeight:!0},(function(e){var o=e.width;return c.a.createElement("div",{ref:n},c.a.createElement(s.b,{isRowLoaded:f,loadMoreRows:v,rowCount:p,threshold:1},(function(e){var n=e.onRowsRendered,l=e.registerChild;return c.a.createElement(s.c,{autoHeight:!0,height:t,isScrolling:a,onScroll:r,rowCount:p,rowHeight:550,rowRenderer:g,scrollTop:i,width:o,containerStyle:{pointerEvents:"auto"},overscanRowCount:2,onRowsRendered:n,ref:l})})))}))}))}},455:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),o=a(237),l=a(32),c=a.n(l),s=a(44),m=a(7),u=a(1),d=a(2),h=(a(5),a(3)),g=a(4),v=a(6),f=n.forwardRef((function(e,t){var a=e.anchorOrigin,r=void 0===a?{vertical:"top",horizontal:"right"}:a,i=e.badgeContent,o=e.children,l=e.classes,c=e.className,s=e.color,m=void 0===s?"default":s,g=e.component,f=void 0===g?"span":g,p=e.invisible,b=e.max,O=void 0===b?99:b,w=e.overlap,E=void 0===w?"rectangle":w,y=e.showZero,j=void 0!==y&&y,k=e.variant,x=void 0===k?"standard":k,C=Object(d.a)(e,["anchorOrigin","badgeContent","children","classes","className","color","component","invisible","max","overlap","showZero","variant"]),N=p;null==p&&(0===i&&!j||null==i&&"dot"!==x)&&(N=!0);var R="";return"dot"!==x&&(R=i>O?"".concat(O,"+"):i),n.createElement(f,Object(u.a)({className:Object(h.a)(l.root,c),ref:t},C),o,n.createElement("span",{className:Object(h.a)(l.badge,l["".concat(r.horizontal).concat(Object(v.a)(r.vertical),"}")],l["anchorOrigin".concat(Object(v.a)(r.vertical)).concat(Object(v.a)(r.horizontal)).concat(Object(v.a)(E))],"default"!==m&&l["color".concat(Object(v.a)(m))],N&&l.invisible,"dot"===x&&l.dot)},R))})),p=Object(g.a)((function(e){return{root:{position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0},badge:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorError:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText},dot:{borderRadius:4,height:8,minWidth:8,padding:0},anchorOriginTopRightRectangle:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightRectangle:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftRectangle:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftRectangle:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},anchorOriginTopRightCircle:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightCircle:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftCircle:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftCircle:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},invisible:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}}),{name:"MuiBadge"})(f),b=a(133),O=a(37),w=a(16),E=Object(w.a)(r.a.createElement(r.a.Fragment,null,r.a.createElement("circle",{cx:"12",cy:"12",r:"3.2"}),r.a.createElement("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),"CameraAlt"),y=Object(w.a)(r.a.createElement("path",{d:"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline"),j=a(60),k=a(12),x=n.forwardRef((function(e,t){var a=e.animation,r=void 0===a?"pulse":a,i=e.classes,o=e.className,l=e.component,c=void 0===l?"span":l,s=e.height,m=e.variant,g=void 0===m?"text":m,v=e.width,f=Object(d.a)(e,["animation","classes","className","component","height","variant","width"]),p=Boolean(f.children);return n.createElement(c,Object(u.a)({ref:t,className:Object(h.a)(i.root,i[g],o,p&&[i.withChildren,!v&&i.fitContent,!s&&i.heightAuto],!1!==r&&i[r])},f,{style:Object(u.a)({width:v,height:s},f.style)}))})),C=Object(g.a)((function(e){return{root:{display:"block",backgroundColor:Object(k.c)(e.palette.text.primary,"light"===e.palette.type?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:e.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(e.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}}),{name:"MuiSkeleton"})(x),N=Object(j.a)({root:{position:"relative"},menuButton:{width:200,height:50,textAlign:"center"},menuNumber:{fontWeight:800,color:"black"},menuText:{color:"darkgray"}}),R=function(e){var t=e.text,a=e.value,n=N();return r.a.createElement("div",{className:n.menuButton},r.a.createElement("div",{className:n.menuNumber},a),r.a.createElement("div",{className:n.menuText},t))},S=a(114),T=a(45),L=a(26),z=a(33),I=a(112),M=Object(j.a)((function(e){return{root:{position:"relative",marginBottom:e.spacing(4)},avatar:{width:150,height:150,position:"relative",margin:"0 auto"},darken:{filter:"brightness(50%)"},name:{margin:e.spacing(1,0),display:"flex",alignItems:"center",justifyContent:"center"},verified:{marginLeft:e.spacing(.5),width:e.spacing(3),height:e.spacing(3)},profileMenu:{display:"flex",width:"100%",height:50,marginTop:e.spacing(6),borderBottom:"1px solid lightgray"},menuButton:{width:200,height:50,textAlign:"center"},badge:{width:e.spacing(5),height:e.spacing(5),borderRadius:"50%",cursor:"pointer",background:"#d3d3d3",display:"flex",alignItems:"center","& svg":{margin:"0 auto"}},avatarContainer:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},menuNumber:{fontWeight:800,color:"black"},menuText:{color:"darkgray"},skeleton:{margin:"10px auto",borderRadius:2},progress:{position:"absolute",color:"white"}}})),B=function(e){var t=e.savedPolls,a=e.totalVotes,i=e.setUserInfo,o=e.userInfo,l=M(),u=Object(z.b)().user,d=Object(n.useState)(0),h=Object(m.a)(d,2),g=h[0],v=h[1],f=new Date((null===o||void 0===o?void 0:o.createdAt)||"").toLocaleDateString(),w=Object(n.useCallback)(function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u&&Object(I.a)(t,.8,v).then((function(e){return Object(L.b)("/users/".concat(u._id),{avatarUrl:e})})).then((function(e){return i(e.data)})).then((function(){return v(0)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[u,i]);return r.a.createElement("div",{className:l.root},o?(null===o||void 0===o?void 0:o._id)===(null===u||void 0===u?void 0:u._id)?r.a.createElement("div",{className:l.avatarContainer},r.a.createElement(p,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},className:l.avatarContainer,badgeContent:r.a.createElement(S.a,{callback:w},r.a.createElement("div",{className:l.badge},r.a.createElement(E,null)))},r.a.createElement(T.a,{className:[l.avatar,g&&l.darken].join(" "),user:o}),g>0&&r.a.createElement(b.a,{variant:"static",value:g,className:l.progress}))):r.a.createElement(T.a,{className:l.avatar,user:o}):r.a.createElement(C,{animation:"wave",variant:"circle",width:150,height:150,className:l.avatar}),o?r.a.createElement(O.a,{variant:"h5",className:l.name},null===o||void 0===o?void 0:o.username,(null===o||void 0===o?void 0:o.verified)&&r.a.createElement(y,{className:l.verified,color:"primary"})):r.a.createElement(C,{animation:"wave",variant:"rect",width:100,height:20,className:l.skeleton}),r.a.createElement("div",{className:l.profileMenu},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{text:"Polls",value:t}),r.a.createElement(R,{text:"Since",value:f}),r.a.createElement(R,{text:"Total votes",value:a})):r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{animation:"wave",variant:"rect",width:170,height:20,className:l.skeleton}),r.a.createElement(C,{animation:"wave",variant:"rect",width:170,height:20,className:l.skeleton}),r.a.createElement(C,{animation:"wave",variant:"rect",width:170,height:20,className:l.skeleton}))))},A=a(327),$=a(67),_=a(310),D=a(63),W=a(61);t.default=function(){var e=Object(i.f)(),t=Object(i.h)().username,a=Object(z.b)().user,l=Object(W.d)(t),c=l.data,s=l.mutate,m=Object(W.c)(t),u=m.data,d=m.mutate,h=m.isValidating;Object(n.useEffect)((function(){t||(a?e.push("/profile/".concat(a.username)):e.push("/login"))}),[t,e,a]);var g=Object(n.useMemo)((function(){return(null===a||void 0===a?void 0:a.username)===t}),[a,t]),v=Object(n.useMemo)((function(){return g?"Create a poll and it will show up here.":"This user has not uploaded anything yet."}),[g]),f=Object(n.useMemo)((function(){return(null===u||void 0===u?void 0:u.reduce((function(e,t){var a=t.contents,n=a.left,r=a.right;return e+n.votes+r.votes}),0))||0}),[u]);return r.a.createElement(o.a,{maxWidth:"sm",disableGutters:!0},r.a.createElement(B,{userInfo:c,setUserInfo:s,savedPolls:(null===u||void 0===u?void 0:u.length)||0,totalVotes:f}),u?u.length?r.a.createElement(A.a,{polls:u,mutate:d}):r.a.createElement(D.a,{message:v}):h&&r.a.createElement($.a,null),g&&r.a.createElement(_.a,null))}}}]);
//# sourceMappingURL=8.86c5a7ef.chunk.js.map
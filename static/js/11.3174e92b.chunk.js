(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[11],{228:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(67),l=a(74),i=Object(c.a)({root:{position:"absolute",width:"100%",height:"100%"},image:{objectFit:"cover",pointerEvents:"none",width:"100%",height:"100%"}});t.a=function(e){var t=e.src,a=e.alt,n=i();return r.a.createElement("picture",{className:n.root},r.a.createElement(l.a,{src:t,alt:a,className:n.image}))}},260:function(e,t,a){"use strict";var n=a(12),r=a(0),c=a.n(r),l=a(389),i=a(238),o=a.n(i),s=a(298),u=a(299),m=a(300),b=a(301),d=a(402),f=a(302),p=function(e){var t=e.setIsOpen,a=e.isOpen,i=e.callback,o=Object(r.useState)(""),p=Object(n.a)(o,2),h=p[0],v=p[1],g=function(){t(!1)};return c.a.createElement("div",null,c.a.createElement(s.a,{open:a,onClose:g},c.a.createElement(u.a,null,"Upload via link"),c.a.createElement(m.a,null,c.a.createElement(b.a,null,"Provide a valid URL to your image:"),c.a.createElement(d.a,{autoFocus:!0,margin:"dense",id:"name",label:"Image URL",type:"text",fullWidth:!0,autoComplete:"off",onChange:function(e){v(e.target.value)}})),c.a.createElement(f.a,null,c.a.createElement(l.a,{onClick:g,color:"primary"},"Cancel"),c.a.createElement(l.a,{onClick:function(){var e=h;if(h.startsWith("https://www.instagram.com/")){var t=h.match("/p/(.*)/"),a=t&&t[1];e="https://www.instagram.com/p/".concat(a,"/media/?size=l")}else if(h.startsWith("https://drive.google.com/")){var n=h.match("/d/(.*)/"),r=n&&n[1];e="https://drive.google.com/uc?export=view&id=".concat(r)}i(e||""),g()},color:"primary",disabled:!h.length},"Submit"))))};t.a=function(e){var t=e.callback,a=e.children,i=Object(r.useState)(!1),s=Object(n.a)(i,2),u=s[0],m=s[1],b=function(){m(!0)},d=c.a.createElement(l.a,{onClick:b,variant:"outlined",color:"primary",startIcon:c.a.createElement(o.a,null)},"Attach a link"),f=a&&c.a.Children.toArray(a)[0];return c.a.createElement(c.a.Fragment,null,c.a.createElement(p,{callback:t,isOpen:u,setIsOpen:m}),c.a.isValidElement(f)?c.a.cloneElement(f,{onClick:b}):d)}},404:function(e,t,a){"use strict";a.r(t);var n=a(61),r=a.n(n),c=a(12),l=a(76),i=a(0),o=a.n(i),s=a(10),u=a(67),m=a(368),b=a(287),d=a(179),f=a(401),p=a(389),h=a(75),v=a(43),g=a(367),E=a(108),j=a(399),O=a(400),k=a(260),y=a(370),C=a(376),w=a.n(C),x=function(e){var t=e.callback,a=e.children,n=Object(y.useFilePicker)(),r=n.files,c=n.onClick,l=n.HiddenFileInput;Object(i.useEffect)((function(){if(null===r||void 0===r?void 0:r.length){var e=r[0];y.utils.loadFile(e).then((function(a){return t(a,e)}))}}),[r,t]);var s=a&&o.a.Children.toArray(a)[0],u=o.a.createElement(p.a,{onClick:c,variant:"contained",color:"primary",size:"large",startIcon:o.a.createElement(w.a,null)},"Upload");return o.a.createElement(o.a.Fragment,null,o.a.createElement(l,{accept:".jpg, .jpeg, .png, .gif",multiple:!1}),o.a.isValidElement(s)?o.a.cloneElement(s,{onClick:c}):u)},S=a(228),N=Object(u.a)({root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"50%"},clearIcon:{opacity:".5",fontSize:50},overlay:{backgroundColor:"rgba(0, 0, 0, 0.45)",color:"white",position:"absolute",top:0,left:0,height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",transitionDuration:"0.5s"},invisible:{backgroundColor:"rgba(0, 0, 0, 0)"},icon:{color:"white"}}),I=function(e){var t=e.callback,a=e.progress,n=N(),r=Object(i.useState)(),l=Object(c.a)(r,2),s=l[0],u=l[1],m=function(e,a){u(e),t(a||e)},b=o.a.createElement("div",{className:n.root},o.a.createElement(x,{callback:m}),o.a.createElement(v.a,{variant:"h6"}," or "),o.a.createElement(k.a,{callback:m})),d=o.a.createElement(g.a,{onClick:function(){u(void 0),t(void 0)},className:n.root,disabled:Boolean(a)},o.a.createElement(S.a,{src:s}),o.a.createElement("div",{className:"".concat(n.overlay," ").concat(100===a&&n.invisible)},a?a<100?o.a.createElement(E.a,{variant:"static",value:a,className:n.icon}):o.a.createElement(j.a,{className:n.icon,fontSize:"large"}):o.a.createElement(O.a,{className:n.icon,fontSize:"large"})));return s?d:b},F=a(72),z=a(27),R=a(32),U=a(71),V=a(83),W=a.n(V),P=function(){var e=Object(i.useState)(),t=Object(c.a)(e,2),a=t[0],n=t[1],o=Object(i.useState)(),s=Object(c.a)(o,2),u=s[0],m=s[1],b=Object(i.useState)(0),d=Object(c.a)(b,2),f=d[0],p=d[1],h=Object(i.useMemo)((function(){return Boolean(u||a)}),[u,a]),v=Object(i.useCallback)((function(e){e instanceof File?(m(e),n(void 0)):(n(e),m(void 0))}),[n,m]),g=Object(i.useCallback)((function(e){p(Math.round(100*e.loaded/e.total))}),[p]);return{setValue:v,isReady:h,resolve:Object(i.useCallback)(Object(l.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=3;break}return t={headers:{"Content-Type":"image/png"},onUploadProgress:g},e.abrupt("return",Object(z.a)("/files").then((function(e){return e.data})).then((function(e){return W.a.put(e,u,t)})).then((function(e){var t=e.config.url;return t?t.slice(0,t.indexOf("?")):""})));case 3:return p(100),e.abrupt("return",a||"");case 5:case"end":return e.stop()}}),e)}))),[u,g,a]),progress:f}},A=Object(u.a)((function(e){return{root:{marginBottom:e.spacing(4)},images:{height:e.spacing(50),display:"flex"}}}));t.default=function(){var e=A(),t=Object(s.f)(),a=Object(h.b)().enqueueSnackbar,n=Object(R.b)().user,i=Object(U.a)().mutate,u=P(),v=u.setValue,g=u.progress,E=u.resolve,j=u.isReady,O=P(),k=O.setValue,y=O.progress,C=O.resolve,w=O.isReady,x=function(){var e=Object(l.a)(r.a.mark((function e(){var n,l,o,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j||!w){e.next=10;break}return e.next=3,Promise.all([E(),C()]);case 3:n=e.sent,l=Object(c.a)(n,2),o=l[0],s=l[1],u={left:{url:o},right:{url:s}},Object(z.c)("/polls/",{contents:u}).then((function(){i(),a("Your poll has been successfully created!",{variant:"success"})})),t.push("/feed");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(m.a,{maxWidth:"sm",disableGutters:!0},o.a.createElement(b.a,{className:e.root},n&&o.a.createElement(F.a,{user:n,info:""}),o.a.createElement(d.a,null),o.a.createElement("div",{className:e.images},o.a.createElement(I,{callback:v,progress:g}),o.a.createElement(I,{callback:k,progress:y})),g||y?o.a.createElement(f.a,{color:"primary"}):o.a.createElement(p.a,{color:"primary",disabled:!(j&&w),variant:"contained",onClick:x,fullWidth:!0},"Submit")))}}}]);
//# sourceMappingURL=11.3174e92b.chunk.js.map
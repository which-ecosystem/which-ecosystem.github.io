(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[3],{107:function(e,t,n){e.exports=n.p+"static/media/noContent.527b7724.svg"},108:function(e,t,n){e.exports=n.p+"static/media/construction.07ebb9e5.svg"},109:function(e,t,n){e.exports=n.p+"static/media/server.5f74112c.svg"},110:function(e,t,n){e.exports=n.p+"static/media/error.74f870d4.svg"},121:function(e,t,n){e.exports=n(150)},150:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),o=n.n(c),i=n(112),l=n(201),u=n(202),s=n(29),m=n(59),f=n.n(m),d=(n(126),n(12)),p=n(10),b=n(195),g=n(189),E=n(43),h=n(196),v=n(197),O=n(198),j=n(199),k=n(60),y=n(23),w=n(32),N=n(185),x=n(186),C=n(187),I=n(188),S=n(190),z=n(191),P=n(104),A=n.n(P),B=n(181),F=n(153),T=n(182),L=n(183),M=n(184),W=n(205),D=n(27),R=n(75),U=Object(k.a)((function(e){return{root:{position:"relative",background:"rgba(255, 255, 255, 0.5)",borderRadius:"2px",padding:e.spacing(.5),display:"flex",alignItems:"center"},results:{position:"absolute",width:"100%",top:e.spacing(5)},listItem:{padding:0}}})),q=r.a.memo((function(e){var t=e.callback,n=Object(a.useState)([]),c=Object(d.a)(n,2),o=c[0],i=c[1],l=Object(a.useState)(""),u=Object(d.a)(l,2),s=u[0],m=u[1],f=Object(a.useState)(s),b=Object(d.a)(f,2),g=b[0],E=b[1],h=Object(p.f)(),v=U();Object(a.useEffect)((function(){var e=setTimeout((function(){return E(s)}),300);return function(){return clearTimeout(e)}}),[s]),Object(a.useEffect)((function(){g?Object(D.a)("/users?username[$regex]=".concat(g,"&$limit=").concat(7)).then((function(e){return i(e.data)})).catch((function(){return i([])})):i([])}),[g]);var O=function(){E(""),m("")},j=function(e){return function(){var n=o[e].username;h.push("/profile/".concat(n)),O(),t&&t()}},k=r.a.createElement(B.a,{onClickAway:O},r.a.createElement(F.a,{className:v.results},r.a.createElement(T.a,null,o.map((function(e,t){return r.a.createElement("div",{key:e._id},r.a.createElement(L.a,{button:!0,onClick:j(t),className:v.listItem},r.a.createElement(R.a,{user:e})),t<o.length-1&&r.a.createElement(M.a,null))})))));return r.a.createElement("div",{className:v.root},r.a.createElement(A.a,null),r.a.createElement(W.a,{placeholder:"Search...",value:s,onChange:function(e){m(e.target.value.trim())}}),o.length>0&&k)})),J=Object(k.a)({root:{display:"flex",justifyContent:"space-between"}}),$=r.a.memo((function(e){var t=J(),n=Object(N.a)(),c=Object(a.useState)(!1),o=Object(d.a)(c,2),i=o[0],l=o[1],u=e.menu,s=e.logo,m=function(){l((function(e){return!e}))};return r.a.createElement(x.a,{appear:!1,direction:"down",in:!n},r.a.createElement(C.a,{position:"fixed"},r.a.createElement(I.a,{className:t.root},u,i?r.a.createElement(q,{callback:m}):s,r.a.createElement(g.a,{onClick:m},i?r.a.createElement(S.a,null):r.a.createElement(z.a,null)))))})),_=Object(k.a)({root:{top:"auto",bottom:0},toolbar:{display:"flex",justifyContent:"space-around"}}),G=r.a.memo((function(e){var t=_(),n=e.profile,a=e.feed,c=e.notifications;return r.a.createElement(C.a,{position:"fixed",className:t.root},r.a.createElement(I.a,{variant:"dense",className:t.toolbar},c,a,n))})),H=Object(k.a)({root:{width:"60%",margin:"auto",display:"flex",justifyContent:"space-around"},group:{display:"flex",alignItems:"center"}}),K=r.a.memo((function(e){var t=H(),n=e.logo,a=e.menu,c=e.feed,o=e.notifications,i=e.profile;return r.a.createElement(C.a,{position:"fixed"},r.a.createElement(I.a,null,a,r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.group},n),r.a.createElement(q,null),r.a.createElement("div",{className:t.group},c,o,i))))})),Q=n(34),V=n(204),X=n(193),Y=n(194),Z=Object(k.a)((function(e){return{root:{padding:e.spacing(4,10),textAlign:"center"},avatar:{width:e.spacing(14),height:e.spacing(14)}}})),ee=r.a.memo((function(e){var t=e.user,n=Z();return r.a.createElement("div",{className:n.root},r.a.createElement(Q.a,{user:t,className:n.avatar}),r.a.createElement(E.a,{variant:"h5"},t.username))})),te=Object(k.a)((function(e){return{item:{padding:e.spacing(2,14,2,2)},icon:{marginRight:e.spacing(1)}}})),ne=r.a.memo((function(e){var t=e.isOpen,n=e.setIsOpen,c=te(),o=Object(p.f)(),i=Object(w.b)(),l=i.user,u=i.logout,s=Object(a.useCallback)((function(){n(!0)}),[n]),m=Object(a.useCallback)((function(){n(!1)}),[n]);Object(a.useEffect)((function(){return o.listen((function(){return m()}))}),[o,m]);var f=Object(a.useCallback)((function(){u(),o.push("/login")}),[u,o]),d=Object(a.useCallback)((function(){o.push("/")}),[o]),b=Object(a.useMemo)((function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)}),[]);return r.a.createElement(V.a,{anchor:"left",open:t,onOpen:s,onClose:m,disableBackdropTransition:!b,disableDiscovery:b},l&&r.a.createElement(ee,{user:l}),r.a.createElement(M.a,null),r.a.createElement(T.a,null,l&&r.a.createElement(L.a,{button:!0,className:c.item,onClick:f},r.a.createElement(X.a,{className:c.icon}),r.a.createElement(E.a,null,"Logout")),r.a.createElement(L.a,{button:!0,className:c.item,onClick:d},r.a.createElement(Y.a,{className:c.icon}),r.a.createElement(E.a,null,"About"))))})),ae=Object(k.a)((function(e){return{logo:{fontWeight:"bold",cursor:"pointer",color:"white"},avatar:{width:e.spacing(3),height:e.spacing(3)}}})),re=r.a.memo((function(){var e=ae(),t=Object(w.b)().user,n=Object(y.a)(),c=Object(p.f)(),o=Object(b.a)(n.breakpoints.down("sm")),i=Object(a.useState)(!1),l=Object(d.a)(i,2),u=l[0],s=l[1],m=r.a.createElement(g.a,{onClick:function(){c.push("/feed")}},r.a.createElement(h.a,null)),f=r.a.createElement(g.a,{onClick:function(){c.push("/notifications")}},r.a.createElement(v.a,null)),k=r.a.createElement(g.a,{onClick:function(){s(!0)}},r.a.createElement(O.a,null)),N=r.a.createElement(E.a,{variant:"h5",className:e.logo,onClick:function(){c.push("/")}},"Which"),x=r.a.createElement(g.a,{onClick:function(){t?c.push("/profile/".concat(t.username)):c.push("/login")}},(null===t||void 0===t?void 0:t.avatarUrl)?r.a.createElement(Q.a,{className:e.avatar,user:t}):r.a.createElement(j.a,{className:e.avatar}));return o?r.a.createElement(r.a.Fragment,null,r.a.createElement($,{logo:N,menu:k}),r.a.createElement(G,{feed:m,profile:x,notifications:f}),r.a.createElement(ne,{isOpen:u,setIsOpen:s})):r.a.createElement(r.a.Fragment,null,r.a.createElement(K,{menu:k,logo:N,profile:x,notifications:f,feed:m}),r.a.createElement(ne,{isOpen:u,setIsOpen:s}))})),ce=n(63),oe=n(78),ie=n(111),le=r.a.lazy((function(){return Promise.all([n.e(1),n.e(2),n.e(7)]).then(n.bind(null,397))})),ue=r.a.lazy((function(){return Promise.all([n.e(1),n.e(9)]).then(n.bind(null,382))})),se=r.a.lazy((function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,399))})),me=r.a.lazy((function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,383))})),fe=r.a.lazy((function(){return Promise.all([n.e(0),n.e(8),n.e(11)]).then(n.bind(null,400))})),de=r.a.lazy((function(){return n.e(13).then(n.bind(null,387))})),pe=r.a.lazy((function(){return Promise.all([n.e(0),n.e(2),n.e(6),n.e(10)]).then(n.bind(null,398))})),be=r.a.memo((function(){return r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:fe}),r.a.createElement(p.a,{exact:!0,path:"/login",component:se}),r.a.createElement(p.a,{exact:!0,path:"/registration",component:me}),r.a.createElement(p.a,{exact:!0,path:"/feed",component:ue}),r.a.createElement(p.a,{exact:!0,path:"/notifications",component:de}),r.a.createElement(p.a,{exact:!0,path:"/new",component:pe}),r.a.createElement(p.a,{path:"/profile/:username",component:le}))})),ge=n(52),Ee=n(49),he=["","It looks like our server is sleeping.","We need about ".concat(30," seconds to wake it up."),"Please, stay with us.","We love you <3","Almost done."],ve=Object(k.a)((function(e){return{root:{textAlign:"center"},hidden:{visibility:"hidden",position:"absolute",width:0,height:0,overflow:"hidden"},img:{width:e.spacing(24)}}})),Oe=function(e){var t=e.children,n=ve(),c=Object(a.useState)(!1),o=Object(d.a)(c,2),i=o[0],l=o[1],u=Object(a.useState)(0),s=Object(d.a)(u,2),m=s[0],f=s[1],p=Object(a.useCallback)((function(){return f((function(e){return e+1}))}),[f]);Object(a.useEffect)((function(){var e=setInterval(p,1e3);return Object(D.a)("/ping").then((function(){l(!0),clearInterval(e)})),function(){return clearInterval(e)}}),[l,p]);var b=Object(a.useMemo)((function(){var e=30/he.length,t=Math.floor(m/e),n=he.length-1;return he[t>n?n:t]}),[m]);return r.a.createElement(r.a.Fragment,null,!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,null),b&&r.a.createElement(Ee.a,{variant:"waiting",smart:!0,message:b})),r.a.createElement("div",{className:i?"":n.hidden},t))},je=Object(k.a)((function(e){var t;return{root:(t={},Object(ce.a)(t,e.breakpoints.down("sm"),{padding:e.spacing(10,0,12,0)}),Object(ce.a)(t,e.breakpoints.up("md"),{padding:e.spacing(15,5,8,5)}),t)}})),ke=function(){return r.a.createElement(Ee.a,{variant:"error",message:"Try reloading the page."})},ye=function(){var e=je(),t=Object(y.a)(),n=Object(p.f)(),c=Object(b.a)(t.breakpoints.down("sm"));return Object(a.useEffect)((function(){return n.listen((function(){window.scrollTo(0,0)}))}),[n]),r.a.createElement(oe.a,{preventDuplicate:!0,maxSnack:c?1:3,anchorOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement("div",{className:e.root},r.a.createElement(ie.ErrorBoundary,{FallbackComponent:ke},r.a.createElement(a.Suspense,{fallback:r.a.createElement(ge.a,null)},r.a.createElement(Oe,null,r.a.createElement(be,null))))))},we=Object(i.a)({palette:{primary:{main:f.a[700],light:f.a[100]},secondary:{main:f.a[900]}}}),Ne=function(){return r.a.createElement(s.a,null,r.a.createElement(w.a,null,r.a.createElement(l.a,{theme:we},r.a.createElement(u.a,null),r.a.createElement(re,null),r.a.createElement(ye,null))))};o.a.render(r.a.createElement(Ne,null),document.getElementById("root"))},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return s}));var a=n(80),r=n.n(a),c=n(81),o=n.n(c),i=r.a.create({baseURL:"https://which-api.herokuapp.com"});i.interceptors.request.use((function(e){var t=localStorage.getItem("token");return o.a.set(e,"headers.Authorization",t)})),i.interceptors.response.use((function(e){return e}),(function(e){return"Request failed with status code 401"===e.message&&localStorage.getItem("token")&&(localStorage.removeItem("remember"),window.location.reload()),Promise.reject(e)}));var l=i.get,u=i.post,s=(i.put,i.patch)},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var a=n(12),r=n(62),c=n.n(r),o=n(71),i=n(0),l=n.n(i),u=n(27),s=n(74),m=function(e){var t=Object(i.useState)((function(){return localStorage.getItem(e)||null})),n=Object(a.a)(t,2),r=n[0],c=n[1];return[r,Object(i.useCallback)((function(t){t?localStorage.setItem(e,t):localStorage.removeItem(e),c(t)}),[e])]},f=Object(i.createContext)({user:void 0,login:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){},isAuthenticated:!1}),d=function(e){var t=e.children,n=function(){var e=m("remember"),t=Object(a.a)(e,2),n=t[0],r=t[1],c=m("username"),o=Object(a.a)(c,2),l=o[0],f=o[1],d=m("token"),p=Object(a.a)(d,2),b=p[0],g=p[1],E=Object(s.d)(l).data,h=Object(i.useMemo)((function(){return Boolean(l)}),[l]),v=Object(i.useCallback)((function(){g(null),f(null)}),[g,f]);Object(i.useEffect)((function(){n||v()}),[n,v]);return{user:E,login:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(u.c)("/authentication",{strategy:"local",username:e,password:t}).then((function(t){return g(t.data.accessToken),f(e),r(n?"true":null),!0})).catch((function(){return!1}))},logout:v,token:b,isAuthenticated:h}}(),r=f.Provider;return l.a.createElement(r,{value:n},t)},p=function(){return Object(i.useContext)(f)}},34:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(10),o=n(156);t.a=function(e){var t=e.user,n=e.className,a=Object(c.f)();return r.a.createElement(o.a,{src:null===t||void 0===t?void 0:t.avatarUrl,onClick:function(){t&&a.push("/profile/".concat(t.username))},className:n,style:{cursor:"pointer"}})}},49:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(60),o=n(77),i=n(58),l=n(107),u=n.n(l),s=n(108),m=n.n(s),f=n(109),d=n.n(f),p=n(110),b=n.n(p),g=Object(c.a)((function(e){return{img:{width:e.spacing(24)}}})),E={default:{icon:u.a,tagline:"No content"},construction:{icon:m.a,tagline:"Coming soon"},waiting:{icon:d.a,tagline:"Waiting for server"},error:{icon:b.a,tagline:"Something went wrong"}};t.a=function(e){var t=e.variant,n=void 0===t?"default":t,a=e.smart,c=void 0!==a&&a,l=e.message,u=g(),s=E[n],m=s.icon,f=s.tagline,d=c?o.a:"img";return r.a.createElement(i.a,{tagline:f,message:l},r.a.createElement(d,{src:m,className:u.img,alt:"No content"}))}},52:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(113),o=n(58),i=r.a.memo((function(e){var t=e.tagline,n=e.message;return r.a.createElement(o.a,{tagline:t,message:n},r.a.createElement(c.a,{color:"primary"}))}));t.a=i},58:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(43),o=n(60),i=Object(o.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:e.spacing(6)},content:{margin:e.spacing(2)}}})),l=r.a.memo((function(e){var t=e.tagline,n=e.message,a=e.children,o=i();return r.a.createElement("div",{className:o.root},r.a.createElement("div",{className:o.content},a),r.a.createElement(c.a,{variant:"h5"},t),r.a.createElement(c.a,{color:"textSecondary"},n))}));t.a=l},74:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var a=n(47),r=n(27),c=function(e){return Object(r.a)(e).then((function(e){return e.data}))},o=function(e){return Object(a.a)(e&&"/users?username=".concat(e),(function(e){return Object(r.a)(e).then((function(e){return e.data[0]}))}))},i=function(e){return Object(a.a)(e&&"/profiles/".concat(e),c)},l=function(){return Object(a.a)("/feed",c,{revalidateOnFocus:!1})},u=function(){return Object(a.a)("/feedback",c)}},75:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(60),o=n(103),i=n.n(o),l=n(152),u=n(34),s=Object(c.a)((function(e){return{root:{display:"flex",alignItems:"center"},verified:{marginLeft:e.spacing(.5),width:e.spacing(2),height:e.spacing(2)}}}));t.a=function(e){var t=e.user,n=e.info,a=s(),c=t.username,o=t.verified,m=r.a.createElement(u.a,{user:t}),f=r.a.createElement("div",{className:a.root},c,o&&r.a.createElement(i.a,{color:"primary",className:a.verified}));return r.a.createElement(l.a,{avatar:m,title:f,subheader:n})}},77:function(e,t,n){"use strict";var a=n(12),r=n(0),c=n.n(r),o=n(60),i=n(113),l=n(106),u=n.n(l),s=n(105),m=n.n(s),f=Object(o.a)((function(e){return{image:{imageOrientation:"from-image"},container:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},success:{opacity:"100%",filterBrightness:"100%",filterSaturate:"100%"},loading:{opacity:0,filterBrightness:0,filterSaturate:"20%",position:"absolute"},error:{display:"none"},errorIcon:{color:m.a[300],width:e.spacing(6),height:e.spacing(6)}}})),d=c.a.memo((function(e){var t=e.src,n=e.alt,o=e.className,l=e.animationDuration,s=void 0===l?1e3:l,m=e.disableLoading,d=void 0!==m&&m,p=f(),b=Object(r.useState)("loading"),g=Object(a.a)(b,2),E=g[0],h=g[1],v=Object(r.useCallback)((function(){h("success")}),[h]),O=Object(r.useCallback)((function(){h("error")}),[h]),j=Object(r.useMemo)((function(){return"\n    filterBrightness ".concat(.75*s,"ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    filterSaturate ").concat(s,"ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    opacity ").concat(s/2,"ms cubic-bezier(0.4, 0.0, 0.2, 1)\n  ")}),[s]),k=c.a.createElement("img",{src:t,alt:n,className:"".concat(p.image," ").concat(p[E]," ").concat(o),style:{transition:j},onLoad:v,onError:O});return c.a.createElement(c.a.Fragment,null,t&&k,"success"!==E&&c.a.createElement("div",{className:p.container},"error"!==E&&t?!d&&c.a.createElement(i.a,{color:"primary"}):c.a.createElement(u.a,{className:p.errorIcon})))}));t.a=d}},[[121,4,5]]]);
//# sourceMappingURL=main.ca3930ff.chunk.js.map
{"version":3,"sources":["components/Header/MobileHeader.tsx","components/Header/BottomBar.tsx","components/Header/SearchBar.tsx","components/Header/BrowserHeader.tsx","components/Header/Header.tsx","components/ScrollTopArrow/ScrollTopArrow.tsx","containers/Page/Page.tsx","index.tsx","requests.ts","hooks/useLocalStorage.ts","hooks/useAuth.tsx","components/Avatar/Avatar.tsx","components/UserStrip/UserStrip.tsx","hooks/APIClient.ts","components/Loading/Loading.tsx"],"names":["useStyles","makeStyles","root","display","justifyContent","MobileHeader","React","memo","props","classes","trigger","useScrollTrigger","menu","search","logo","Slide","appear","direction","in","AppBar","position","Toolbar","className","top","bottom","toolbar","BottomBar","profile","feed","notifications","theme","background","borderRadius","padding","spacing","alignItems","results","width","listItem","SearchBar","useState","setResults","query","setQuery","debouncedQuery","setDebouncedQuery","history","useHistory","useEffect","handler","setTimeout","clearTimeout","get","then","response","data","catch","handleClose","handleNavigate","index","username","push","SearchResults","ClickAwayListener","onClickAway","Paper","List","map","result","key","_id","ListItem","button","onClick","UserStrip","user","length","Divider","InputBase","placeholder","value","onChange","event","target","trim","margin","group","BrowserHeader","fontWeight","cursor","color","avatar","height","Header","useAuth","useTheme","isMobile","useMediaQuery","breakpoints","down","IconButton","Home","Notifications","Menu","Search","Typography","variant","Avatar","AccountCircle","left","zIndex","opacity","palette","primary","main","icon","fontSize","ScrollTopArrow","showScroll","setShowScroll","window","addEventListener","pageYOffset","scrollTo","Profile","lazy","Feed","Login","Registration","up","Page","maxSnack","anchorOrigin","vertical","horizontal","fallback","Loading","exact","path","component","createMuiTheme","teal","light","App","ThemeProvider","CssBaseline","ReactDOM","render","document","getElementById","requests","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","_","set","error","message","removeItem","location","reload","Promise","reject","post","patch","put","state","setState","useCallback","setItem","authContext","createContext","undefined","login","a","logout","isAuthenticated","AuthProvider","children","auth","useLocalStorage","remember","setRemember","setUsername","setToken","useUser","useMemo","Boolean","name","password","shouldRemember","strategy","accessToken","useProvideAuth","Provider","useContext","avatarUrl","handleClick","src","alt","toUpperCase","style","verified","marginLeft","info","title","subheader","fetcher","endpoint","arrayOptions","initialData","revalidateOnMount","useSWR","url","useProfile","id","useFeed","revalidateOnFocus","useFeedback","loader","textAlign","marginTop"],"mappings":"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","file":"static/js/main.a6d451df.chunk.js","sourcesContent":["import React from 'react';\nimport {\n  AppBar,\n  Toolbar,\n  useScrollTrigger,\n  Slide\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\ninterface PropTypes {\n  menu: JSX.Element;\n  logo: JSX.Element;\n  search: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n});\n\n\nconst MobileHeader: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const trigger = useScrollTrigger();\n  const { menu, search, logo } = props;\n\n  return (\n    <Slide appear={false} direction=\"down\" in={!trigger}>\n      <AppBar position=\"fixed\">\n        <Toolbar className={classes.root}>\n          {menu}\n          {logo}\n          {search}\n        </Toolbar>\n      </AppBar>\n    </Slide>\n  );\n});\n\nexport default MobileHeader;\n\n","import React from 'react';\nimport { AppBar, Toolbar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\ninterface PropTypes {\n  profile: JSX.Element;\n  feed: JSX.Element;\n  notifications: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    top: 'auto',\n    bottom: 0\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-around'\n  }\n});\n\n\nconst BottomBar: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const { profile, feed, notifications } = props;\n\n  return (\n    <AppBar position=\"fixed\" className={classes.root}>\n      <Toolbar className={classes.toolbar}>\n        {notifications}\n        {feed}\n        {profile}\n      </Toolbar>\n    </AppBar>\n  );\n});\n\nexport default BottomBar;\n\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {\n  InputBase,\n  List,\n  ListItem,\n  Paper,\n  Divider,\n  ClickAwayListener\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { User } from 'which-types';\n\nimport { get } from '../../requests';\nimport UserStrip from '../UserStrip/UserStrip';\n\nconst INTERVAL = 300;\nconst LIMIT = 7;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'relative',\n    background: 'rgba(255, 255, 255, 0.5)',\n    borderRadius: '2px',\n    padding: theme.spacing(0.5),\n    display: 'flex',\n    alignItems: 'center'\n  },\n  results: {\n    position: 'absolute',\n    width: '100%',\n    top: theme.spacing(5)\n  },\n  listItem: {\n    padding: 0\n  }\n}));\n\nconst SearchBar: React.FC = React.memo(() => {\n  const [results, setResults] = useState<User[]>([]);\n  const [query, setQuery] = useState<string>('');\n  const [debouncedQuery, setDebouncedQuery] = useState<string>(query);\n  const history = useHistory();\n  const classes = useStyles();\n\n  useEffect(() => {\n    const handler = setTimeout(() => setDebouncedQuery(query), INTERVAL);\n    return () => clearTimeout(handler);\n  }, [query]);\n\n  useEffect(() => {\n    const fetchPolls = () => {\n      get(`/users?username[$regex]=${debouncedQuery}&$limit=${LIMIT}`)\n        .then(response => setResults(response.data))\n        .catch(() => setResults([]));\n    };\n    if (debouncedQuery) fetchPolls();\n    else setResults([]);\n  }, [debouncedQuery]);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n    setQuery(event.target.value.trim());\n  };\n\n  const handleClose = () => {\n    setDebouncedQuery('');\n    setQuery('');\n  };\n\n  const handleNavigate = (index: number) => () => {\n    const { username } = results[index];\n    history.push(`/profile/${username}`);\n    handleClose();\n  };\n\n  const SearchResults = (\n    <ClickAwayListener onClickAway={handleClose}>\n      <Paper className={classes.results}>\n        <List>\n          {\n          results.map((result, index) => (\n            <div key={result._id}>\n              <ListItem button onClick={handleNavigate(index)} className={classes.listItem}>\n                <UserStrip user={result} />\n              </ListItem>\n              {(index < results.length - 1) && <Divider />}\n            </div>\n          ))\n        }\n        </List>\n      </Paper>\n    </ClickAwayListener>\n  );\n\n  return (\n    <div className={classes.root}>\n      <SearchIcon />\n      <InputBase\n        placeholder=\"Search...\"\n        value={query}\n        onChange={handleChange}\n      />\n      {results.length > 0 && SearchResults}\n    </div>\n  );\n});\n\n\nexport default SearchBar;\n\n","import React from 'react';\nimport { AppBar, Toolbar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SearchBar from './SearchBar';\n\ninterface PropTypes {\n  logo: JSX.Element;\n  feed: JSX.Element;\n  notifications: JSX.Element;\n  profile: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    width: '60%',\n    margin: 'auto',\n    display: 'flex',\n    justifyContent: 'space-around'\n  },\n  group: {\n    display: 'flex'\n  }\n});\n\n\nconst BrowserHeader: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const {\n    logo,\n    feed,\n    notifications,\n    profile\n  } = props;\n\n  return (\n    <AppBar position=\"fixed\">\n      <Toolbar className={classes.root}>\n        {logo}\n        <SearchBar />\n        <div className={classes.group}>\n          {feed}\n          {notifications}\n          {profile}\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n});\n\nexport default BrowserHeader;\n\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  IconButton,\n  Typography,\n  useMediaQuery\n} from '@material-ui/core';\nimport {\n  AccountCircle,\n  Notifications,\n  Home,\n  Menu,\n  Search\n} from '@material-ui/icons';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nimport { useAuth } from '../../hooks/useAuth';\nimport MobileHeader from './MobileHeader';\nimport BottomBar from './BottomBar';\nimport BrowserHeader from './BrowserHeader';\nimport Avatar from '../Avatar/Avatar';\n\n\nconst useStyles = makeStyles(theme => ({\n  logo: {\n    fontWeight: 'bold',\n    cursor: 'pointer',\n    color: 'white'\n  },\n  avatar: {\n    width: theme.spacing(3),\n    height: theme.spacing(3)\n  }\n}));\n\nconst Header: React.FC = React.memo(() => {\n  const classes = useStyles();\n  const { user } = useAuth();\n  const theme = useTheme();\n  const history = useHistory();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  const handleHome = (): void => {\n    history.push('/');\n  };\n\n  const handleFeed = (): void => {\n    history.push('/feed');\n  };\n\n  const handleProfile = (): void => {\n    if (user) history.push(`/profile/${user.username}`);\n    else history.push('/login');\n  };\n\n  const handleNotifications = (): void => {\n    history.push('/notifications');\n  };\n\n  const feed = (\n    <IconButton onClick={handleFeed}>\n      <Home />\n    </IconButton>\n  );\n\n  const notifications = (\n    <IconButton onClick={handleNotifications}>\n      <Notifications />\n    </IconButton>\n  );\n\n  const menu = (\n    <IconButton>\n      <Menu />\n    </IconButton>\n  );\n\n  const search = (\n    <IconButton>\n      <Search />\n    </IconButton>\n  );\n\n  const logo = (\n    <Typography variant=\"h5\" className={classes.logo} onClick={handleHome}>\n      Which\n    </Typography>\n  );\n\n  const profile = (\n    <IconButton onClick={handleProfile}>\n      {\n        user\n          ? <Avatar className={classes.avatar} user={user} />\n          : <AccountCircle className={classes.avatar} />\n      }\n    </IconButton>\n  );\n\n  return isMobile ? (\n    <>\n      <MobileHeader logo={logo} menu={menu} search={search} />\n      <BottomBar feed={feed} profile={profile} notifications={notifications} />\n    </>\n  ) : (\n    <BrowserHeader logo={logo} profile={profile} notifications={notifications} feed={feed} />\n  );\n});\n\nexport default Header;\n\n","import React, { useState } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useMediaQuery } from '@material-ui/core';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'fixed',\n    bottom: theme.spacing(10),\n    left: theme.spacing(10),\n    zIndex: 1000,\n    cursor: 'pointer',\n    opacity: 0.4,\n    '&:hover': {\n      opacity: 1\n    },\n    background: theme.palette.primary.main,\n    borderRadius: '50%'\n  },\n  icon: {\n    fontSize: 80,\n    color: 'white'\n  }\n}));\n\nconst ScrollTopArrow: React.FC = React.memo(() => {\n  const [showScroll, setShowScroll] = useState(false);\n  const theme = useTheme();\n  const classes = useStyles();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  const checkScrollTop = () => {\n    if (!showScroll && window.pageYOffset > 400) {\n      setShowScroll(true);\n    } else if (showScroll && window.pageYOffset <= 400) {\n      setShowScroll(false);\n    }\n  };\n\n  const scrollTop = () => {\n    window.scrollTo({ top: 0 });\n  };\n\n  window.addEventListener('scroll', checkScrollTop);\n\n  return (\n    <div className={classes.root}>\n      {\n        showScroll\n        && !isMobile\n        && <ArrowUpwardIcon className={classes.icon} color=\"primary\" onClick={scrollTop} />\n      }\n    </div>\n  );\n});\n\nexport default ScrollTopArrow;\n","import React, { Suspense } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useMediaQuery } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport { Switch, Route } from 'react-router-dom';\nimport Loading from '../../components/Loading/Loading';\n\nconst Profile = React.lazy(() => import('../Profile/Profile'));\nconst Feed = React.lazy(() => import('../Feed/Feed'));\nconst Login = React.lazy(() => import('../Login/Login'));\nconst Registration = React.lazy(() => import('../Registration/Registration'));\nconst Home = React.lazy(() => import('../Home/Home'));\nconst Notifications = React.lazy(() => import('../Notifications/Notifications'));\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    [theme.breakpoints.down('sm')]: {\n      margin: theme.spacing(15, 0, 12, 0)\n    },\n    [theme.breakpoints.up('md')]: {\n      margin: theme.spacing(15, 5, 8, 5)\n    }\n  }\n}));\n\n\nconst Page: React.FC = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  return (\n    <SnackbarProvider\n      maxSnack={isMobile ? 1 : 3}\n      anchorOrigin={{\n        vertical: isMobile ? 'top' : 'bottom',\n        horizontal: 'right'\n      }}\n    >\n      <div className={classes.root}>\n        <Suspense fallback={<Loading />}>\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route exact path=\"/login\" component={Login} />\n            <Route exact path=\"/registration\" component={Registration} />\n            <Route exact path=\"/feed\" component={Feed} />\n            <Route exact path=\"/notifications\" component={Notifications} />\n            <Route path=\"/profile/:username\" component={Profile} />\n          </Switch>\n        </Suspense>\n      </div>\n    </SnackbarProvider>\n  );\n};\n\n\nexport default Page;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter } from 'react-router-dom';\nimport teal from '@material-ui/core/colors/teal';\nimport 'typeface-roboto';\n\nimport Header from './components/Header/Header';\nimport ScrollTopArrow from './components/ScrollTopArrow/ScrollTopArrow';\nimport Page from './containers/Page/Page';\nimport { AuthProvider } from './hooks/useAuth';\n\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: teal[700],\n      light: teal[100]\n    }\n  }\n});\n\n\nconst App: React.FC = () => {\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          <Header />\n          <Page />\n          <ScrollTopArrow />\n        </ThemeProvider>\n      </AuthProvider>\n    </BrowserRouter>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n","import axios from 'axios';\nimport _ from 'lodash';\n\nconst baseURL = process.env.NODE_ENV === 'production'\n  ? 'https://which-api.herokuapp.com'\n  : 'http://localhost:3030';\n\nconst requests = axios.create({ baseURL });\n\nrequests.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  return _.set(config, 'headers.Authorization', token);\n});\n\nrequests.interceptors.response.use(response => response, error => {\n  if (error.message === 'Request failed with status code 401' && localStorage.getItem('token')) {\n    localStorage.removeItem('remember');\n    window.location.reload();\n  }\n  return Promise.reject(error);\n});\n\nexport const {\n  get, post, put, patch\n} = requests;\nexport default requests;\n\n","import { useState, useCallback } from 'react';\n\ntype Value = string | null;\ntype Setter = (value: Value) => void;\n\nexport default (key: string): [Value, Setter] => {\n  const [state, setState] = useState<Value>(() => localStorage.getItem(key) || null);\n\n  const update: Setter = useCallback(value => {\n    if (value) localStorage.setItem(key, value);\n    else localStorage.removeItem(key);\n    setState(value);\n  }, [key]);\n\n  return [state, update];\n};\n","import React, {\n  useEffect, useCallback, useMemo, useContext, createContext\n} from 'react';\nimport { User } from 'which-types';\nimport { post } from '../requests';\nimport { useUser } from './APIClient';\nimport useLocalStorage from './useLocalStorage';\n\n\ninterface ContextType {\n  user: User | undefined,\n  login: (username: string, password: string, remember?: boolean) => Promise<boolean>;\n  logout: () => void;\n  isAuthenticated: boolean;\n}\n\nconst authContext = createContext<ContextType>({\n  user: undefined,\n  login: async () => false,\n  logout: () => {},\n  isAuthenticated: false\n});\n\nconst useProvideAuth = () => {\n  const [remember, setRemember] = useLocalStorage('remember');\n  const [username, setUsername] = useLocalStorage('username');\n  const [token, setToken] = useLocalStorage('token');\n  const { data: user } = useUser(username);\n\n  const isAuthenticated = useMemo(() => Boolean(username), [username]);\n\n  const logout = useCallback(() => {\n    setToken(null);\n    setUsername(null);\n  }, [setToken, setUsername]);\n\n  useEffect(() => {\n    // If should not remember, logout\n    if (!remember) logout();\n  }, [remember, logout]);\n\n\n  const login: ContextType['login'] = (name, password, shouldRemember = true) => {\n    return post('/authentication', {\n      strategy: 'local',\n      username: name,\n      password\n    }).then(response => {\n      setToken(response.data.accessToken);\n      setUsername(name);\n      setRemember(shouldRemember ? 'true' : null);\n      return true;\n    }).catch(() => false);\n  };\n\n  return {\n    user, login, logout, token, isAuthenticated\n  };\n};\n\nexport const AuthProvider: React.FC = ({ children }) => {\n  const auth = useProvideAuth();\n  const { Provider } = authContext;\n  return <Provider value={auth}>{children}</Provider>;\n};\n\nexport const useAuth = (): ContextType => {\n  return useContext(authContext);\n};\n\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Avatar as AvatarBase } from '@material-ui/core';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport { User } from 'which-types';\n\ninterface PropTypes {\n  user: User;\n  className?: string;\n}\n\nconst Avatar: React.FC<PropTypes> = ({ user, className }) => {\n  const history = useHistory();\n  const { username, avatarUrl } = user;\n\n  const handleClick = () => {\n    history.push(`/profile/${username}`);\n  };\n\n  return avatarUrl ? (\n    <AvatarBase\n      src={avatarUrl}\n      alt={username[0].toUpperCase()}\n      onClick={handleClick}\n      className={className}\n      style={{ cursor: 'pointer' }}\n    />\n  ) : (\n    <AccountCircle\n      className={className}\n      onClick={handleClick}\n    />\n  );\n};\n\nexport default Avatar;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport VerifiedIcon from '@material-ui/icons/CheckCircleOutline';\nimport { CardHeader } from '@material-ui/core/';\nimport { User } from 'which-types';\n\nimport Avatar from '../Avatar/Avatar';\n\n\ninterface PropTypes {\n  user: User;\n  info?: string | JSX.Element\n}\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  verified: {\n    marginLeft: theme.spacing(0.5),\n    width: theme.spacing(2),\n    height: theme.spacing(2)\n  }\n}));\n\n\nconst UserStrip: React.FC<PropTypes> = ({ user, info }) => {\n  const classes = useStyles();\n  const { username, verified } = user;\n\n  const avatar = <Avatar user={user} />;\n\n  const title = (\n    <div className={classes.root}>\n      {username}\n      {verified && <VerifiedIcon color=\"primary\" className={classes.verified} />}\n    </div>\n  );\n\n  return <CardHeader avatar={avatar} title={title} subheader={info} />;\n};\n\nexport default UserStrip;\n","import useSWR, { responseInterface } from 'swr';\nimport { User, Poll, Feedback } from 'which-types';\nimport { get } from '../requests';\n\n\ninterface Response<T> extends responseInterface<T, Error> {\n  data: T;\n}\n\nconst fetcher = (endpoint: string) => get(endpoint).then(response => response.data);\n\nconst arrayOptions = {\n  initialData: [],\n  revalidateOnMount: true\n};\n\nexport const useUser = (username: string | null): Response<User> => {\n  return useSWR(\n    username && `/users?username=${username}`,\n    (url: string) => get(url).then(response => response.data[0])\n  ) as Response<User>;\n};\n\nexport const useProfile = (id: string): Response<Poll[]> => {\n  return useSWR(id && `/profiles/${id}`, fetcher, arrayOptions) as Response<Poll[]>;\n};\n\nexport const useFeed = (): Response<Poll[]> => {\n  return useSWR('/feed', fetcher, { ...arrayOptions, revalidateOnFocus: false }) as Response<Poll[]>;\n};\n\nexport const useFeedback = (): Response<Feedback[]> => {\n  return useSWR('/feedback', fetcher, arrayOptions) as Response<Feedback[]>;\n};\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  loader: {\n    width: '100%',\n    textAlign: 'center',\n    marginTop: theme.spacing(10)\n  }\n}));\n\nconst Loading: React.FC = React.memo(() => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.loader}>\n      <CircularProgress color=\"primary\" style={{ margin: '0 auto' }} />\n    </div>\n  );\n});\n\nexport default Loading;\n\n"],"sourceRoot":""}
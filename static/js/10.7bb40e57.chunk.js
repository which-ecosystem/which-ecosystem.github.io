(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[10],{233:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(60),l=t(77),o=Object(c.a)({root:{position:"absolute",width:"100%",height:"100%"},image:{objectFit:"cover",pointerEvents:"none",width:"100%",height:"100%"}});a.a=function(e){var a=e.src,t=e.alt,n=o();return r.a.createElement("picture",{className:n.root},r.a.createElement(l.a,{src:a,alt:t,className:n.image}))}},262:function(e,a,t){"use strict";var n=t(12),r=t(0),c=t.n(r),l=t(394),o=t(240),i=t.n(o),s=t(300),u=t(301),m=t(302),d=t(303),p=t(407),f=t(304),b=function(e){var a=e.setIsOpen,t=e.isOpen,o=e.callback,i=Object(r.useState)(""),b=Object(n.a)(i,2),v=b[0],g=b[1],h=function(){a(!1)};return c.a.createElement("div",null,c.a.createElement(s.a,{open:t,onClose:h},c.a.createElement(u.a,null,"Upload via link"),c.a.createElement(m.a,null,c.a.createElement(d.a,null,"Provide a valid URL to your image:"),c.a.createElement(p.a,{autoFocus:!0,margin:"dense",id:"name",label:"Image URL",type:"text",fullWidth:!0,autoComplete:"off",onChange:function(e){g(e.target.value)}})),c.a.createElement(f.a,null,c.a.createElement(l.a,{onClick:h,color:"primary"},"Cancel"),c.a.createElement(l.a,{onClick:function(){var e=v;if(v.startsWith("https://www.instagram.com/")){var a=v.match("/p/(.*)/"),t=a&&a[1];e="https://www.instagram.com/p/".concat(t,"/media/?size=l")}else if(v.startsWith("https://drive.google.com/")){var n=v.match("/d/(.*)/"),r=n&&n[1];e="https://drive.google.com/uc?export=view&id=".concat(r)}o(e||""),h()},color:"primary",disabled:!v.length},"Submit"))))};a.a=function(e){var a=e.callback,t=e.children,o=Object(r.useState)(!1),s=Object(n.a)(o,2),u=s[0],m=s[1],d=function(){m(!0)},p=c.a.createElement(l.a,{onClick:d,variant:"outlined",color:"primary",startIcon:c.a.createElement(i.a,null)},"Attach a link"),f=t&&c.a.Children.toArray(t)[0];return c.a.createElement(c.a.Fragment,null,c.a.createElement(b,{callback:a,isOpen:u,setIsOpen:m}),c.a.isValidElement(f)?c.a.cloneElement(f,{onClick:d}):p)}},409:function(e,a,t){"use strict";t.r(a);var n=t(62),r=t.n(n),c=t(12),l=t(71),o=t(0),i=t.n(o),s=t(372),u=t.n(s),m=t(10),d=t(60),p=t(370),f=t(289),b=t(184),v=t(406),g=t(394),h=t(78),E=t(43),O=t(369),j=t(113),k=t(404),y=t(405),C=t(262),w=t(375),x=t(381),S=t.n(x),N=function(e){var a=e.callback,t=e.children,n=Object(w.useFilePicker)(),r=n.files,c=n.onClick,l=n.HiddenFileInput;Object(o.useEffect)((function(){if(null===r||void 0===r?void 0:r.length){var e=r[0];w.utils.loadFile(e).then((function(t){return a(t,e)}))}}),[r,a]);var s=t&&i.a.Children.toArray(t)[0],u=i.a.createElement(g.a,{onClick:c,variant:"contained",color:"primary",size:"large",startIcon:i.a.createElement(S.a,null)},"Upload");return i.a.createElement(i.a.Fragment,null,i.a.createElement(l,{accept:".jpg, .jpeg, .png, .gif",multiple:!1}),i.a.isValidElement(s)?i.a.cloneElement(s,{onClick:c}):u)},F=t(233),I=Object(d.a)({root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"50%"},clearIcon:{opacity:".5",fontSize:50},overlay:{backgroundColor:"rgba(0, 0, 0, 0.45)",color:"white",position:"absolute",top:0,left:0,height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",transitionDuration:"0.5s"},invisible:{backgroundColor:"rgba(0, 0, 0, 0)"},icon:{color:"white"}}),U=function(e){var a=e.callback,t=e.progress,n=I(),r=Object(o.useState)(),l=Object(c.a)(r,2),s=l[0],u=l[1],m=function(e,t){u(e),a(t||e)},d=i.a.createElement("div",{className:n.root},i.a.createElement(N,{callback:m}),i.a.createElement(E.a,{variant:"h6"}," or "),i.a.createElement(C.a,{callback:m})),p=i.a.createElement(O.a,{onClick:function(){u(void 0),a(void 0)},className:n.root,disabled:Boolean(t)},i.a.createElement(F.a,{src:s}),i.a.createElement("div",{className:"".concat(n.overlay," ").concat(100===t&&n.invisible)},t?t<100?i.a.createElement(j.a,{variant:"static",value:t,className:n.icon}):i.a.createElement(k.a,{className:n.icon,fontSize:"large"}):i.a.createElement(y.a,{className:n.icon,fontSize:"large"})));return s?p:d},z=t(75),R=t(27),V=t(32),W=t(74),P=t(85),A=t.n(P),B=function(){var e=Object(o.useState)(),a=Object(c.a)(e,2),t=a[0],n=a[1],i=Object(o.useState)(),s=Object(c.a)(i,2),u=s[0],m=s[1],d=Object(o.useState)(0),p=Object(c.a)(d,2),f=p[0],b=p[1],v=Object(o.useMemo)((function(){return Boolean(u||t)}),[u,t]),g=Object(o.useCallback)((function(e){e instanceof File?(m(e),n(void 0)):(n(e),m(void 0))}),[n,m]),h=Object(o.useCallback)((function(e){b(Math.round(95*e.loaded/e.total))}),[b]);return{setValue:g,isReady:v,resolve:Object(o.useCallback)(Object(l.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=4;break}return a={headers:{"Content-Type":"image/png"},onUploadProgress:h},b(.01),e.abrupt("return",Object(R.a)("/files").then((function(e){return console.log({resData:e.data}),e.data})).then((function(e){return console.log({uploadUrl:e}),A.a.put(e,u,a)})).then((function(e){b(100);var a=e.config.url;return console.log({uri:null===a||void 0===a?void 0:a.slice(0,a.indexOf("?"))}),a?a.slice(0,a.indexOf("?")):""})));case 4:return b(100),console.log({url:t}),e.abrupt("return",t||"");case 7:case"end":return e.stop()}}),e)}))),[u,h,t]),progress:f}},D=Object(d.a)((function(e){return{root:{marginBottom:e.spacing(4)},images:{height:e.spacing(50),display:"flex"}}}));a.default=function(){var e=D(),a=Object(m.f)(),t=Object(h.b)().enqueueSnackbar,n=Object(V.b)().user,o=Object(W.a)().mutate,s=B(),d=s.setValue,E=s.progress,O=s.resolve,j=s.isReady,k=B(),y=k.setValue,C=k.progress,w=k.resolve,x=k.isReady,S=function(){var e=Object(l.a)(r.a.mark((function e(){var n,l,i,s,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.all([O(),w()]);case 3:n=e.sent,l=Object(c.a)(n,2),i=l[0],s=l[1],console.log("leftUrl",i),console.log("rightUrl",s),m={left:{url:i},right:{url:s}},a.push("/feed"),Object(R.c)("/polls/",{contents:m}).then((function(){o(),t("Your poll has been successfully created!",{variant:"success"})})),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),t("Failed to create a poll. Please, try again.",{variant:"error"}),a.push("/feed");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return i.a.createElement(p.a,{maxWidth:"sm",disableGutters:!0},i.a.createElement(f.a,{className:e.root},n&&i.a.createElement(z.a,{user:n,info:""}),i.a.createElement(b.a,null),i.a.createElement("div",{className:e.images},i.a.createElement(U,{callback:d,progress:E}),i.a.createElement(U,{callback:y,progress:C})),E||C?i.a.createElement(v.a,{color:"primary"}):i.a.createElement(g.a,{color:"primary",disabled:!(j&&x),variant:"contained",onClick:S,fullWidth:!0},"Submit")))}}}]);
//# sourceMappingURL=10.7bb40e57.chunk.js.map
{"version":3,"sources":["utils/uploadFileToS3.ts","components/FileUpload/FileUpload.tsx","components/ModalScreen/ModalScreen.tsx","assets/noContent.svg","assets/construction.svg","assets/server.svg","assets/error.svg","components/Header/SearchBar.tsx","components/Header/MobileHeader.tsx","components/Header/BottomBar.tsx","components/Header/BrowserHeader.tsx","components/Drawer/UserInfo.tsx","components/Drawer/Drawer.tsx","components/Header/Header.tsx","containers/PollCreation/useS3Preupload.ts","components/AttachLink/Modal.tsx","components/AttachLink/AttachLink.tsx","containers/PollCreation/ImageInput.tsx","utils/getLocalFileUrl.ts","containers/PollCreation/PollCreation.tsx","containers/Page/Router.tsx","containers/Page/DynoWaiter.tsx","containers/Page/Page.tsx","index.tsx","requests.ts","hooks/useLocalStorage.ts","hooks/useAuth.tsx","components/Message/Message.tsx","hooks/APIClient.ts","components/UserStrip/UserStrip.tsx","components/EmptyState/EmptyState.tsx","components/Loading/Loading.tsx","components/Avatar/Avatar.tsx","components/Image/Image.tsx","components/Image/BackgroundImage.tsx"],"names":["compressFile","file","quality","Promise","resolve","reject","Compressor","success","result","error","err","setProgress","config","headers","onUploadProgress","progressEvent","loaded","total","progress","Math","round","Bluebird","all","get","name","then","response","compressedFile","uploadUrl","data","axios","put","uri","url","slice","indexOf","FileUpload","callback","children","inputRef","useRef","handleClick","current","click","child","React","Children","only","defaultButton","onClick","variant","color","size","startIcon","type","ref","multiple","accept","style","display","onChange","event","files","target","length","isValidElement","cloneElement","useStyles","makeStyles","theme","root","backgroundColor","palette","background","default","content","breakpoints","up","padding","spacing","toolbar","justifyContent","Transition","forwardRef","props","direction","ModalScreen","title","actionIcon","handleAction","isActionDisabled","handleCloseModal","useState","isOpen","setIsOpen","classes","useTheme","isMobile","useMediaQuery","down","handleClose","useCallback","onExited","handleClickAction","a","open","onClose","TransitionComponent","PaperProps","className","fullScreen","maxWidth","fullWidth","position","disabled","module","exports","borderRadius","alignItems","results","width","top","listItem","SearchBar","memo","setResults","query","setQuery","debouncedQuery","setDebouncedQuery","history","useHistory","useEffect","handler","setTimeout","clearTimeout","catch","handleNavigate","index","username","push","SearchResults","ClickAwayListener","onClickAway","Paper","List","map","key","_id","ListItem","button","UserStrip","user","Divider","InputBase","placeholder","value","trim","MobileHeader","trigger","useScrollTrigger","isSearchOpen","setIsSearchOpen","menu","logo","handleToggle","Slide","appear","in","AppBar","Toolbar","IconButton","Clear","Search","bottom","BottomBar","profile","feed","notifications","margin","group","BrowserHeader","textAlign","avatar","height","UserInfo","Avatar","Typography","item","icon","marginRight","Drawer","useAuth","logout","handleOpen","listen","handleLogout","handleAbout","iOS","useMemo","test","navigator","userAgent","SwipeableDrawer","anchor","onOpen","disableBackdropTransition","disableDiscovery","Info","fontWeight","cursor","activeIcon","Header","isDrawerOpen","setIsDrawerOpen","useLocation","pathname","path","setPath","location","Home","Notifications","Menu","AccountCircle","includes","join","setFile","File","uploadFileToS3","Modal","setUrl","Dialog","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","id","label","autoComplete","DialogActions","Button","startsWith","match","fileId","AttachLink","mediaRoot","uploadRoot","flex","outline","border","flexDirection","clearIcon","opacity","fontSize","overlay","left","transitionDuration","invisible","ImageInput","childrenCallback","reader","FileReader","addEventListener","Error","readAsDataURL","localUrl","Upload","Media","CardActionArea","undefined","Boolean","BackgroundImage","src","CircularProgress","Check","CancelOutlined","images","textarea","description","PollCreation","setDescription","enqueueSnackbar","useSnackbar","updateFeed","useFeed","mutate","updateProfile","useProfile","useS3Preupload","setLeft","resolveLeft","leftProgress","right","setRight","resolveRight","rightProgress","handleSubmit","leftUrl","rightUrl","contents","post","goBack","isSubmitting","Container","disableGutters","Card","elevation","component","multiline","e","readOnly","LinearProgress","Message","tagline","message","noMargin","Profile","lazy","Feed","Login","Registration","Router","state","ModalSwitch","exact","messages","hidden","visibility","overflow","img","DynoWaiter","isReady","setIsReady","time","setTime","tick","interval","setInterval","clearInterval","floor","lastIndex","Loading","EmptyState","smart","ErrorFallback","Page","update","window","scrollTo","preventDuplicate","maxSnack","anchorOrigin","vertical","horizontal","FallbackComponent","fallback","createMuiTheme","primary","main","teal","light","secondary","App","ThemeProvider","CssBaseline","ReactDOM","render","document","getElementById","requests","create","baseURL","interceptors","request","use","token","localStorage","getItem","_","set","removeItem","reload","patch","setState","setItem","authContext","createContext","login","isAuthenticated","AuthProvider","auth","useLocalStorage","remember","setRemember","setUsername","setToken","useUser","password","shouldRemember","strategy","accessToken","useProvideAuth","Provider","useContext","marginTop","fetcher","endpoint","useSWR","revalidateOnFocus","useFeedback","usePatchNotes","html_url","version","tag_name","body","verified","marginLeft","info","subheader","CONTEXT","noContentIcon","construction","constructionIcon","waiting","serverIcon","errorIcon","Component","Image","alt","avatarUrl","image","imageOrientation","container","filterBrightness","filterSaturate","loading","grey","animationDuration","disableLoading","status","setStatus","handleLoad","handleError","transition","onLoad","onError","objectFit","pointerEvents","minHeight"],"mappings":"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","file":"static/js/main.9e27e322.chunk.js","sourcesContent":["import Compressor from 'compressorjs';\nimport axios from 'axios';\nimport Bluebird from 'bluebird';\nimport { get } from '../requests';\n\ninterface ProgressEvent {\n  loaded: number;\n  total: number;\n}\n\ntype SetProgress = (progress: number) => void;\n\n\nconst compressFile = (file: File, quality = 0.6): Promise<File | Blob> => {\n  return new Promise((resolve, reject) => {\n    if (quality === 1) return resolve(file);\n    return new Compressor(file, {\n      success: result => resolve(result),\n      error: err => reject(err),\n      quality\n    });\n  });\n};\n\nexport default (file: File, quality?: number, setProgress?: SetProgress): Promise<string> => {\n  const onUploadProgress = (progressEvent: ProgressEvent): void => {\n    if (setProgress) {\n      const { loaded, total } = progressEvent;\n      // Only allow upload progress reach 95%, and set 100% when request is resolved\n      const progress = Math.round((loaded * 95) / total);\n      setProgress(progress);\n    }\n  };\n\n  const config = {\n    headers: { 'Content-Type': 'image/png' },\n    onUploadProgress\n  };\n\n  // Add querystring to avoid caching request in some browsers, see\n  // https://stackoverflow.com/questions/59339561/safari-skipping-xmlhttprequests\n  return Bluebird.all([get(`/files?key=${file.name}`), compressFile(file, quality)])\n    .then(([response, compressedFile]) => {\n      const uploadUrl = response.data;\n      return axios.put(uploadUrl, compressedFile, config);\n    })\n    .then(response => {\n      if (setProgress) setProgress(100);\n      const uri = response.config.url;\n      return uri ? uri.slice(0, uri.indexOf('?')) : '';\n    });\n};\n\n","import React, { useRef } from 'react';\nimport Button from '@material-ui/core/Button';\nimport CloudUpload from '@material-ui/icons/CloudUpload';\n\ninterface PropTypes {\n  callback: (file: File) => void;\n}\n\n\nconst FileUpload: React.FC<PropTypes> = ({ callback, children }) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target?.files;\n    if (files?.length) callback(files[0]);\n  };\n\n  const handleClick = () => {\n    if (inputRef?.current) inputRef.current.click();\n  };\n\n  const child = children && React.Children.only(children);\n\n  const defaultButton = (\n    <Button\n      onClick={handleClick}\n      variant=\"contained\"\n      color=\"primary\"\n      size=\"large\"\n      startIcon={<CloudUpload />}\n    >\n      Upload\n    </Button>\n  );\n\n  return (\n    <>\n      <input\n        type=\"file\"\n        ref={inputRef}\n        multiple={false}\n        accept=\".jpg, .jpeg, .png, .gif\"\n        style={{ display: 'none' }}\n        onChange={handleChange}\n      />\n      {\n        React.isValidElement(child)\n          ? React.cloneElement(child, { onClick: handleClick })\n          : defaultButton\n      }\n    </>\n  );\n};\n\nexport default FileUpload;\n","import React, { useState, useCallback } from 'react';\nimport {\n  AppBar,\n  Dialog,\n  Toolbar,\n  Typography,\n  IconButton,\n  Divider,\n  Slide,\n  useMediaQuery,\n  useTheme\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport CloseIcon from '@material-ui/icons/Close';\n\ninterface PropTypes {\n  title: string;\n  actionIcon?: JSX.Element;\n  handleAction?: () => void;\n  isActionDisabled?: boolean;\n  handleCloseModal?: ()=> void;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.default\n  },\n  content: {\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(4)\n    }\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n}));\n\nconst Transition = React.forwardRef((\n  props: TransitionProps & { children?: React.ReactElement },\n  ref: React.Ref<unknown>\n) => <Slide direction=\"left\" ref={ref} {...props} />);\n\nconst ModalScreen: React.FC<PropTypes> = (\n  { title, actionIcon, handleAction, isActionDisabled, handleCloseModal, children }\n) => {\n  const [isOpen, setIsOpen] = useState<boolean>(true);\n  const classes = useStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  const handleClose = useCallback(() => setIsOpen(false), [setIsOpen]);\n  const onExited = useCallback(() => handleCloseModal && handleCloseModal(), [handleCloseModal]);\n\n  const handleClickAction = useCallback(async () => {\n    if (handleAction) await handleAction();\n    return handleClose();\n  }, [handleAction, handleClose]);\n\n  return (\n    <Dialog\n      open={isOpen}\n      onClose={handleClose}\n      onExited={onExited}\n      TransitionComponent={Transition}\n      PaperProps={{ className: classes.root }}\n      fullScreen={isMobile}\n      maxWidth=\"md\"\n      fullWidth\n    >\n      <AppBar position=\"static\">\n        <Toolbar className={classes.toolbar}>\n          <IconButton onClick={handleClose}>\n            <CloseIcon />\n          </IconButton>\n          <Typography variant=\"h6\">\n            { title }\n          </Typography>\n          <IconButton onClick={handleClickAction} disabled={isActionDisabled}>\n            { actionIcon }\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n      <Divider />\n      <div className={classes.content}>\n        { children }\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ModalScreen;\n","module.exports = __webpack_public_path__ + \"static/media/noContent.527b7724.svg\";","module.exports = __webpack_public_path__ + \"static/media/construction.07ebb9e5.svg\";","module.exports = __webpack_public_path__ + \"static/media/server.5f74112c.svg\";","module.exports = __webpack_public_path__ + \"static/media/error.74f870d4.svg\";","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {\n  InputBase,\n  List,\n  ListItem,\n  Paper,\n  Divider,\n  ClickAwayListener\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { User } from 'which-types';\n\nimport { get } from '../../requests';\nimport UserStrip from '../UserStrip/UserStrip';\n\ninterface PropTypes {\n  callback?: () => void;\n}\n\nconst INTERVAL = 300;\nconst LIMIT = 7;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'relative',\n    background: 'rgba(255, 255, 255, 0.5)',\n    borderRadius: '2px',\n    padding: theme.spacing(0.5),\n    display: 'flex',\n    alignItems: 'center'\n  },\n  results: {\n    position: 'absolute',\n    width: '100%',\n    top: theme.spacing(5)\n  },\n  listItem: {\n    padding: 0\n  }\n}));\n\nconst SearchBar: React.FC<PropTypes> = React.memo(({ callback }) => {\n  const [results, setResults] = useState<User[]>([]);\n  const [query, setQuery] = useState<string>('');\n  const [debouncedQuery, setDebouncedQuery] = useState<string>(query);\n  const history = useHistory();\n  const classes = useStyles();\n\n  useEffect(() => {\n    const handler = setTimeout(() => setDebouncedQuery(query), INTERVAL);\n    return () => clearTimeout(handler);\n  }, [query]);\n\n  useEffect(() => {\n    const fetchPolls = () => {\n      get(`/users?username[$regex]=${debouncedQuery}&$limit=${LIMIT}`)\n        .then(response => setResults(response.data))\n        .catch(() => setResults([]));\n    };\n    if (debouncedQuery) fetchPolls();\n    else setResults([]);\n  }, [debouncedQuery]);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n    setQuery(event.target.value.trim());\n  };\n\n  const handleClose = () => {\n    setDebouncedQuery('');\n    setQuery('');\n  };\n\n  const handleNavigate = (index: number) => () => {\n    const { username } = results[index];\n    history.push(`/profile/${username}`);\n    handleClose();\n    if (callback) callback();\n  };\n\n  const SearchResults = (\n    <ClickAwayListener onClickAway={handleClose}>\n      <Paper className={classes.results}>\n        <List>\n          {\n          results.map((result, index) => (\n            <div key={result._id}>\n              <ListItem button onClick={handleNavigate(index)} className={classes.listItem}>\n                <UserStrip user={result} />\n              </ListItem>\n              {(index < results.length - 1) && <Divider />}\n            </div>\n          ))\n        }\n        </List>\n      </Paper>\n    </ClickAwayListener>\n  );\n\n  return (\n    <div className={classes.root}>\n      <SearchIcon />\n      <InputBase\n        placeholder=\"Search...\"\n        value={query}\n        onChange={handleChange}\n      />\n      {results.length > 0 && SearchResults}\n    </div>\n  );\n});\n\n\nexport default SearchBar;\n\n","import React, { useState } from 'react';\nimport {\n  AppBar,\n  Toolbar,\n  IconButton,\n  useScrollTrigger,\n  Slide\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Search, Clear } from '@material-ui/icons';\nimport SearchBar from './SearchBar';\n\ninterface PropTypes {\n  menu: JSX.Element;\n  logo: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n});\n\n\nconst MobileHeader: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const trigger = useScrollTrigger();\n  const [isSearchOpen, setIsSearchOpen] = useState<boolean>(false);\n\n  const { menu, logo } = props;\n\n  const handleToggle = () => {\n    setIsSearchOpen(value => !value);\n  };\n\n  return (\n    <Slide appear={false} direction=\"down\" in={!trigger}>\n      <AppBar position=\"fixed\">\n        <Toolbar className={classes.root}>\n          {menu}\n          {isSearchOpen ? <SearchBar callback={handleToggle} /> : logo}\n          <IconButton onClick={handleToggle}>\n            {isSearchOpen ? <Clear /> : <Search />}\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n    </Slide>\n  );\n});\n\nexport default MobileHeader;\n\n","import React from 'react';\nimport { AppBar, Toolbar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\ninterface PropTypes {\n  profile: JSX.Element;\n  feed: JSX.Element;\n  notifications: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    top: 'auto',\n    bottom: 0\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-around'\n  }\n});\n\n\nconst BottomBar: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const { profile, feed, notifications } = props;\n\n  return (\n    <AppBar position=\"fixed\" className={classes.root}>\n      <Toolbar variant=\"dense\" className={classes.toolbar}>\n        {notifications}\n        {feed}\n        {profile}\n      </Toolbar>\n    </AppBar>\n  );\n});\n\nexport default BottomBar;\n\n","import React from 'react';\nimport { AppBar, Toolbar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SearchBar from './SearchBar';\n\ninterface PropTypes {\n  logo: JSX.Element;\n  menu: JSX.Element;\n  feed: JSX.Element;\n  notifications: JSX.Element;\n  profile: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    width: '60%',\n    margin: 'auto',\n    display: 'flex',\n    justifyContent: 'space-around'\n  },\n  group: {\n    display: 'flex',\n    alignItems: 'center'\n  }\n});\n\n\nconst BrowserHeader: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const {\n    logo,\n    menu,\n    feed,\n    notifications,\n    profile\n  } = props;\n\n  return (\n    <AppBar position=\"fixed\">\n      <Toolbar>\n        {menu}\n        <div className={classes.root}>\n          <div className={classes.group}>\n            {logo}\n          </div>\n          <SearchBar />\n          <div className={classes.group}>\n            {feed}\n            {notifications}\n            {profile}\n          </div>\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n});\n\nexport default BrowserHeader;\n\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { User } from 'which-types';\n\nimport Avatar from '../Avatar/Avatar';\n\ninterface PropTypes {\n  user: User;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: theme.spacing(4, 10),\n    textAlign: 'center'\n  },\n  avatar: {\n    width: theme.spacing(14),\n    height: theme.spacing(14)\n  }\n}));\n\n\nconst UserInfo: React.FC<PropTypes> = React.memo(({ user }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <Avatar user={user} className={classes.avatar} />\n      <Typography variant=\"h5\">\n        {user.username}\n      </Typography>\n    </div>\n  );\n});\n\nexport default UserInfo;\n\n","import React, { useMemo, useEffect, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  SwipeableDrawer,\n  List,\n  ListItem,\n  Typography,\n  Divider\n} from '@material-ui/core';\nimport { ExitToApp as LogoutIcon, Info } from '@material-ui/icons';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport UserInfo from './UserInfo';\nimport { useAuth } from '../../hooks/useAuth';\n\ninterface PropTypes {\n  isOpen: boolean;\n  setIsOpen: (value: boolean) => void;\n}\n\nconst useStyles = makeStyles(theme => ({\n  item: {\n    padding: theme.spacing(2, 14, 2, 2)\n  },\n  icon: {\n    marginRight: theme.spacing(1)\n  }\n}));\n\n\nconst Drawer: React.FC<PropTypes> = React.memo(({ isOpen, setIsOpen }) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { user, logout } = useAuth();\n\n  const handleOpen = useCallback(() => {\n    setIsOpen(true);\n  }, [setIsOpen]);\n\n  const handleClose = useCallback(() => {\n    setIsOpen(false);\n  }, [setIsOpen]);\n\n  useEffect(() => {\n    // Close drawer on navigations\n    return history.listen(() => handleClose());\n  }, [history, handleClose]);\n\n  const handleLogout = useCallback(() => {\n    logout();\n    history.push('/login');\n  }, [logout, history]);\n\n  const handleAbout = useCallback(() => {\n    history.push('/');\n  }, [history]);\n\n  const iOS = useMemo(() => {\n    return /iPad|iPhone|iPod/.test(navigator.userAgent);\n  }, []);\n\n  return (\n    <SwipeableDrawer\n      anchor=\"left\"\n      open={isOpen}\n      onOpen={handleOpen}\n      onClose={handleClose}\n      disableBackdropTransition={!iOS}\n      disableDiscovery={iOS}\n    >\n      {user && <UserInfo user={user} />}\n      <Divider />\n      <List>\n        {user && (\n          <ListItem button className={classes.item} onClick={handleLogout}>\n            <LogoutIcon className={classes.icon} />\n            <Typography>Logout</Typography>\n          </ListItem>\n        )}\n        <ListItem button className={classes.item} onClick={handleAbout}>\n          <Info className={classes.icon} />\n          <Typography>About</Typography>\n        </ListItem>\n      </List>\n    </SwipeableDrawer>\n  );\n});\n\nexport default Drawer;\n\n","import React, { useEffect, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport {\n  IconButton,\n  Typography,\n  useMediaQuery\n} from '@material-ui/core';\nimport {\n  AccountCircle,\n  Notifications,\n  Home,\n  Menu\n} from '@material-ui/icons';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nimport { useAuth } from '../../hooks/useAuth';\nimport MobileHeader from './MobileHeader';\nimport BottomBar from './BottomBar';\nimport BrowserHeader from './BrowserHeader';\nimport Drawer from '../Drawer/Drawer';\n\n\nconst useStyles = makeStyles(theme => ({\n  logo: {\n    fontWeight: 'bold',\n    cursor: 'pointer',\n    color: 'white'\n  },\n  avatar: {\n    width: theme.spacing(3),\n    height: theme.spacing(3)\n  },\n  activeIcon: {\n    color: 'white'\n  }\n}));\n\nconst Header: React.FC = React.memo(() => {\n  const classes = useStyles();\n  const { user } = useAuth();\n  const theme = useTheme();\n  const history = useHistory();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const [isDrawerOpen, setIsDrawerOpen] = useState<boolean>(false);\n  const [path, setPath] = useState<string>(useLocation().pathname);\n\n\n  useEffect(() => {\n    return history.listen(location => {\n      setPath(location.pathname);\n    });\n  }, [history]);\n\n  const handleHome = (): void => {\n    history.push('/');\n  };\n\n  const handleFeed = (): void => {\n    history.push('/feed');\n  };\n\n  const handleProfile = (): void => {\n    if (user) history.push(`/profile/${user.username}`);\n    else history.push('/login');\n  };\n\n  const handleNotifications = (): void => {\n    history.push('/notifications');\n  };\n\n  const handleMenu = (): void => {\n    setIsDrawerOpen(true);\n  };\n\n  const feed = (\n    <IconButton onClick={handleFeed}>\n      <Home className={path === '/feed' ? classes.activeIcon : ''} />\n    </IconButton>\n  );\n\n  const notifications = (\n    <IconButton onClick={handleNotifications}>\n      <Notifications className={path === '/notifications' ? classes.activeIcon : ''} />\n    </IconButton>\n  );\n\n  const menu = (\n    <IconButton onClick={handleMenu}>\n      <Menu />\n    </IconButton>\n  );\n\n  const logo = (\n    <Typography variant=\"h5\" className={classes.logo} onClick={handleHome}>\n      Which\n    </Typography>\n  );\n\n  const profile = (\n    <IconButton onClick={handleProfile}>\n      <AccountCircle className={[classes.avatar, path.includes('/profile') ? classes.activeIcon : ''].join(' ')} />\n    </IconButton>\n  );\n\n  return isMobile ? (\n    <>\n      <MobileHeader logo={logo} menu={menu} />\n      <BottomBar feed={feed} profile={profile} notifications={notifications} />\n      <Drawer isOpen={isDrawerOpen} setIsOpen={setIsDrawerOpen} />\n    </>\n  ) : (\n    <>\n      <BrowserHeader menu={menu} logo={logo} profile={profile} notifications={notifications} feed={feed} />\n      <Drawer isOpen={isDrawerOpen} setIsOpen={setIsDrawerOpen} />\n    </>\n  );\n});\n\nexport default Header;\n\n","import { useState, useCallback } from 'react';\nimport uploadFileToS3 from '../../utils/uploadFileToS3';\n\ninterface Hook {\n  file: File | string | undefined;\n  setFile: (value: File | string | undefined) => void;\n  resolve: () => Promise<string>;\n  progress: number;\n}\n\nexport default (): Hook => {\n  const [file, setFile] = useState<File | string>();\n  const [progress, setProgress] = useState<number>(0);\n\n  const resolve = useCallback(async (quality?: number): Promise<string> => {\n    // Indicate start\n    setProgress(0.01);\n\n    if (file instanceof File) return uploadFileToS3(file, quality, setProgress);\n    return file || '';\n  }, [file]);\n\n  return {\n    file,\n    setFile,\n    resolve,\n    progress\n  };\n};\n","import React, { useState } from 'react';\nimport {\n  Button,\n  TextField,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle\n} from '@material-ui/core';\n\ninterface PropTypes {\n  isOpen: boolean;\n  setIsOpen: (value: boolean) => void;\n  callback: (url: string) => void;\n}\n\nconst Modal: React.FC<PropTypes> = ({ setIsOpen, isOpen, callback }) => {\n  const [url, setUrl] = useState<string>('');\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  const handleSubmit = () => {\n    let result = url;\n    if (url.startsWith('https://www.instagram.com/')) {\n      const match = url.match('/p/(.*)/');\n      const id = match && match[1];\n      result = `https://www.instagram.com/p/${id}/media/?size=l`;\n    } else if (url.startsWith('https://drive.google.com/')) {\n      const match = url.match('/d/(.*)/');\n      const fileId = match && match[1];\n      result = `https://drive.google.com/uc?export=view&id=${fileId}`;\n    }\n    callback(result || '');\n    handleClose();\n  };\n\n  const handleChange = (event:React.ChangeEvent<HTMLInputElement>) => {\n    setUrl(event.target.value);\n  };\n\n  return (\n    <div>\n      <Dialog open={isOpen} onClose={handleClose}>\n        <DialogTitle>Upload via link</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Provide a valid URL to your image:\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Image URL\"\n            type=\"text\"\n            fullWidth\n            autoComplete=\"off\"\n            onChange={handleChange}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} color=\"primary\" disabled={!url.length}>\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default Modal;\n","import React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport LinkIcon from '@material-ui/icons/Link';\nimport Modal from './Modal';\n\ninterface PropTypes {\n  callback: (url: string) => void;\n}\n\nconst AttachLink: React.FC<PropTypes> = ({ callback, children }) => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  const handleOpen = (): void => {\n    setIsOpen(true);\n  };\n\n  const defaultButton = (\n    <Button\n      onClick={handleOpen}\n      variant=\"outlined\"\n      color=\"primary\"\n      startIcon={<LinkIcon />}\n    >\n      Link\n    </Button>\n  );\n\n  const child = children && React.Children.only(children);\n\n  return (\n    <>\n      <Modal callback={callback} isOpen={isOpen} setIsOpen={setIsOpen} />\n      {\n        React.isValidElement(child)\n          ? React.cloneElement(child, { onClick: handleOpen })\n          : defaultButton\n      }\n    </>\n  );\n};\n\nexport default AttachLink;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  CardActionArea,\n  Typography,\n  CircularProgress\n} from '@material-ui/core';\nimport { Check, CancelOutlined } from '@material-ui/icons';\n\nimport AttachLink from '../../components/AttachLink/AttachLink';\nimport FileUpload from '../../components/FileUpload/FileUpload';\nimport BackgroundImage from '../../components/Image/BackgroundImage';\nimport getLocalFileUrl from '../../utils/getLocalFileUrl';\n\ninterface PropTypes {\n  callback: (file?: File | string) => void;\n  progress?: number;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '50%',\n    display: 'flex'\n  },\n  mediaRoot: {\n    display: 'flex'\n  },\n  uploadRoot: {\n    flex: 1,\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(4)\n    },\n    [theme.breakpoints.down('sm')]: {\n      padding: theme.spacing(8, 1)\n    }\n  },\n  outline: {\n    padding: theme.spacing(2),\n    flex: 1,\n    border: '2px dashed gray',\n    borderRadius: theme.spacing(1),\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  clearIcon: {\n    opacity: '.5',\n    fontSize: 50\n  },\n  overlay: {\n    backgroundColor: 'rgba(0, 0, 0, 0.45)',\n    color: 'white',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    transitionDuration: '0.5s'\n  },\n  invisible: {\n    backgroundColor: 'rgba(0, 0, 0, 0)'\n  },\n  icon: {\n    color: 'white'\n  }\n}));\n\n\nconst ImageInput: React.FC<PropTypes> = ({ callback, progress }) => {\n  const classes = useStyles();\n  const [url, setUrl] = useState<string>();\n\n  const handleClear = (): void => {\n    setUrl(undefined);\n    callback(undefined);\n  };\n\n  const childrenCallback = (value: File | string) => {\n    if (value instanceof File) {\n      getLocalFileUrl(value).then(localUrl => setUrl(localUrl));\n    } else setUrl(value);\n\n    callback(value);\n  };\n\n  const Upload = (\n    <div className={classes.uploadRoot}>\n      <div className={classes.outline}>\n        <FileUpload callback={childrenCallback} />\n        <Typography variant=\"h6\"> or </Typography>\n        <AttachLink callback={childrenCallback} />\n      </div>\n    </div>\n  );\n\n  const Media = (\n    <CardActionArea onClick={handleClear} className={classes.mediaRoot} disabled={Boolean(progress)}>\n      <BackgroundImage src={url} />\n      <div className={`${classes.overlay} ${progress === 100 && classes.invisible}`}>\n        {\n          progress\n            ? progress < 100\n              ? <CircularProgress variant=\"static\" value={progress} className={classes.icon} />\n              : <Check className={classes.icon} fontSize=\"large\" />\n            : <CancelOutlined className={classes.icon} fontSize=\"large\" />\n        }\n      </div>\n    </CardActionArea>\n  );\n\n  return (\n    <div className={classes.root}>\n      {url ? Media : Upload}\n    </div>\n  );\n};\n\nexport default ImageInput;\n","export default (file: File): Promise<string> => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      if (typeof reader.result === 'string') resolve(reader.result);\n    }, false);\n\n    reader.addEventListener('error', () => {\n      reject(new Error('Error reading the file'));\n    }, false);\n\n    if (file) reader.readAsDataURL(file);\n  });\n};\n","import React, { ChangeEvent, useState, useMemo, useCallback } from 'react';\nimport Bluebird from 'bluebird';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Card, Container, LinearProgress, InputBase, Typography } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport { useSnackbar } from 'notistack';\nimport { useHistory } from 'react-router';\n\nimport useS3Preupload from './useS3Preupload';\nimport ImageInput from './ImageInput';\nimport ModalScreen from '../../components/ModalScreen/ModalScreen';\nimport Message from '../../components/Message/Message';\nimport UserStrip from '../../components/UserStrip/UserStrip';\nimport { post } from '../../requests';\nimport { useFeed, useProfile } from '../../hooks/APIClient';\nimport { useAuth } from '../../hooks/useAuth';\n\nconst useStyles = makeStyles(theme => ({\n  images: {\n    height: theme.spacing(50),\n    display: 'flex'\n  },\n  textarea: {\n    width: '100%',\n    height: 100\n  },\n  description: {\n    fontSize: 14,\n    padding: theme.spacing(1, 2)\n  }\n}));\n\nconst PollCreation: React.FC = () => {\n  const [description, setDescription] = useState<string>('');\n  const classes = useStyles();\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n  const { user } = useAuth();\n  const { mutate: updateFeed } = useFeed();\n  const { mutate: updateProfile } = useProfile(user?.username || '');\n  const {\n    file: left,\n    setFile: setLeft,\n    resolve: resolveLeft,\n    progress: leftProgress\n  } = useS3Preupload();\n  const {\n    file: right,\n    setFile: setRight,\n    resolve: resolveRight,\n    progress: rightProgress\n  } = useS3Preupload();\n\n  const handleDescriptionChange = (e: ChangeEvent<HTMLTextAreaElement|HTMLInputElement>) => {\n    setDescription(e.target.value);\n  };\n\n  const handleSubmit = async () => {\n    try {\n      const [leftUrl, rightUrl] = await Bluebird.all([resolveLeft(), resolveRight()]);\n      const contents = {\n        left: { url: leftUrl },\n        right: { url: rightUrl }\n      };\n\n      post('/polls/', { contents, description }).then(() => {\n        updateFeed();\n        updateProfile();\n        enqueueSnackbar('Your poll has been successfully created!', { variant: 'success' });\n      });\n    } catch (error) {\n      enqueueSnackbar('Failed to create a poll. Please, try again.', { variant: 'error' });\n    }\n  };\n\n  const handleClose = useCallback(() => history.goBack(), [history]);\n\n\n  const isSubmitting = useMemo(() => leftProgress + rightProgress > 0, [leftProgress, rightProgress]);\n\n  return (\n    <ModalScreen\n      title=\"Create a poll\"\n      actionIcon={<SendIcon />}\n      handleAction={handleSubmit}\n      isActionDisabled={!(left && right) || isSubmitting}\n      handleCloseModal={handleClose}\n    >\n      <Container maxWidth=\"sm\" disableGutters>\n        <Card elevation={3}>\n          {user && <UserStrip user={user} />}\n          <Typography component=\"span\">\n            <InputBase\n              multiline\n              fullWidth\n              placeholder=\"Add description\"\n              onChange={handleDescriptionChange}\n              className={classes.description}\n              readOnly={isSubmitting}\n            />\n          </Typography>\n          <div className={classes.images}>\n            <ImageInput callback={setLeft} progress={leftProgress} />\n            <ImageInput callback={setRight} progress={rightProgress} />\n          </div>\n        </Card>\n        {isSubmitting && (\n          <>\n            <LinearProgress color=\"primary\" />\n            <Message\n              tagline=\"You can close this window now\"\n              message=\"We will upload your images in the background.\"\n              noMargin\n            />\n          </>\n        )}\n      </Container>\n    </ModalScreen>\n  );\n};\n\nexport default PollCreation;\n","import React from 'react';\nimport { Switch, Route, useLocation } from 'react-router-dom';\nimport { Location } from 'history';\n\nimport PollCreation from '../PollCreation/PollCreation';\n\nconst Profile = React.lazy(() => import('../Profile/Profile'));\nconst Feed = React.lazy(() => import('../Feed/Feed'));\nconst Login = React.lazy(() => import('../Login/Login'));\nconst Registration = React.lazy(() => import('../Registration/Registration'));\nconst Home = React.lazy(() => import('../Home/Home'));\nconst Notifications = React.lazy(() => import('../Notifications/Notifications'));\n\nexport interface LocationState {\n  background: Location;\n}\n\nconst Router: React.FC = React.memo(() => {\n  const location = useLocation<LocationState>();\n  const background = location.state && location.state.background;\n\n  const ModalSwitch = (\n    <Switch>\n      <Route path=\"/new\" component={PollCreation} />\n    </Switch>\n  );\n\n  return (\n    <>\n      {ModalSwitch}\n      <Switch location={background || location}>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/login\" component={Login} />\n        <Route exact path=\"/registration\" component={Registration} />\n        <Route exact path=\"/notifications\" component={Notifications} />\n        <Route path=\"/feed\" component={Feed} />\n        <Route path=\"/profile/:username\" component={Profile} />\n      </Switch>\n    </>\n  );\n});\n\n\nexport default Router;\n\n","import React, {\n  useEffect,\n  useState,\n  useCallback,\n  useMemo\n} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { get } from '../../requests';\nimport Loading from '../../components/Loading/Loading';\nimport EmptyState from '../../components/EmptyState/EmptyState';\n\nconst DYNO_WAKEUP_TIME = 30;\n\nconst messages = [\n  '',\n  'It looks like our server is sleeping.',\n  `We need about ${DYNO_WAKEUP_TIME} seconds to wake it up.`,\n  'Please, stay with us.',\n  'We love you <3',\n  'Almost done.'\n];\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center'\n  },\n  hidden: {\n    visibility: 'hidden',\n    position: 'absolute',\n    width: 0,\n    height: 0,\n    overflow: 'hidden'\n  },\n  img: {\n    width: theme.spacing(24)\n  }\n}));\n\n// TODO: if Dyno is sleeping, use this time to pre-load pages\n\nconst DynoWaiter: React.FC = ({ children }) => {\n  const classes = useStyles();\n  const [isReady, setIsReady] = useState<boolean>(false);\n  const [time, setTime] = useState<number>(0);\n\n  const tick = useCallback((): void => setTime(value => value + 1), [setTime]);\n\n  useEffect(() => {\n    const interval = setInterval(tick, 1000);\n    get('/ping').then(() => {\n      setIsReady(true);\n      clearInterval(interval);\n    });\n    return () => clearInterval(interval);\n  }, [setIsReady, tick]);\n\n  const message = useMemo(() => {\n    const interval = DYNO_WAKEUP_TIME / messages.length;\n    const index = Math.floor(time / interval);\n    const lastIndex = messages.length - 1;\n    return messages[index > lastIndex ? lastIndex : index];\n  }, [time]);\n\n  return (\n    <>\n      {!isReady && (\n        <>\n          <Loading />\n          {message && <EmptyState variant=\"waiting\" smart message={message} />}\n        </>\n      )}\n      <div className={isReady ? '' : classes.hidden}>\n        {children}\n      </div>\n    </>\n  );\n};\n\n\nexport default DynoWaiter;\n\n","import React, { Suspense, useEffect } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useMediaQuery } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { useHistory } from 'react-router-dom';\n\nimport Router, { LocationState } from './Router';\nimport DynoWaiter from './DynoWaiter';\nimport Loading from '../../components/Loading/Loading';\nimport EmptyState from '../../components/EmptyState/EmptyState';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    [theme.breakpoints.down('sm')]: {\n      padding: theme.spacing(10, 0, 12, 0)\n    },\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(15, 5, 8, 5)\n    }\n  }\n}));\n\nconst ErrorFallback: React.FC = () => (\n  <EmptyState variant=\"error\" message=\"Try reloading the page.\" />\n);\n\nconst Page: React.FC = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const history = useHistory<LocationState>();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  useEffect(() => history.listen(update => {\n    if (!update.state?.background) window.scrollTo(0, 0);\n  }), [history]);\n\n  return (\n    <SnackbarProvider\n      preventDuplicate\n      maxSnack={isMobile ? 1 : 3}\n      anchorOrigin={\n        isMobile\n          ? { vertical: 'top', horizontal: 'right' }\n          : { vertical: 'bottom', horizontal: 'left' }\n      }\n    >\n      <div className={classes.root}>\n        <ErrorBoundary FallbackComponent={ErrorFallback}>\n          <Suspense fallback={<Loading />}>\n            <DynoWaiter>\n              <Router />\n            </DynoWaiter>\n          </Suspense>\n        </ErrorBoundary>\n      </div>\n    </SnackbarProvider>\n  );\n};\n\n\nexport default Page;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter } from 'react-router-dom';\nimport teal from '@material-ui/core/colors/teal';\nimport 'typeface-roboto';\n\nimport Header from './components/Header/Header';\nimport Page from './containers/Page/Page';\nimport { AuthProvider } from './hooks/useAuth';\n\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: teal[700],\n      light: teal[100]\n    },\n    secondary: {\n      main: teal[900]\n    }\n  }\n});\n\n\nconst App: React.FC = () => {\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          <Header />\n          <Page />\n        </ThemeProvider>\n      </AuthProvider>\n    </BrowserRouter>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n","import axios from 'axios';\nimport _ from 'lodash';\n\nconst baseURL = process.env.NODE_ENV === 'production'\n  ? 'https://which-api.herokuapp.com'\n  : 'http://localhost:3030';\n\nconst requests = axios.create({ baseURL });\n\nrequests.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  return _.set(config, 'headers.Authorization', token);\n});\n\nrequests.interceptors.response.use(response => response, error => {\n  if (error.message === 'Request failed with status code 401' && localStorage.getItem('token')) {\n    localStorage.removeItem('remember');\n    window.location.reload();\n  }\n  return Promise.reject(error);\n});\n\nexport const {\n  get, post, put, patch\n} = requests;\nexport default requests;\n\n","import { useState, useCallback } from 'react';\n\ntype Value = string | null;\ntype Setter = (value: Value) => void;\n\nexport default (key: string): [Value, Setter] => {\n  const [state, setState] = useState<Value>(() => localStorage.getItem(key) || null);\n\n  const update: Setter = useCallback(value => {\n    if (value) localStorage.setItem(key, value);\n    else localStorage.removeItem(key);\n    setState(value);\n  }, [key]);\n\n  return [state, update];\n};\n","import React, {\n  useEffect, useCallback, useMemo, useContext, createContext\n} from 'react';\nimport { User } from 'which-types';\nimport { post } from '../requests';\nimport { useUser } from './APIClient';\nimport useLocalStorage from './useLocalStorage';\n\n\ninterface ContextType {\n  user: User | undefined,\n  login: (username: string, password: string, remember?: boolean) => Promise<boolean>;\n  logout: () => void;\n  isAuthenticated: boolean;\n}\n\nconst authContext = createContext<ContextType>({\n  user: undefined,\n  login: async () => false,\n  logout: () => {},\n  isAuthenticated: false\n});\n\nconst useProvideAuth = () => {\n  const [remember, setRemember] = useLocalStorage('remember');\n  const [username, setUsername] = useLocalStorage('username');\n  const [token, setToken] = useLocalStorage('token');\n  const { data: user } = useUser(username);\n\n  const isAuthenticated = useMemo(() => Boolean(username), [username]);\n\n  const logout = useCallback(() => {\n    setToken(null);\n    setUsername(null);\n  }, [setToken, setUsername]);\n\n  useEffect(() => {\n    // If should not remember, logout\n    if (!remember) logout();\n  }, [remember, logout]);\n\n\n  const login: ContextType['login'] = (name, password, shouldRemember = true) => {\n    return post('/authentication', {\n      strategy: 'local',\n      username: name,\n      password\n    }).then(response => {\n      setToken(response.data.accessToken);\n      setUsername(name);\n      setRemember(shouldRemember ? 'true' : null);\n      return true;\n    }).catch(() => false);\n  };\n\n  return {\n    user, login, logout, token, isAuthenticated\n  };\n};\n\nexport const AuthProvider: React.FC = ({ children }) => {\n  const auth = useProvideAuth();\n  const { Provider } = authContext;\n  return <Provider value={auth}>{children}</Provider>;\n};\n\nexport const useAuth = (): ContextType => {\n  return useContext(authContext);\n};\n\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\ninterface PropTypes {\n  tagline?: string;\n  message?: string;\n  noMargin?: boolean;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  margin: {\n    marginTop: theme.spacing(6)\n  },\n  content: {\n    margin: theme.spacing(2)\n  }\n}));\n\nconst Message: React.FC<PropTypes> = React.memo(({ tagline, message, noMargin, children }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={`${classes.root} ${!noMargin && classes.margin}`}>\n      <div className={classes.content}>\n        {children}\n      </div>\n      <Typography variant=\"h5\">\n        {tagline}\n      </Typography>\n      <Typography color=\"textSecondary\">\n        {message}\n      </Typography>\n    </div>\n  );\n});\n\nexport default Message;\n","import useSWR, { responseInterface } from 'swr';\nimport { User, Poll, Feedback } from 'which-types';\nimport axios from 'axios';\nimport { get } from '../requests';\n\ntype Response<T> = responseInterface<T, Error>;\n\nconst fetcher = (endpoint: string) => get(endpoint).then(response => response.data);\n\nexport const useUser = (username: string | null): Response<User> => {\n  return useSWR(\n    username && `/users?username=${username}`,\n    (url: string) => get(url).then(response => response.data[0])\n  );\n};\n\nexport const useProfile = (username: string): Response<Poll[]> => {\n  return useSWR(username && `/profiles/${username}`, fetcher);\n};\n\nexport const useFeed = (): Response<Poll[]> => {\n  return useSWR('/feed', fetcher, { revalidateOnFocus: false });\n};\n\nexport const useFeedback = (): Response<Feedback[]> => {\n  return useSWR('/feedback', fetcher);\n};\n\nexport interface Release {\n  url: string;\n  description: string;\n  version: string;\n  name: string;\n}\n\nexport const usePatchNotes = (): Response<Release> => {\n  const fetchRelease = () => axios.get('https://api.github.com/repos/which-ecosystem/which/releases/latest')\n    .then(({ data }) => ({\n      name: data.name,\n      url: data.html_url,\n      version: data.tag_name,\n      description: data.body\n    }));\n  return useSWR('/patchnotes', fetchRelease, { revalidateOnFocus: false });\n};\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport VerifiedIcon from '@material-ui/icons/CheckCircleOutline';\r\nimport { CardHeader } from '@material-ui/core/';\r\nimport { User } from 'which-types';\r\n\r\nimport Avatar from '../Avatar/Avatar';\r\n\r\n\r\ninterface PropTypes {\r\n  user: User;\r\n  info?: string | JSX.Element\r\n}\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  verified: {\r\n    marginLeft: theme.spacing(0.5),\r\n    width: theme.spacing(2),\r\n    height: theme.spacing(2)\r\n  }\r\n}));\r\n\r\n\r\nconst UserStrip: React.FC<PropTypes> = ({ user, info }) => {\r\n  const classes = useStyles();\r\n  const { username, verified } = user;\r\n\r\n  const avatar = <Avatar user={user} />;\r\n\r\n  const title = (\r\n    <div className={classes.root}>\r\n      {username}\r\n      {verified && <VerifiedIcon color=\"primary\" className={classes.verified} />}\r\n    </div>\r\n  );\r\n\r\n  return <CardHeader avatar={avatar} title={title} subheader={info} />;\r\n};\r\n\r\nexport default UserStrip;\r\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Image from '../Image/Image';\nimport Message from '../Message/Message';\nimport noContentIcon from '../../assets/noContent.svg';\nimport constructionIcon from '../../assets/construction.svg';\nimport serverIcon from '../../assets/server.svg';\nimport errorIcon from '../../assets/error.svg';\n\n\ninterface PropTypes {\n  variant?: 'default' | 'construction' | 'waiting' | 'error';\n  message?: string;\n  smart?: boolean;\n}\n\nconst useStyles = makeStyles(theme => ({\n  img: {\n    width: theme.spacing(24)\n  }\n}));\n\nconst CONTEXT = {\n  default: {\n    icon: noContentIcon,\n    tagline: 'No content'\n  },\n  construction: {\n    icon: constructionIcon,\n    tagline: 'Coming soon'\n  },\n  waiting: {\n    icon: serverIcon,\n    tagline: 'Waiting for server'\n  },\n  error: {\n    icon: errorIcon,\n    tagline: 'Something went wrong'\n  }\n};\n\nconst EmptyState: React.FC<PropTypes> = ({ variant = 'default', smart = false, message }) => {\n  const classes = useStyles();\n  const { icon, tagline } = CONTEXT[variant];\n\n  const Component = smart ? Image : 'img';\n\n  return (\n    <Message tagline={tagline} message={message}>\n      <Component src={icon} className={classes.img} alt=\"No content\" />\n    </Message>\n  );\n};\n\nexport default EmptyState;\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Message from '../Message/Message';\n\ninterface PropTypes {\n  tagline?: string;\n  message?: string;\n}\n\nconst Loading: React.FC<PropTypes> = React.memo(({ tagline, message }) => {\n  return (\n    <Message tagline={tagline} message={message}>\n      <CircularProgress color=\"primary\" />\n    </Message>\n  );\n});\n\nexport default Loading;\n\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Avatar as AvatarBase } from '@material-ui/core';\nimport { User } from 'which-types';\n\ninterface PropTypes {\n  user?: User;\n  className?: string;\n}\n\nconst Avatar: React.FC<PropTypes> = ({ user, className }) => {\n  const history = useHistory();\n\n  const handleClick = () => {\n    if (user) history.push(`/profile/${user.username}`);\n  };\n\n  return (\n    <AvatarBase\n      src={user?.avatarUrl}\n      onClick={handleClick}\n      className={className}\n      style={{ cursor: 'pointer' }}\n    />\n  );\n};\n\nexport default Avatar;\n","import React, { useState, useCallback, useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ErrorIcon from '@material-ui/icons/BrokenImage';\nimport grey from '@material-ui/core/colors/grey';\n\ninterface PropTypes {\n  src?: string;\n  alt?: string;\n  className?: string;\n  animationDuration?: number;\n  disableLoading?: boolean;\n}\n\ntype Status = 'success' | 'loading' | 'error';\n\nconst useStyles = makeStyles(theme => ({\n  image: {\n    imageOrientation: 'from-image'\n  },\n  container: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  success: {\n    opacity: '100%',\n    filterBrightness: '100%',\n    filterSaturate: '100%'\n  },\n  loading: {\n    opacity: 0,\n    filterBrightness: 0,\n    filterSaturate: '20%',\n    position: 'absolute'\n  },\n  error: {\n    display: 'none'\n  },\n  errorIcon: {\n    color: grey[300],\n    width: theme.spacing(6),\n    height: theme.spacing(6)\n  }\n}));\n\nconst Image: React.FC<PropTypes> = React.memo(({\n  src,\n  alt,\n  className,\n  animationDuration = 1000,\n  disableLoading = false\n}) => {\n  const classes = useStyles();\n  const [status, setStatus] = useState<Status>('loading');\n\n  const handleLoad = useCallback((): void => {\n    setStatus('success');\n  }, [setStatus]);\n\n  const handleError = useCallback((): void => {\n    setStatus('error');\n  }, [setStatus]);\n\n  const transition = useMemo(() => `\n    filterBrightness ${animationDuration * 0.75}ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    filterSaturate ${animationDuration}ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    opacity ${animationDuration / 2}ms cubic-bezier(0.4, 0.0, 0.2, 1)\n  `, [animationDuration]);\n\n  const image = (\n    <img\n      src={src}\n      alt={alt}\n      className={`${classes.image} ${classes[status]} ${className}`}\n      style={{ transition }}\n      onLoad={handleLoad}\n      onError={handleError}\n    />\n  );\n\n  return (\n    <>\n      {src && image}\n      {\n        status !== 'success' && (\n          <div className={classes.container}>\n            {\n              (status === 'error' || !src)\n                ? <ErrorIcon className={classes.errorIcon} />\n                : (!disableLoading && <CircularProgress color=\"primary\" />)\n            }\n          </div>\n        )\n      }\n    </>\n  );\n});\n\nexport default Image;\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Image from './Image';\n\ninterface PropTypes {\n  src?: string;\n  alt?: string;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    overflow: 'hidden'\n  },\n  image: {\n    objectFit: 'cover',\n    pointerEvents: 'none',\n    width: '100%',\n    minHeight: '100%'\n  }\n});\n\nconst BackgroundImage: React.FC<PropTypes> = ({ src, alt }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <Image src={src} alt={alt} className={classes.image} />\n    </div>\n  );\n};\n\nexport default BackgroundImage;\n\n"],"sourceRoot":""}
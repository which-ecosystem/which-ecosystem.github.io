{"version":3,"sources":["utils/uploadFileToS3.ts","components/FileUpload/FileUpload.tsx","assets/noContent.svg","assets/construction.svg","assets/server.svg","assets/error.svg","components/Header/SearchBar.tsx","components/Header/MobileHeader.tsx","components/Header/BottomBar.tsx","components/Header/BrowserHeader.tsx","components/Drawer/UserInfo.tsx","components/Drawer/Drawer.tsx","components/Header/Header.tsx","containers/PollCreation/useS3Preupload.ts","components/AttachLink/Modal.tsx","components/AttachLink/AttachLink.tsx","containers/PollCreation/ImageInput.tsx","utils/getLocalFileUrl.ts","components/ModalScreen/ModalScreen.tsx","containers/PollCreation/PollCreation.tsx","containers/Page/Router.tsx","containers/Page/DynoWaiter.tsx","containers/Page/Page.tsx","index.tsx","requests.ts","hooks/useLocalStorage.ts","hooks/useAuth.tsx","components/Avatar/Avatar.tsx","components/Message/Message.tsx","hooks/APIClient.ts","components/UserStrip/UserStrip.tsx","components/EmptyState/EmptyState.tsx","components/Loading/Loading.tsx","components/Image/Image.tsx","components/Image/BackgroundImage.tsx"],"names":["compressFile","file","quality","Promise","resolve","reject","Compressor","success","result","error","err","setProgress","config","headers","onUploadProgress","progressEvent","loaded","total","progress","Math","round","Bluebird","all","get","name","then","response","compressedFile","uploadUrl","data","axios","put","uri","url","slice","indexOf","FileUpload","callback","children","inputRef","useRef","handleClick","current","click","child","React","Children","only","defaultButton","onClick","variant","color","size","startIcon","type","ref","multiple","accept","style","display","onChange","event","files","target","length","isValidElement","cloneElement","module","exports","useStyles","makeStyles","theme","root","position","background","borderRadius","padding","spacing","alignItems","results","width","top","listItem","SearchBar","memo","useState","setResults","query","setQuery","debouncedQuery","setDebouncedQuery","history","useHistory","classes","useEffect","handler","setTimeout","clearTimeout","catch","handleClose","handleNavigate","index","username","push","SearchResults","ClickAwayListener","onClickAway","Paper","className","List","map","key","_id","ListItem","button","UserStrip","user","Divider","InputBase","placeholder","value","trim","justifyContent","MobileHeader","props","trigger","useScrollTrigger","isSearchOpen","setIsSearchOpen","menu","logo","handleToggle","Slide","appear","direction","in","AppBar","Toolbar","IconButton","Clear","Search","bottom","toolbar","BottomBar","profile","feed","notifications","margin","group","BrowserHeader","textAlign","avatar","height","UserInfo","Avatar","Typography","item","icon","marginRight","Drawer","isOpen","setIsOpen","useAuth","logout","handleOpen","useCallback","listen","handleLogout","handleAbout","iOS","useMemo","test","navigator","userAgent","SwipeableDrawer","anchor","open","onOpen","onClose","disableBackdropTransition","disableDiscovery","Info","fontWeight","cursor","Header","useTheme","isMobile","useMediaQuery","breakpoints","down","isDrawerOpen","setIsDrawerOpen","Home","Notifications","Menu","avatarUrl","AccountCircle","setFile","a","File","uploadFileToS3","Modal","setUrl","Dialog","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","id","label","fullWidth","autoComplete","DialogActions","Button","startsWith","match","fileId","disabled","AttachLink","mediaRoot","uploadRoot","flex","up","outline","border","flexDirection","clearIcon","opacity","fontSize","overlay","backgroundColor","left","transitionDuration","invisible","ImageInput","childrenCallback","reader","FileReader","addEventListener","Error","readAsDataURL","localUrl","Upload","Media","CardActionArea","undefined","Boolean","BackgroundImage","src","CircularProgress","Check","CancelOutlined","palette","default","content","Transition","forwardRef","ModalScreen","title","actionIcon","handleAction","isActionDisabled","onExited","goBack","handleClickAction","TransitionComponent","PaperProps","fullScreen","maxWidth","images","textarea","description","PollCreation","setDescription","enqueueSnackbar","useSnackbar","updateFeed","useFeed","mutate","updateProfile","useProfile","useS3Preupload","setLeft","resolveLeft","leftProgress","right","setRight","resolveRight","rightProgress","handleSubmit","leftUrl","rightUrl","contents","post","isSubmitting","Container","disableGutters","Card","elevation","multiline","e","readOnly","LinearProgress","Message","tagline","message","noMargin","Profile","lazy","Feed","Login","Registration","Router","location","useLocation","state","ModalSwitch","path","component","exact","messages","hidden","visibility","overflow","img","DynoWaiter","isReady","setIsReady","time","setTime","tick","interval","setInterval","clearInterval","floor","lastIndex","Loading","EmptyState","smart","ErrorFallback","Page","update","window","scrollTo","preventDuplicate","maxSnack","anchorOrigin","vertical","horizontal","FallbackComponent","fallback","createMuiTheme","primary","main","teal","light","secondary","App","ThemeProvider","CssBaseline","ReactDOM","render","document","getElementById","requests","create","baseURL","interceptors","request","use","token","localStorage","getItem","_","set","removeItem","reload","patch","setState","setItem","authContext","createContext","login","isAuthenticated","AuthProvider","auth","useLocalStorage","remember","setRemember","setUsername","setToken","useUser","password","shouldRemember","strategy","accessToken","useProvideAuth","Provider","useContext","marginTop","fetcher","endpoint","useSWR","revalidateOnFocus","useFeedback","usePatchNotes","html_url","version","tag_name","body","verified","marginLeft","info","subheader","CONTEXT","noContentIcon","construction","constructionIcon","waiting","serverIcon","errorIcon","Component","Image","alt","image","imageOrientation","container","filterBrightness","filterSaturate","loading","grey","animationDuration","disableLoading","status","setStatus","handleLoad","handleError","transition","onLoad","onError","objectFit","pointerEvents","minHeight"],"mappings":"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","file":"static/js/main.41b0cf49.chunk.js","sourcesContent":["import Compressor from 'compressorjs';\nimport axios from 'axios';\nimport Bluebird from 'bluebird';\nimport { get } from '../requests';\n\ninterface ProgressEvent {\n  loaded: number;\n  total: number;\n}\n\ntype SetProgress = (progress: number) => void;\n\n\nconst compressFile = (file: File, quality = 0.6): Promise<File | Blob> => {\n  return new Promise((resolve, reject) => {\n    if (quality === 1) return resolve(file);\n    return new Compressor(file, {\n      success: result => resolve(result),\n      error: err => reject(err),\n      quality\n    });\n  });\n};\n\nexport default (file: File, quality?: number, setProgress?: SetProgress): Promise<string> => {\n  const onUploadProgress = (progressEvent: ProgressEvent): void => {\n    if (setProgress) {\n      const { loaded, total } = progressEvent;\n      // Only allow upload progress reach 95%, and set 100% when request is resolved\n      const progress = Math.round((loaded * 95) / total);\n      setProgress(progress);\n    }\n  };\n\n  const config = {\n    headers: { 'Content-Type': 'image/png' },\n    onUploadProgress\n  };\n\n  // Add querystring to avoid caching request in some browsers, see\n  // https://stackoverflow.com/questions/59339561/safari-skipping-xmlhttprequests\n  return Bluebird.all([get(`/files?key=${file.name}`), compressFile(file, quality)])\n    .then(([response, compressedFile]) => {\n      const uploadUrl = response.data;\n      return axios.put(uploadUrl, compressedFile, config);\n    })\n    .then(response => {\n      if (setProgress) setProgress(100);\n      const uri = response.config.url;\n      return uri ? uri.slice(0, uri.indexOf('?')) : '';\n    });\n};\n\n","import React, { useRef } from 'react';\nimport Button from '@material-ui/core/Button';\nimport CloudUpload from '@material-ui/icons/CloudUpload';\n\ninterface PropTypes {\n  callback: (file: File) => void;\n}\n\n\nconst FileUpload: React.FC<PropTypes> = ({ callback, children }) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target?.files;\n    if (files?.length) callback(files[0]);\n  };\n\n  const handleClick = () => {\n    if (inputRef?.current) inputRef.current.click();\n  };\n\n  const child = children && React.Children.only(children);\n\n  const defaultButton = (\n    <Button\n      onClick={handleClick}\n      variant=\"contained\"\n      color=\"primary\"\n      size=\"large\"\n      startIcon={<CloudUpload />}\n    >\n      Upload\n    </Button>\n  );\n\n  return (\n    <>\n      <input\n        type=\"file\"\n        ref={inputRef}\n        multiple={false}\n        accept=\".jpg, .jpeg, .png, .gif\"\n        style={{ display: 'none' }}\n        onChange={handleChange}\n      />\n      {\n        React.isValidElement(child)\n          ? React.cloneElement(child, { onClick: handleClick })\n          : defaultButton\n      }\n    </>\n  );\n};\n\nexport default FileUpload;\n","module.exports = __webpack_public_path__ + \"static/media/noContent.527b7724.svg\";","module.exports = __webpack_public_path__ + \"static/media/construction.07ebb9e5.svg\";","module.exports = __webpack_public_path__ + \"static/media/server.5f74112c.svg\";","module.exports = __webpack_public_path__ + \"static/media/error.74f870d4.svg\";","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {\n  InputBase,\n  List,\n  ListItem,\n  Paper,\n  Divider,\n  ClickAwayListener\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { User } from 'which-types';\n\nimport { get } from '../../requests';\nimport UserStrip from '../UserStrip/UserStrip';\n\ninterface PropTypes {\n  callback?: () => void;\n}\n\nconst INTERVAL = 300;\nconst LIMIT = 7;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'relative',\n    background: 'rgba(255, 255, 255, 0.5)',\n    borderRadius: '2px',\n    padding: theme.spacing(0.5),\n    display: 'flex',\n    alignItems: 'center'\n  },\n  results: {\n    position: 'absolute',\n    width: '100%',\n    top: theme.spacing(5)\n  },\n  listItem: {\n    padding: 0\n  }\n}));\n\nconst SearchBar: React.FC<PropTypes> = React.memo(({ callback }) => {\n  const [results, setResults] = useState<User[]>([]);\n  const [query, setQuery] = useState<string>('');\n  const [debouncedQuery, setDebouncedQuery] = useState<string>(query);\n  const history = useHistory();\n  const classes = useStyles();\n\n  useEffect(() => {\n    const handler = setTimeout(() => setDebouncedQuery(query), INTERVAL);\n    return () => clearTimeout(handler);\n  }, [query]);\n\n  useEffect(() => {\n    const fetchPolls = () => {\n      get(`/users?username[$regex]=${debouncedQuery}&$limit=${LIMIT}`)\n        .then(response => setResults(response.data))\n        .catch(() => setResults([]));\n    };\n    if (debouncedQuery) fetchPolls();\n    else setResults([]);\n  }, [debouncedQuery]);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n    setQuery(event.target.value.trim());\n  };\n\n  const handleClose = () => {\n    setDebouncedQuery('');\n    setQuery('');\n  };\n\n  const handleNavigate = (index: number) => () => {\n    const { username } = results[index];\n    history.push(`/profile/${username}`);\n    handleClose();\n    if (callback) callback();\n  };\n\n  const SearchResults = (\n    <ClickAwayListener onClickAway={handleClose}>\n      <Paper className={classes.results}>\n        <List>\n          {\n          results.map((result, index) => (\n            <div key={result._id}>\n              <ListItem button onClick={handleNavigate(index)} className={classes.listItem}>\n                <UserStrip user={result} />\n              </ListItem>\n              {(index < results.length - 1) && <Divider />}\n            </div>\n          ))\n        }\n        </List>\n      </Paper>\n    </ClickAwayListener>\n  );\n\n  return (\n    <div className={classes.root}>\n      <SearchIcon />\n      <InputBase\n        placeholder=\"Search...\"\n        value={query}\n        onChange={handleChange}\n      />\n      {results.length > 0 && SearchResults}\n    </div>\n  );\n});\n\n\nexport default SearchBar;\n\n","import React, { useState } from 'react';\nimport {\n  AppBar,\n  Toolbar,\n  IconButton,\n  useScrollTrigger,\n  Slide\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Search, Clear } from '@material-ui/icons';\nimport SearchBar from './SearchBar';\n\ninterface PropTypes {\n  menu: JSX.Element;\n  logo: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n});\n\n\nconst MobileHeader: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const trigger = useScrollTrigger();\n  const [isSearchOpen, setIsSearchOpen] = useState<boolean>(false);\n\n  const { menu, logo } = props;\n\n  const handleToggle = () => {\n    setIsSearchOpen(value => !value);\n  };\n\n  return (\n    <Slide appear={false} direction=\"down\" in={!trigger}>\n      <AppBar position=\"fixed\">\n        <Toolbar className={classes.root}>\n          {menu}\n          {isSearchOpen ? <SearchBar callback={handleToggle} /> : logo}\n          <IconButton onClick={handleToggle}>\n            {isSearchOpen ? <Clear /> : <Search />}\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n    </Slide>\n  );\n});\n\nexport default MobileHeader;\n\n","import React from 'react';\nimport { AppBar, Toolbar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\ninterface PropTypes {\n  profile: JSX.Element;\n  feed: JSX.Element;\n  notifications: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    top: 'auto',\n    bottom: 0\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-around'\n  }\n});\n\n\nconst BottomBar: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const { profile, feed, notifications } = props;\n\n  return (\n    <AppBar position=\"fixed\" className={classes.root}>\n      <Toolbar variant=\"dense\" className={classes.toolbar}>\n        {notifications}\n        {feed}\n        {profile}\n      </Toolbar>\n    </AppBar>\n  );\n});\n\nexport default BottomBar;\n\n","import React from 'react';\nimport { AppBar, Toolbar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SearchBar from './SearchBar';\n\ninterface PropTypes {\n  logo: JSX.Element;\n  menu: JSX.Element;\n  feed: JSX.Element;\n  notifications: JSX.Element;\n  profile: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    width: '60%',\n    margin: 'auto',\n    display: 'flex',\n    justifyContent: 'space-around'\n  },\n  group: {\n    display: 'flex',\n    alignItems: 'center'\n  }\n});\n\n\nconst BrowserHeader: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const {\n    logo,\n    menu,\n    feed,\n    notifications,\n    profile\n  } = props;\n\n  return (\n    <AppBar position=\"fixed\">\n      <Toolbar>\n        {menu}\n        <div className={classes.root}>\n          <div className={classes.group}>\n            {logo}\n          </div>\n          <SearchBar />\n          <div className={classes.group}>\n            {feed}\n            {notifications}\n            {profile}\n          </div>\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n});\n\nexport default BrowserHeader;\n\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { User } from 'which-types';\n\nimport Avatar from '../Avatar/Avatar';\n\ninterface PropTypes {\n  user: User;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: theme.spacing(4, 10),\n    textAlign: 'center'\n  },\n  avatar: {\n    width: theme.spacing(14),\n    height: theme.spacing(14)\n  }\n}));\n\n\nconst UserInfo: React.FC<PropTypes> = React.memo(({ user }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <Avatar user={user} className={classes.avatar} />\n      <Typography variant=\"h5\">\n        {user.username}\n      </Typography>\n    </div>\n  );\n});\n\nexport default UserInfo;\n\n","import React, { useMemo, useEffect, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  SwipeableDrawer,\n  List,\n  ListItem,\n  Typography,\n  Divider\n} from '@material-ui/core';\nimport { ExitToApp as LogoutIcon, Info } from '@material-ui/icons';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport UserInfo from './UserInfo';\nimport { useAuth } from '../../hooks/useAuth';\n\ninterface PropTypes {\n  isOpen: boolean;\n  setIsOpen: (value: boolean) => void;\n}\n\nconst useStyles = makeStyles(theme => ({\n  item: {\n    padding: theme.spacing(2, 14, 2, 2)\n  },\n  icon: {\n    marginRight: theme.spacing(1)\n  }\n}));\n\n\nconst Drawer: React.FC<PropTypes> = React.memo(({ isOpen, setIsOpen }) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { user, logout } = useAuth();\n\n  const handleOpen = useCallback(() => {\n    setIsOpen(true);\n  }, [setIsOpen]);\n\n  const handleClose = useCallback(() => {\n    setIsOpen(false);\n  }, [setIsOpen]);\n\n  useEffect(() => {\n    // Close drawer on navigations\n    return history.listen(() => handleClose());\n  }, [history, handleClose]);\n\n  const handleLogout = useCallback(() => {\n    logout();\n    history.push('/login');\n  }, [logout, history]);\n\n  const handleAbout = useCallback(() => {\n    history.push('/');\n  }, [history]);\n\n  const iOS = useMemo(() => {\n    return /iPad|iPhone|iPod/.test(navigator.userAgent);\n  }, []);\n\n  return (\n    <SwipeableDrawer\n      anchor=\"left\"\n      open={isOpen}\n      onOpen={handleOpen}\n      onClose={handleClose}\n      disableBackdropTransition={!iOS}\n      disableDiscovery={iOS}\n    >\n      {user && <UserInfo user={user} />}\n      <Divider />\n      <List>\n        {user && (\n          <ListItem button className={classes.item} onClick={handleLogout}>\n            <LogoutIcon className={classes.icon} />\n            <Typography>Logout</Typography>\n          </ListItem>\n        )}\n        <ListItem button className={classes.item} onClick={handleAbout}>\n          <Info className={classes.icon} />\n          <Typography>About</Typography>\n        </ListItem>\n      </List>\n    </SwipeableDrawer>\n  );\n});\n\nexport default Drawer;\n\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  IconButton,\n  Typography,\n  useMediaQuery\n} from '@material-ui/core';\nimport {\n  AccountCircle,\n  Notifications,\n  Home,\n  Menu\n} from '@material-ui/icons';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nimport { useAuth } from '../../hooks/useAuth';\nimport MobileHeader from './MobileHeader';\nimport BottomBar from './BottomBar';\nimport BrowserHeader from './BrowserHeader';\nimport Avatar from '../Avatar/Avatar';\nimport Drawer from '../Drawer/Drawer';\n\n\nconst useStyles = makeStyles(theme => ({\n  logo: {\n    fontWeight: 'bold',\n    cursor: 'pointer',\n    color: 'white'\n  },\n  avatar: {\n    width: theme.spacing(3),\n    height: theme.spacing(3)\n  }\n}));\n\nconst Header: React.FC = React.memo(() => {\n  const classes = useStyles();\n  const { user } = useAuth();\n  const theme = useTheme();\n  const history = useHistory();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const [isDrawerOpen, setIsDrawerOpen] = useState<boolean>(false);\n\n  const handleHome = (): void => {\n    history.push('/');\n  };\n\n  const handleFeed = (): void => {\n    history.push('/feed');\n  };\n\n  const handleProfile = (): void => {\n    if (user) history.push(`/profile/${user.username}`);\n    else history.push('/login');\n  };\n\n  const handleNotifications = (): void => {\n    history.push('/notifications');\n  };\n\n  const handleMenu = (): void => {\n    setIsDrawerOpen(true);\n  };\n\n  const feed = (\n    <IconButton onClick={handleFeed}>\n      <Home />\n    </IconButton>\n  );\n\n  const notifications = (\n    <IconButton onClick={handleNotifications}>\n      <Notifications />\n    </IconButton>\n  );\n\n  const menu = (\n    <IconButton onClick={handleMenu}>\n      <Menu />\n    </IconButton>\n  );\n\n  const logo = (\n    <Typography variant=\"h5\" className={classes.logo} onClick={handleHome}>\n      Which\n    </Typography>\n  );\n\n  const profile = (\n    <IconButton onClick={handleProfile}>\n      {\n        user?.avatarUrl\n          ? <Avatar className={classes.avatar} user={user} />\n          : <AccountCircle className={classes.avatar} />\n      }\n    </IconButton>\n  );\n\n  return isMobile ? (\n    <>\n      <MobileHeader logo={logo} menu={menu} />\n      <BottomBar feed={feed} profile={profile} notifications={notifications} />\n      <Drawer isOpen={isDrawerOpen} setIsOpen={setIsDrawerOpen} />\n    </>\n  ) : (\n    <>\n      <BrowserHeader menu={menu} logo={logo} profile={profile} notifications={notifications} feed={feed} />\n      <Drawer isOpen={isDrawerOpen} setIsOpen={setIsDrawerOpen} />\n    </>\n  );\n});\n\nexport default Header;\n\n","import { useState, useCallback } from 'react';\nimport uploadFileToS3 from '../../utils/uploadFileToS3';\n\ninterface Hook {\n  file: File | string | undefined;\n  setFile: (value: File | string | undefined) => void;\n  resolve: () => Promise<string>;\n  progress: number;\n}\n\nexport default (): Hook => {\n  const [file, setFile] = useState<File | string>();\n  const [progress, setProgress] = useState<number>(0);\n\n  const resolve = useCallback(async (quality?: number): Promise<string> => {\n    // Indicate start\n    setProgress(0.01);\n\n    if (file instanceof File) return uploadFileToS3(file, quality, setProgress);\n    return file || '';\n  }, [file]);\n\n  return {\n    file,\n    setFile,\n    resolve,\n    progress\n  };\n};\n","import React, { useState } from 'react';\nimport {\n  Button,\n  TextField,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle\n} from '@material-ui/core';\n\ninterface PropTypes {\n  isOpen: boolean;\n  setIsOpen: (value: boolean) => void;\n  callback: (url: string) => void;\n}\n\nconst Modal: React.FC<PropTypes> = ({ setIsOpen, isOpen, callback }) => {\n  const [url, setUrl] = useState<string>('');\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  const handleSubmit = () => {\n    let result = url;\n    if (url.startsWith('https://www.instagram.com/')) {\n      const match = url.match('/p/(.*)/');\n      const id = match && match[1];\n      result = `https://www.instagram.com/p/${id}/media/?size=l`;\n    } else if (url.startsWith('https://drive.google.com/')) {\n      const match = url.match('/d/(.*)/');\n      const fileId = match && match[1];\n      result = `https://drive.google.com/uc?export=view&id=${fileId}`;\n    }\n    callback(result || '');\n    handleClose();\n  };\n\n  const handleChange = (event:React.ChangeEvent<HTMLInputElement>) => {\n    setUrl(event.target.value);\n  };\n\n  return (\n    <div>\n      <Dialog open={isOpen} onClose={handleClose}>\n        <DialogTitle>Upload via link</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Provide a valid URL to your image:\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Image URL\"\n            type=\"text\"\n            fullWidth\n            autoComplete=\"off\"\n            onChange={handleChange}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} color=\"primary\" disabled={!url.length}>\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default Modal;\n","import React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport LinkIcon from '@material-ui/icons/Link';\nimport Modal from './Modal';\n\ninterface PropTypes {\n  callback: (url: string) => void;\n}\n\nconst AttachLink: React.FC<PropTypes> = ({ callback, children }) => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  const handleOpen = (): void => {\n    setIsOpen(true);\n  };\n\n  const defaultButton = (\n    <Button\n      onClick={handleOpen}\n      variant=\"outlined\"\n      color=\"primary\"\n      startIcon={<LinkIcon />}\n    >\n      Link\n    </Button>\n  );\n\n  const child = children && React.Children.only(children);\n\n  return (\n    <>\n      <Modal callback={callback} isOpen={isOpen} setIsOpen={setIsOpen} />\n      {\n        React.isValidElement(child)\n          ? React.cloneElement(child, { onClick: handleOpen })\n          : defaultButton\n      }\n    </>\n  );\n};\n\nexport default AttachLink;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  CardActionArea,\n  Typography,\n  CircularProgress\n} from '@material-ui/core';\nimport { Check, CancelOutlined } from '@material-ui/icons';\n\nimport AttachLink from '../../components/AttachLink/AttachLink';\nimport FileUpload from '../../components/FileUpload/FileUpload';\nimport BackgroundImage from '../../components/Image/BackgroundImage';\nimport getLocalFileUrl from '../../utils/getLocalFileUrl';\n\ninterface PropTypes {\n  callback: (file?: File | string) => void;\n  progress?: number;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '50%',\n    display: 'flex'\n  },\n  mediaRoot: {\n    display: 'flex'\n  },\n  uploadRoot: {\n    flex: 1,\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(4)\n    },\n    [theme.breakpoints.down('sm')]: {\n      padding: theme.spacing(8, 1)\n    }\n  },\n  outline: {\n    padding: theme.spacing(2),\n    flex: 1,\n    border: '2px dashed gray',\n    borderRadius: theme.spacing(1),\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  clearIcon: {\n    opacity: '.5',\n    fontSize: 50\n  },\n  overlay: {\n    backgroundColor: 'rgba(0, 0, 0, 0.45)',\n    color: 'white',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    transitionDuration: '0.5s'\n  },\n  invisible: {\n    backgroundColor: 'rgba(0, 0, 0, 0)'\n  },\n  icon: {\n    color: 'white'\n  }\n}));\n\n\nconst ImageInput: React.FC<PropTypes> = ({ callback, progress }) => {\n  const classes = useStyles();\n  const [url, setUrl] = useState<string>();\n\n  const handleClear = (): void => {\n    setUrl(undefined);\n    callback(undefined);\n  };\n\n  const childrenCallback = (value: File | string) => {\n    if (value instanceof File) {\n      getLocalFileUrl(value).then(localUrl => setUrl(localUrl));\n    } else setUrl(value);\n\n    callback(value);\n  };\n\n  const Upload = (\n    <div className={classes.uploadRoot}>\n      <div className={classes.outline}>\n        <FileUpload callback={childrenCallback} />\n        <Typography variant=\"h6\"> or </Typography>\n        <AttachLink callback={childrenCallback} />\n      </div>\n    </div>\n  );\n\n  const Media = (\n    <CardActionArea onClick={handleClear} className={classes.mediaRoot} disabled={Boolean(progress)}>\n      <BackgroundImage src={url} />\n      <div className={`${classes.overlay} ${progress === 100 && classes.invisible}`}>\n        {\n          progress\n            ? progress < 100\n              ? <CircularProgress variant=\"static\" value={progress} className={classes.icon} />\n              : <Check className={classes.icon} fontSize=\"large\" />\n            : <CancelOutlined className={classes.icon} fontSize=\"large\" />\n        }\n      </div>\n    </CardActionArea>\n  );\n\n  return (\n    <div className={classes.root}>\n      {url ? Media : Upload}\n    </div>\n  );\n};\n\nexport default ImageInput;\n","export default (file: File): Promise<string> => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      if (typeof reader.result === 'string') resolve(reader.result);\n    }, false);\n\n    reader.addEventListener('error', () => {\n      reject(new Error('Error reading the file'));\n    }, false);\n\n    if (file) reader.readAsDataURL(file);\n  });\n};\n","import React, { useState, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  AppBar,\n  Dialog,\n  Toolbar,\n  Typography,\n  IconButton,\n  Divider,\n  Slide,\n  useMediaQuery,\n  useTheme\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport CloseIcon from '@material-ui/icons/Close';\n\ninterface PropTypes {\n  title: string;\n  actionIcon?: JSX.Element;\n  handleAction?: () => void;\n  isActionDisabled?: boolean;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.default\n  },\n  content: {\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(4)\n    }\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n}));\n\nconst Transition = React.forwardRef((\n  props: TransitionProps & { children?: React.ReactElement },\n  ref: React.Ref<unknown>\n) => <Slide direction=\"left\" ref={ref} {...props} />);\n\nconst ModalScreen: React.FC<PropTypes> = ({ title, actionIcon, handleAction, isActionDisabled, children }) => {\n  const [isOpen, setIsOpen] = useState<boolean>(true);\n  const classes = useStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const history = useHistory();\n\n  const handleClose = useCallback(() => setIsOpen(false), [setIsOpen]);\n  const onExited = useCallback(() => history.goBack(), [history]);\n\n  const handleClickAction = useCallback(async () => {\n    if (handleAction) await handleAction();\n    return handleClose();\n  }, [handleAction, handleClose]);\n\n  return (\n    <Dialog\n      open={isOpen}\n      onClose={handleClose}\n      onExited={onExited}\n      TransitionComponent={Transition}\n      PaperProps={{ className: classes.root }}\n      fullScreen={isMobile}\n      maxWidth=\"md\"\n      fullWidth\n    >\n      <AppBar position=\"static\">\n        <Toolbar className={classes.toolbar}>\n          <IconButton onClick={handleClose}>\n            <CloseIcon />\n          </IconButton>\n          <Typography variant=\"h6\">\n            { title }\n          </Typography>\n          <IconButton onClick={handleClickAction} disabled={isActionDisabled}>\n            { actionIcon }\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n      <Divider />\n      <div className={classes.content}>\n        { children }\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ModalScreen;\n","import React, { ChangeEvent, useState, useMemo } from 'react';\nimport Bluebird from 'bluebird';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Card, Container, LinearProgress, InputBase, Typography } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport { useSnackbar } from 'notistack';\n\nimport useS3Preupload from './useS3Preupload';\nimport ImageInput from './ImageInput';\nimport ModalScreen from '../../components/ModalScreen/ModalScreen';\nimport Message from '../../components/Message/Message';\nimport UserStrip from '../../components/UserStrip/UserStrip';\nimport { post } from '../../requests';\nimport { useFeed, useProfile } from '../../hooks/APIClient';\nimport { useAuth } from '../../hooks/useAuth';\n\n\nconst useStyles = makeStyles(theme => ({\n  images: {\n    height: theme.spacing(50),\n    display: 'flex'\n  },\n  textarea: {\n    width: '100%',\n    height: 100\n  },\n  description: {\n    padding: theme.spacing(1, 2)\n  }\n}));\n\n\nconst PollCreation: React.FC = () => {\n  const [description, setDescription] = useState<string>('');\n  const classes = useStyles();\n  const { enqueueSnackbar } = useSnackbar();\n  const { user } = useAuth();\n  const { mutate: updateFeed } = useFeed();\n  const { mutate: updateProfile } = useProfile(user?.username || '');\n  const {\n    file: left,\n    setFile: setLeft,\n    resolve: resolveLeft,\n    progress: leftProgress\n  } = useS3Preupload();\n  const {\n    file: right,\n    setFile: setRight,\n    resolve: resolveRight,\n    progress: rightProgress\n  } = useS3Preupload();\n\n  const handleDescriptionChange = (e: ChangeEvent<HTMLTextAreaElement|HTMLInputElement>) => {\n    setDescription(e.target.value);\n  };\n\n  const handleSubmit = async () => {\n    try {\n      const [leftUrl, rightUrl] = await Bluebird.all([resolveLeft(), resolveRight()]);\n      const contents = {\n        left: { url: leftUrl },\n        right: { url: rightUrl }\n      };\n\n      post('/polls/', { contents, description }).then(() => {\n        updateFeed();\n        updateProfile();\n        enqueueSnackbar('Your poll has been successfully created!', { variant: 'success' });\n      });\n    } catch (error) {\n      enqueueSnackbar('Failed to create a poll. Please, try again.', { variant: 'error' });\n    }\n  };\n\n  const isSubmitting = useMemo(() => leftProgress + rightProgress > 0, [leftProgress, rightProgress]);\n\n  return (\n    <ModalScreen\n      title=\"Create a poll\"\n      actionIcon={<SendIcon />}\n      handleAction={handleSubmit}\n      isActionDisabled={!(left && right) || isSubmitting}\n    >\n      <Container maxWidth=\"sm\" disableGutters>\n        <Card elevation={3}>\n          {user && <UserStrip user={user} />}\n          <Typography>\n            <InputBase\n              multiline\n              fullWidth\n              placeholder=\"Add description\"\n              onChange={handleDescriptionChange}\n              className={classes.description}\n              readOnly={isSubmitting}\n            />\n          </Typography>\n          <div className={classes.images}>\n            <ImageInput callback={setLeft} progress={leftProgress} />\n            <ImageInput callback={setRight} progress={rightProgress} />\n          </div>\n        </Card>\n        {isSubmitting && (\n          <>\n            <LinearProgress color=\"primary\" />\n            <Message\n              tagline=\"You can close this window now\"\n              message=\"We will upload your images in the background.\"\n              noMargin\n            />\n          </>\n        )}\n      </Container>\n    </ModalScreen>\n  );\n};\n\nexport default PollCreation;\n","import React from 'react';\nimport { Switch, Route, useLocation } from 'react-router-dom';\nimport { Location } from 'history';\n\nimport PollCreation from '../PollCreation/PollCreation';\n\nconst Profile = React.lazy(() => import('../Profile/Profile'));\nconst Feed = React.lazy(() => import('../Feed/Feed'));\nconst Login = React.lazy(() => import('../Login/Login'));\nconst Registration = React.lazy(() => import('../Registration/Registration'));\nconst Home = React.lazy(() => import('../Home/Home'));\nconst Notifications = React.lazy(() => import('../Notifications/Notifications'));\n\nexport interface LocationState {\n  background: Location;\n}\n\nconst Router: React.FC = React.memo(() => {\n  const location = useLocation<LocationState>();\n  const background = location.state && location.state.background;\n\n  const ModalSwitch = (\n    <Switch>\n      <Route path=\"/new\" component={PollCreation} />\n    </Switch>\n  );\n\n  return (\n    <>\n      {ModalSwitch}\n      <Switch location={background || location}>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/login\" component={Login} />\n        <Route exact path=\"/registration\" component={Registration} />\n        <Route exact path=\"/notifications\" component={Notifications} />\n        <Route path=\"/feed\" component={Feed} />\n        <Route path=\"/profile/:username\" component={Profile} />\n      </Switch>\n    </>\n  );\n});\n\n\nexport default Router;\n\n","import React, {\n  useEffect,\n  useState,\n  useCallback,\n  useMemo\n} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { get } from '../../requests';\nimport Loading from '../../components/Loading/Loading';\nimport EmptyState from '../../components/EmptyState/EmptyState';\n\nconst DYNO_WAKEUP_TIME = 30;\n\nconst messages = [\n  '',\n  'It looks like our server is sleeping.',\n  `We need about ${DYNO_WAKEUP_TIME} seconds to wake it up.`,\n  'Please, stay with us.',\n  'We love you <3',\n  'Almost done.'\n];\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center'\n  },\n  hidden: {\n    visibility: 'hidden',\n    position: 'absolute',\n    width: 0,\n    height: 0,\n    overflow: 'hidden'\n  },\n  img: {\n    width: theme.spacing(24)\n  }\n}));\n\n// TODO: if Dyno is sleeping, use this time to pre-load pages\n\nconst DynoWaiter: React.FC = ({ children }) => {\n  const classes = useStyles();\n  const [isReady, setIsReady] = useState<boolean>(false);\n  const [time, setTime] = useState<number>(0);\n\n  const tick = useCallback((): void => setTime(value => value + 1), [setTime]);\n\n  useEffect(() => {\n    const interval = setInterval(tick, 1000);\n    get('/ping').then(() => {\n      setIsReady(true);\n      clearInterval(interval);\n    });\n    return () => clearInterval(interval);\n  }, [setIsReady, tick]);\n\n  const message = useMemo(() => {\n    const interval = DYNO_WAKEUP_TIME / messages.length;\n    const index = Math.floor(time / interval);\n    const lastIndex = messages.length - 1;\n    return messages[index > lastIndex ? lastIndex : index];\n  }, [time]);\n\n  return (\n    <>\n      {!isReady && (\n        <>\n          <Loading />\n          {message && <EmptyState variant=\"waiting\" smart message={message} />}\n        </>\n      )}\n      <div className={isReady ? '' : classes.hidden}>\n        {children}\n      </div>\n    </>\n  );\n};\n\n\nexport default DynoWaiter;\n\n","import React, { Suspense, useEffect } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useMediaQuery } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { useHistory } from 'react-router-dom';\n\nimport Router, { LocationState } from './Router';\nimport DynoWaiter from './DynoWaiter';\nimport Loading from '../../components/Loading/Loading';\nimport EmptyState from '../../components/EmptyState/EmptyState';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    [theme.breakpoints.down('sm')]: {\n      padding: theme.spacing(10, 0, 12, 0)\n    },\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(15, 5, 8, 5)\n    }\n  }\n}));\n\nconst ErrorFallback: React.FC = () => (\n  <EmptyState variant=\"error\" message=\"Try reloading the page.\" />\n);\n\nconst Page: React.FC = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const history = useHistory<LocationState>();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  useEffect(() => history.listen(update => {\n    if (!update.state?.background) window.scrollTo(0, 0);\n  }), [history]);\n\n  return (\n    <SnackbarProvider\n      preventDuplicate\n      maxSnack={isMobile ? 1 : 3}\n      anchorOrigin={\n        isMobile\n          ? { vertical: 'top', horizontal: 'right' }\n          : { vertical: 'bottom', horizontal: 'left' }\n      }\n    >\n      <div className={classes.root}>\n        <ErrorBoundary FallbackComponent={ErrorFallback}>\n          <Suspense fallback={<Loading />}>\n            <DynoWaiter>\n              <Router />\n            </DynoWaiter>\n          </Suspense>\n        </ErrorBoundary>\n      </div>\n    </SnackbarProvider>\n  );\n};\n\n\nexport default Page;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter } from 'react-router-dom';\nimport teal from '@material-ui/core/colors/teal';\nimport 'typeface-roboto';\n\nimport Header from './components/Header/Header';\nimport Page from './containers/Page/Page';\nimport { AuthProvider } from './hooks/useAuth';\n\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: teal[700],\n      light: teal[100]\n    },\n    secondary: {\n      main: teal[900]\n    }\n  }\n});\n\n\nconst App: React.FC = () => {\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          <Header />\n          <Page />\n        </ThemeProvider>\n      </AuthProvider>\n    </BrowserRouter>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n","import axios from 'axios';\nimport _ from 'lodash';\n\nconst baseURL = process.env.NODE_ENV === 'production'\n  ? 'https://which-api.herokuapp.com'\n  : 'http://localhost:3030';\n\nconst requests = axios.create({ baseURL });\n\nrequests.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  return _.set(config, 'headers.Authorization', token);\n});\n\nrequests.interceptors.response.use(response => response, error => {\n  if (error.message === 'Request failed with status code 401' && localStorage.getItem('token')) {\n    localStorage.removeItem('remember');\n    window.location.reload();\n  }\n  return Promise.reject(error);\n});\n\nexport const {\n  get, post, put, patch\n} = requests;\nexport default requests;\n\n","import { useState, useCallback } from 'react';\n\ntype Value = string | null;\ntype Setter = (value: Value) => void;\n\nexport default (key: string): [Value, Setter] => {\n  const [state, setState] = useState<Value>(() => localStorage.getItem(key) || null);\n\n  const update: Setter = useCallback(value => {\n    if (value) localStorage.setItem(key, value);\n    else localStorage.removeItem(key);\n    setState(value);\n  }, [key]);\n\n  return [state, update];\n};\n","import React, {\n  useEffect, useCallback, useMemo, useContext, createContext\n} from 'react';\nimport { User } from 'which-types';\nimport { post } from '../requests';\nimport { useUser } from './APIClient';\nimport useLocalStorage from './useLocalStorage';\n\n\ninterface ContextType {\n  user: User | undefined,\n  login: (username: string, password: string, remember?: boolean) => Promise<boolean>;\n  logout: () => void;\n  isAuthenticated: boolean;\n}\n\nconst authContext = createContext<ContextType>({\n  user: undefined,\n  login: async () => false,\n  logout: () => {},\n  isAuthenticated: false\n});\n\nconst useProvideAuth = () => {\n  const [remember, setRemember] = useLocalStorage('remember');\n  const [username, setUsername] = useLocalStorage('username');\n  const [token, setToken] = useLocalStorage('token');\n  const { data: user } = useUser(username);\n\n  const isAuthenticated = useMemo(() => Boolean(username), [username]);\n\n  const logout = useCallback(() => {\n    setToken(null);\n    setUsername(null);\n  }, [setToken, setUsername]);\n\n  useEffect(() => {\n    // If should not remember, logout\n    if (!remember) logout();\n  }, [remember, logout]);\n\n\n  const login: ContextType['login'] = (name, password, shouldRemember = true) => {\n    return post('/authentication', {\n      strategy: 'local',\n      username: name,\n      password\n    }).then(response => {\n      setToken(response.data.accessToken);\n      setUsername(name);\n      setRemember(shouldRemember ? 'true' : null);\n      return true;\n    }).catch(() => false);\n  };\n\n  return {\n    user, login, logout, token, isAuthenticated\n  };\n};\n\nexport const AuthProvider: React.FC = ({ children }) => {\n  const auth = useProvideAuth();\n  const { Provider } = authContext;\n  return <Provider value={auth}>{children}</Provider>;\n};\n\nexport const useAuth = (): ContextType => {\n  return useContext(authContext);\n};\n\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Avatar as AvatarBase } from '@material-ui/core';\nimport { User } from 'which-types';\n\ninterface PropTypes {\n  user?: User;\n  className?: string;\n}\n\nconst Avatar: React.FC<PropTypes> = ({ user, className }) => {\n  const history = useHistory();\n\n  const handleClick = () => {\n    if (user) history.push(`/profile/${user.username}`);\n  };\n\n  return (\n    <AvatarBase\n      src={user?.avatarUrl}\n      onClick={handleClick}\n      className={className}\n      style={{ cursor: 'pointer' }}\n    />\n  );\n};\n\nexport default Avatar;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\ninterface PropTypes {\n  tagline?: string;\n  message?: string;\n  noMargin?: boolean;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  margin: {\n    marginTop: theme.spacing(6)\n  },\n  content: {\n    margin: theme.spacing(2)\n  }\n}));\n\nconst Message: React.FC<PropTypes> = React.memo(({ tagline, message, noMargin, children }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={`${classes.root} ${!noMargin && classes.margin}`}>\n      <div className={classes.content}>\n        {children}\n      </div>\n      <Typography variant=\"h5\">\n        {tagline}\n      </Typography>\n      <Typography color=\"textSecondary\">\n        {message}\n      </Typography>\n    </div>\n  );\n});\n\nexport default Message;\n","import useSWR, { responseInterface } from 'swr';\nimport { User, Poll, Feedback } from 'which-types';\nimport axios from 'axios';\nimport { get } from '../requests';\n\ntype Response<T> = responseInterface<T, Error>;\n\nconst fetcher = (endpoint: string) => get(endpoint).then(response => response.data);\n\nexport const useUser = (username: string | null): Response<User> => {\n  return useSWR(\n    username && `/users?username=${username}`,\n    (url: string) => get(url).then(response => response.data[0])\n  );\n};\n\nexport const useProfile = (username: string): Response<Poll[]> => {\n  return useSWR(username && `/profiles/${username}`, fetcher);\n};\n\nexport const useFeed = (): Response<Poll[]> => {\n  return useSWR('/feed', fetcher, { revalidateOnFocus: false });\n};\n\nexport const useFeedback = (): Response<Feedback[]> => {\n  return useSWR('/feedback', fetcher);\n};\n\nexport interface Release {\n  url: string;\n  description: string;\n  version: string;\n  name: string;\n}\n\nexport const usePatchNotes = (): Response<Release> => {\n  const fetchRelease = () => axios.get('https://api.github.com/repos/which-ecosystem/which/releases/latest')\n    .then(({ data }) => ({\n      name: data.name,\n      url: data.html_url,\n      version: data.tag_name,\n      description: data.body\n    }));\n  return useSWR('/patchnotes', fetchRelease, { revalidateOnFocus: false });\n};\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport VerifiedIcon from '@material-ui/icons/CheckCircleOutline';\nimport { CardHeader } from '@material-ui/core/';\nimport { User } from 'which-types';\n\nimport Avatar from '../Avatar/Avatar';\n\n\ninterface PropTypes {\n  user: User;\n  info?: string | JSX.Element\n}\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  verified: {\n    marginLeft: theme.spacing(0.5),\n    width: theme.spacing(2),\n    height: theme.spacing(2)\n  }\n}));\n\n\nconst UserStrip: React.FC<PropTypes> = ({ user, info }) => {\n  const classes = useStyles();\n  const { username, verified } = user;\n\n  const avatar = <Avatar user={user} />;\n\n  const title = (\n    <div className={classes.root}>\n      {username}\n      {verified && <VerifiedIcon color=\"primary\" className={classes.verified} />}\n    </div>\n  );\n\n  return <CardHeader avatar={avatar} title={title} subheader={info} />;\n};\n\nexport default UserStrip;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Image from '../Image/Image';\nimport Message from '../Message/Message';\nimport noContentIcon from '../../assets/noContent.svg';\nimport constructionIcon from '../../assets/construction.svg';\nimport serverIcon from '../../assets/server.svg';\nimport errorIcon from '../../assets/error.svg';\n\n\ninterface PropTypes {\n  variant?: 'default' | 'construction' | 'waiting' | 'error';\n  message?: string;\n  smart?: boolean;\n}\n\nconst useStyles = makeStyles(theme => ({\n  img: {\n    width: theme.spacing(24)\n  }\n}));\n\nconst CONTEXT = {\n  default: {\n    icon: noContentIcon,\n    tagline: 'No content'\n  },\n  construction: {\n    icon: constructionIcon,\n    tagline: 'Coming soon'\n  },\n  waiting: {\n    icon: serverIcon,\n    tagline: 'Waiting for server'\n  },\n  error: {\n    icon: errorIcon,\n    tagline: 'Something went wrong'\n  }\n};\n\nconst EmptyState: React.FC<PropTypes> = ({ variant = 'default', smart = false, message }) => {\n  const classes = useStyles();\n  const { icon, tagline } = CONTEXT[variant];\n\n  const Component = smart ? Image : 'img';\n\n  return (\n    <Message tagline={tagline} message={message}>\n      <Component src={icon} className={classes.img} alt=\"No content\" />\n    </Message>\n  );\n};\n\nexport default EmptyState;\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Message from '../Message/Message';\n\ninterface PropTypes {\n  tagline?: string;\n  message?: string;\n}\n\nconst Loading: React.FC<PropTypes> = React.memo(({ tagline, message }) => {\n  return (\n    <Message tagline={tagline} message={message}>\n      <CircularProgress color=\"primary\" />\n    </Message>\n  );\n});\n\nexport default Loading;\n\n","import React, { useState, useCallback, useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ErrorIcon from '@material-ui/icons/BrokenImage';\nimport grey from '@material-ui/core/colors/grey';\n\ninterface PropTypes {\n  src?: string;\n  alt?: string;\n  className?: string;\n  animationDuration?: number;\n  disableLoading?: boolean;\n}\n\ntype Status = 'success' | 'loading' | 'error';\n\nconst useStyles = makeStyles(theme => ({\n  image: {\n    imageOrientation: 'from-image'\n  },\n  container: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  success: {\n    opacity: '100%',\n    filterBrightness: '100%',\n    filterSaturate: '100%'\n  },\n  loading: {\n    opacity: 0,\n    filterBrightness: 0,\n    filterSaturate: '20%',\n    position: 'absolute'\n  },\n  error: {\n    display: 'none'\n  },\n  errorIcon: {\n    color: grey[300],\n    width: theme.spacing(6),\n    height: theme.spacing(6)\n  }\n}));\n\nconst Image: React.FC<PropTypes> = React.memo(({\n  src,\n  alt,\n  className,\n  animationDuration = 1000,\n  disableLoading = false\n}) => {\n  const classes = useStyles();\n  const [status, setStatus] = useState<Status>('loading');\n\n  const handleLoad = useCallback((): void => {\n    setStatus('success');\n  }, [setStatus]);\n\n  const handleError = useCallback((): void => {\n    setStatus('error');\n  }, [setStatus]);\n\n  const transition = useMemo(() => `\n    filterBrightness ${animationDuration * 0.75}ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    filterSaturate ${animationDuration}ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    opacity ${animationDuration / 2}ms cubic-bezier(0.4, 0.0, 0.2, 1)\n  `, [animationDuration]);\n\n  const image = (\n    <img\n      src={src}\n      alt={alt}\n      className={`${classes.image} ${classes[status]} ${className}`}\n      style={{ transition }}\n      onLoad={handleLoad}\n      onError={handleError}\n    />\n  );\n\n  return (\n    <>\n      {src && image}\n      {\n        status !== 'success' && (\n          <div className={classes.container}>\n            {\n              (status === 'error' || !src)\n                ? <ErrorIcon className={classes.errorIcon} />\n                : (!disableLoading && <CircularProgress color=\"primary\" />)\n            }\n          </div>\n        )\n      }\n    </>\n  );\n});\n\nexport default Image;\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Image from './Image';\n\ninterface PropTypes {\n  src?: string;\n  alt?: string;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    overflow: 'hidden'\n  },\n  image: {\n    objectFit: 'cover',\n    pointerEvents: 'none',\n    width: '100%',\n    minHeight: '100%'\n  }\n});\n\nconst BackgroundImage: React.FC<PropTypes> = ({ src, alt }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <Image src={src} alt={alt} className={classes.image} />\n    </div>\n  );\n};\n\nexport default BackgroundImage;\n\n"],"sourceRoot":""}
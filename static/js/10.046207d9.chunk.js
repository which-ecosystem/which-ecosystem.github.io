(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[10],{242:function(e,t,a){"use strict";var n=a(0),r=a.n(n),i=a(60),o=a(78),c=Object(i.a)({root:{position:"absolute",width:"100%",height:"100%",overflow:"hidden"},image:{objectFit:"cover",pointerEvents:"none",width:"100%",minHeight:"100%"}});t.a=function(e){var t=e.src,a=e.alt,n=c();return r.a.createElement("div",{className:n.root},r.a.createElement(o.a,{src:t,alt:a,className:n.image}))}},276:function(e,t,a){"use strict";var n=a(63),r=a(0),i=a.n(r),o=a(10),c=a(185),l=a(186),s=a(434),u=a(60),h=a(324),d=a.n(h),m=Object(u.a)((function(e){var t;return{root:(t={zIndex:1e3,position:"fixed"},Object(n.a)(t,e.breakpoints.down("sm"),{right:e.spacing(2),bottom:e.spacing(8)}),Object(n.a)(t,e.breakpoints.up("md"),{right:e.spacing(5),bottom:e.spacing(5)}),t)}}));t.a=function(e){var t=e.hideOnScroll,a=void 0!==t&&t,n=m(),r=Object(o.f)(),u=Object(c.a)();return i.a.createElement(l.a,{appear:!1,direction:"up",in:!a||!u},i.a.createElement(s.a,{onClick:function(){r.push("/new")},className:n.root,color:"secondary"},i.a.createElement(d.a,null)))}},293:function(e,t,a){"use strict";var n=a(62),r=a.n(n),i=a(71),o=a(12),c=a(0),l=a.n(c),s=a(336),u=a(81),h=a.n(u),d=a(338),m=a(321),v=a(60),g=a(323),p=a(412),f=a(79),b=a(322),w=a.n(b),E=Object(v.a)({root:{position:"absolute",color:"white",top:"86%",fontSize:20,textShadow:"0 0 3px black",display:"flex",alignItems:"center"},left:{left:30},right:{right:30}}),k=function(e){var t=e.value,a=e.which,n=e.like,r=E();return l.a.createElement("div",{className:"".concat(r.root," ").concat(r[a])},n&&l.a.createElement(w.a,null),"".concat(t,"%"))},O=a(76),j=a(242),y=a(27),C=a(32),x={month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},S=Object(v.a)((function(e){return{media:{display:"flex",height:e.spacing(50)},rateLine:{position:"relative",width:"100%",height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},highlight:{backgroundColor:"".concat(e.palette.primary.main," !important")},fillRateLine:{height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"}}})),R=l.a.memo((function(e){var t,a,n=e.poll,r=e.setPoll,i=S(),o=n.author,c=n.contents,s=c.left,u=c.right,h=n.vote,d=Object(f.b)().enqueueSnackbar,v=Object(C.b)().isAuthenticated,b=new Date(n.createdAt).toLocaleString("default",x),w=function(e){return function(){if(v)if(h)d("You have already voted in this poll",{variant:"error"});else{var t={which:e,pollId:n._id},a=Object(m.a)({},n);a.contents[e].votes+=1,a.vote=Object(m.a)({_id:"",authorId:"",createdAt:new Date},t),r(a),Object(y.c)("votes/",t)}else d("Unauthorized users can not vote in polls",{variant:"error"})}};s.votes||u.votes?a=100-(t=Math.round(s.votes/(s.votes+u.votes)*100)):(t=0,a=0);var E=s.votes>=u.votes?"left":"right";return l.a.createElement(g.a,{elevation:3},l.a.createElement(O.a,{user:o,info:b}),l.a.createElement("div",{className:i.media},l.a.createElement(p.a,{onDoubleClick:w("left"),className:i.media},l.a.createElement(j.a,{src:s.url}),l.a.createElement(k,{value:t,which:"left",like:"left"===(null===h||void 0===h?void 0:h.which)})),l.a.createElement(p.a,{onDoubleClick:w("right"),className:i.media},l.a.createElement(j.a,{src:u.url}),l.a.createElement(k,{value:a,which:"right",like:"right"===(null===h||void 0===h?void 0:h.which)}))),l.a.createElement("div",{className:"".concat(i.rateLine," ").concat("right"===E?i.highlight:"")},l.a.createElement("div",{className:"".concat(i.fillRateLine," ").concat("left"===E?i.highlight:""),style:{width:"".concat(t,"%")}})))})),N=l.a.memo((function(e){var t=e.polls,a=e.mutate,n=e.index,r=e.style,i=e._key,o=t[n],s=Object(c.useCallback)((function(e){var r=Object(d.a)(t);r[n]=e,a([],!1),a(r,!1)}),[a,n,t]);return l.a.createElement("div",{key:"".concat(i,"-").concat(o._id),style:r},l.a.createElement(R,{poll:o,setPoll:s}))}),(function(e,t){return e._key===t._key&&(e.index===t.index&&e.polls===t.polls)}));t.a=function(e){var t=e.polls,a=e.mutate,n=Object(c.useState)(10),u=Object(o.a)(n,2),d=u[0],m=u[1],v=Object(c.useCallback)((function(e){var n=e.index,r=e.style,i=e.key;return l.a.createElement(N,{polls:t,mutate:a,index:n,style:r,key:i,_key:i})}),[t,a]),g=Object(c.useCallback)(Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m((function(e){return e+10}));case 1:case"end":return e.stop()}}),e)}))),[]),p=Object(c.useCallback)((function(e){return e.index<d-1||d===t.length}),[d,t]),f=Object(c.useMemo)((function(){return h.a.min([d,t.length])||t.length}),[d,t.length]);return l.a.createElement(s.d,null,(function(e){var t=e.height,a=e.isScrolling,n=e.registerChild,r=e.onChildScroll,i=e.scrollTop;return l.a.createElement(s.a,{disableHeight:!0},(function(e){var o=e.width;return l.a.createElement("div",{ref:n},l.a.createElement(s.b,{isRowLoaded:p,loadMoreRows:g,rowCount:f,threshold:1},(function(e){var n=e.onRowsRendered,c=e.registerChild;return l.a.createElement(s.c,{autoHeight:!0,height:t,isScrolling:a,onScroll:r,rowCount:f,rowHeight:550,rowRenderer:v,scrollTop:i,width:o,containerStyle:{pointerEvents:"auto"},overscanRowCount:2,onRowsRendered:n,ref:c})})))}))}))}},435:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(413),o=a(293),c=a(276),l=a(52),s=a(49),u=a(32),h=a(75);t.default=function(){var e=Object(h.a)(),t=e.data,a=e.isValidating,n=e.mutate,d=Object(u.b)().isAuthenticated;return r.a.createElement(i.a,{maxWidth:"sm",disableGutters:!0},d&&r.a.createElement(c.a,{hideOnScroll:!0}),t?t.length?r.a.createElement(o.a,{polls:t,mutate:n}):r.a.createElement(s.a,null):a&&r.a.createElement(l.a,null))}}}]);
//# sourceMappingURL=10.046207d9.chunk.js.map
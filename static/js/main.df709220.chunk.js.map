{"version":3,"sources":["requests.ts","hooks/useAuth.tsx","components/UserStrip/UserStrip.tsx","components/Header/SearchBar.tsx","components/Header/Header.tsx","components/ScrollTopArrow/ScrollTopArrow.tsx","pages/ProfilePage/MoreMenu.tsx","pages/ProfilePage/Highlight.tsx","components/UploadImage/UploadImage.tsx","pages/ProfilePage/ProfileInfo.tsx","components/PollCard/PercentageBar.tsx","components/PollCard/PollCard.tsx","components/Feed/Feed.tsx","pages/ProfilePage/ProfilePage.tsx","pages/FeedPage/PollSubmissionImage.tsx","pages/FeedPage/PollSubmission.tsx","pages/FeedPage/FeedPage.tsx","pages/LoginPage/LoginPage.tsx","pages/RegistrationPage/RegistrationPage.tsx","components/ReviewCard/ReviewCard.tsx","pages/HomePage/ReviewForm.tsx","pages/HomePage/HomePage.tsx","pages/NotificationsPage/NotificationsPage.tsx","pages/Page.tsx","index.tsx"],"names":["requests","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","_","set","response","error","message","setItem","window","location","reload","Promise","reject","get","post","patch","put","authContext","createContext","user","setUser","login","a","logout","isAuthenticated","AuthProvider","children","auth","useState","useEffect","clear","userId","then","data","username","password","remember","strategy","me","accessToken","_id","catch","removeItem","Boolean","useProvideAuth","Provider","value","useAuth","useContext","useStyles","makeStyles","theme","root","display","alignItems","verified","marginLeft","spacing","width","height","avatar","cursor","UserStrip","info","classes","history","useHistory","avatarUrl","Avatar","src","alt","toUpperCase","onClick","push","className","title","color","CardHeader","subheader","position","background","borderRadius","padding","results","top","listItem","SearchBar","setResults","query","setQuery","debouncedQuery","setDebouncedQuery","handler","setTimeout","clearTimeout","handleClose","handleNavigate","index","SearchResults","ClickAwayListener","onClickAway","Paper","List","map","result","key","ListItem","button","length","Divider","InputBase","placeholder","onChange","event","target","trim","mobile","bottom","toolbar","justifyContent","browserToolbar","margin","logo","fontWeight","round","Header","useTheme","isMobile","useMediaQuery","breakpoints","down","handleHome","FeedButton","IconButton","NotificationsButton","ProfileButton","BrowserVersion","AppBar","Toolbar","Typography","variant","MobileVersion","left","zIndex","opacity","palette","primary","main","icon","fontSize","ScrollTopArrow","showScroll","setShowScroll","addEventListener","pageYOffset","scrollTo","moreMenu","right","MoreMenu","React","anchorEl","setAnchorEl","open","aria-label","aria-controls","aria-haspopup","currentTarget","Menu","id","keepMounted","onClose","PaperProps","style","maxHeight","ITEM_HEIGHT","MenuItem","menuButton","textAlign","menuNumber","menuText","Highlight","text","UploadImage","setIsOpen","isOpen","callback","url","setUrl","Dialog","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","label","type","fullWidth","autoComplete","DialogActions","Button","startsWith","match","fileId","disabled","name","profileMenu","borderBottom","badge","avatarContainer","skeleton","ProfileInfo","savedPolls","totalVotes","setUserInfo","userInfo","isLoading","input","setInput","dateSince","Date","createdAt","toLocaleDateString","Skeleton","animation","Badge","overlap","anchorOrigin","vertical","horizontal","badgeContent","res","textShadow","PercentageBar","which","like","DATE_FORMAT","month","day","year","hour","minute","images","imagesBlock","rateLine","backgroundColor","light","transitionDuration","highlight","fillRateLine","PollCard","leftPercentage","rightPercentage","initialPoll","poll","setPoll","author","contents","vote","enqueueSnackbar","useSnackbar","date","toLocaleString","handleVote","newVote","pollId","votes","authorId","Math","dominant","Card","CardActionArea","onDoubleClick","CardMedia","image","loader","marginTop","Feed","polls","RenderItem","CircularProgress","list","isScrolling","registerChild","onChildScroll","scrollTop","disableHeight","ref","autoHeight","onScroll","rowCount","rowHeight","rowRenderer","containerStyle","pointerEvents","overscanRowCount","ProfilePage","setPolls","setTotalVotes","isInfoLoading","setIsInfoLoading","isPollsLoading","setIsPollsLoading","useParams","redirect","reduce","total","current","Container","maxWidth","disableGutters","flexDirection","clearIcon","media","PollSubmissionImage","isModalOpen","setIsModalOpen","isMediaHover","setIsMediaHover","Upload","Media","onMouseEnter","onMouseLeave","marginBottom","emptyContents","PollSubmission","addPoll","expanded","setExpanded","setContents","readyToSubmit","Collapse","in","timeout","unmountOnExit","FeedPage","unshift","formHeader","formTransfer","transferButton","LoginPage","setError","setRemember","nameRef","useRef","passwordRef","handleSubmit","toLowerCase","success","noValidate","inputRef","helperText","FormControlLabel","control","Switch","checked","size","role","RegistrationPage","usernameRef","emailRef","required","email","ReviewCard","feedback","elevation","Rating","score","readOnly","CardContent","textField","ReviewForm","setScore","newScore","rows","multiline","version","overflow","signup","reviews","up","HomePage","feedbacks","setFeedbacks","rating","acc","handleSignUp","GithubLink","Link","href","TypescriptLink","ReactLink","FeathersLink","MUILink","EmailLink","Reviews","FeedbackSection","findIndex","Grid","container","item","xs","md","direction","process","toFixed","startIcon","NotificationsPage","Page","maxSnack","exact","path","component","createMuiTheme","teal","App","ThemeProvider","CssBaseline","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.df709220.chunk.js","sourcesContent":["import axios from 'axios';\nimport _ from 'lodash';\n\nconst baseURL = process.env.NODE_ENV === 'production'\n  ? 'https://which-api.herokuapp.com'\n  : 'http://localhost:3030';\n\nconst requests = axios.create({ baseURL });\n\nrequests.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  return _.set(config, 'headers.Authorization', token);\n});\n\nrequests.interceptors.response.use(response => response, error => {\n  if (error.message === 'Request failed with status code 401' && localStorage.getItem('token')) {\n    localStorage.setItem('shouldClear', 'true');\n    window.location.reload();\n  }\n  return Promise.reject(error);\n});\n\nexport const {\n  get, post, put, patch\n} = requests;\nexport default requests;\n\n","import React, {\n  useState, useEffect, useContext, createContext\n} from 'react';\nimport { User } from 'which-types';\nimport { post, get } from '../requests';\n\n\ninterface ContextType {\n  user: User | null,\n  setUser: (user: User) => void;\n  login: (username: string, password: string, remember?: boolean) => Promise<boolean>;\n  logout: () => void;\n  isAuthenticated: () => boolean;\n}\n\nconst authContext = createContext<ContextType>({\n  user: null,\n  setUser: () => {},\n  login: async () => false,\n  logout: () => {},\n  isAuthenticated: () => false\n});\n\nconst useProvideAuth = () => {\n  const [user, setUser] = useState<User | null>(null);\n\n  const login: ContextType['login'] = (username, password, remember = true) => {\n    return post('/authentication', {\n      strategy: 'local',\n      username,\n      password\n    }).then(response => {\n      const me = response.data.user;\n      const token = response.data.accessToken;\n      setUser(me);\n      localStorage.setItem('userId', me._id);\n      localStorage.setItem('token', token);\n      if (!remember) localStorage.setItem('shouldClear', 'true');\n      return true;\n    }).catch(() => false);\n  };\n\n  const logout = () => {\n    setUser(null);\n    localStorage.removeItem('userId');\n    localStorage.removeItem('token');\n  };\n\n  const isAuthenticated = () => Boolean(user);\n\n  useEffect(() => {\n    if (localStorage.getItem('shouldClear')) {\n      localStorage.clear();\n    }\n    const userId = localStorage.getItem('userId');\n    if (userId) {\n      get(`/users/${userId}`).then(response => {\n        setUser(response.data);\n      });\n    }\n  }, []);\n\n  return {\n    user, setUser, login, logout, isAuthenticated\n  };\n};\n\nexport const AuthProvider: React.FC = ({ children }) => {\n  const auth = useProvideAuth();\n  const { Provider } = authContext;\n  return <Provider value={auth}>{children}</Provider>;\n};\n\nexport const useAuth = (): ContextType => {\n  return useContext(authContext);\n};\n\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport VerifiedIcon from '@material-ui/icons/CheckCircleOutline';\nimport { Avatar, CardHeader } from '@material-ui/core/';\nimport { User } from 'which-types';\n\n\ninterface PropTypes {\n  user: User;\n  info?: string | JSX.Element\n}\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  verified: {\n    marginLeft: theme.spacing(0.5),\n    width: theme.spacing(2),\n    height: theme.spacing(2)\n  },\n  avatar: {\n    cursor: 'pointer'\n  }\n}));\n\n\nconst UserStrip: React.FC<PropTypes> = ({ user, info }) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { username, avatarUrl, verified } = user;\n\n  const handleNavigate = () => {\n    history.push(`/profile/${username}`);\n  };\n\n  const avatar = (\n    <Avatar\n      src={avatarUrl}\n      alt={username[0].toUpperCase()}\n      onClick={handleNavigate}\n      className={classes.avatar}\n    />\n  );\n\n  const title = (\n    <div className={classes.root}>\n      {username}\n      {verified && <VerifiedIcon color=\"primary\" className={classes.verified} />}\n    </div>\n  );\n\n  return <CardHeader avatar={avatar} title={title} subheader={info} />;\n};\n\nexport default UserStrip;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {\n  InputBase,\n  List,\n  ListItem,\n  Paper,\n  Divider,\n  ClickAwayListener\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { User } from 'which-types';\n\nimport { get } from '../../requests';\nimport UserStrip from '../UserStrip/UserStrip';\n\nconst INTERVAL = 300;\nconst LIMIT = 7;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'relative',\n    background: 'rgba(255, 255, 255, 0.5)',\n    borderRadius: '2px',\n    padding: theme.spacing(0.5),\n    display: 'flex',\n    alignItems: 'center'\n  },\n  results: {\n    position: 'absolute',\n    width: '100%',\n    top: theme.spacing(5)\n  },\n  listItem: {\n    padding: 0\n  }\n}));\n\nconst SearchBar: React.FC = () => {\n  const [results, setResults] = useState<User[]>([]);\n  const [query, setQuery] = useState<string>('');\n  const [debouncedQuery, setDebouncedQuery] = useState<string>(query);\n  const history = useHistory();\n  const classes = useStyles();\n\n  useEffect(() => {\n    const handler = setTimeout(() => setDebouncedQuery(query), INTERVAL);\n    return () => clearTimeout(handler);\n  }, [query]);\n\n  useEffect(() => {\n    const fetchPolls = () => {\n      get(`/users?username[$regex]=${debouncedQuery}&$limit=${LIMIT}`)\n        .then(response => setResults(response.data))\n        .catch(() => setResults([]));\n    };\n    if (debouncedQuery) fetchPolls();\n    else setResults([]);\n  }, [debouncedQuery]);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n    setQuery(event.target.value.trim());\n  };\n\n  const handleClose = () => {\n    setDebouncedQuery('');\n    setQuery('');\n  };\n\n  const handleNavigate = (index: number) => () => {\n    const { username } = results[index];\n    history.push(`/profile/${username}`);\n    handleClose();\n  };\n\n  const SearchResults = (\n    <ClickAwayListener onClickAway={handleClose}>\n      <Paper className={classes.results}>\n        <List>\n          {\n          results.map((result, index) => (\n            <div key={result._id}>\n              <ListItem button onClick={handleNavigate(index)} className={classes.listItem}>\n                <UserStrip user={result} />\n              </ListItem>\n              {(index < results.length - 1) && <Divider />}\n            </div>\n          ))\n        }\n        </List>\n      </Paper>\n    </ClickAwayListener>\n  );\n\n  return (\n    <div className={classes.root}>\n      <SearchIcon />\n      <InputBase\n        placeholder=\"Search...\"\n        value={query}\n        onChange={handleChange}\n      />\n      {results.length > 0 && SearchResults}\n    </div>\n  );\n};\n\n\nexport default SearchBar;\n\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  AppBar,\n  Toolbar,\n  IconButton,\n  Typography,\n  Avatar,\n  useMediaQuery\n} from '@material-ui/core';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport HomeIcon from '@material-ui/icons/Home';\n\nimport { useAuth } from '../../hooks/useAuth';\nimport SearchBar from './SearchBar';\n\n\nconst useStyles = makeStyles(theme => ({\n  mobile: {\n    top: 'auto',\n    bottom: 0\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-around'\n  },\n  browserToolbar: {\n    width: '60%',\n    margin: 'auto'\n  },\n  logo: {\n    fontWeight: 'bold',\n    cursor: 'pointer',\n    color: 'white'\n  },\n  round: {\n    width: theme.spacing(3),\n    height: theme.spacing(3)\n  }\n}));\n\n\nconst Header: React.FC = () => {\n  const classes = useStyles();\n  const { user } = useAuth();\n  const theme = useTheme();\n  const history = useHistory();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  const handleHome = (): void => {\n    history.push('/');\n  };\n\n  const handleFeed = (): void => {\n    history.push('/feed');\n  };\n\n  const handleProfile = (): void => {\n    if (user) history.push(`/profile/${user.username}`);\n    else history.push('/login');\n  };\n\n  const handleNotifications = (): void => {\n    history.push('/notifications');\n  };\n\n  const FeedButton = (\n    <IconButton onClick={handleFeed}>\n      <HomeIcon />\n    </IconButton>\n  );\n\n  const NotificationsButton = (\n    <IconButton onClick={handleNotifications}>\n      <NotificationsIcon />\n    </IconButton>\n  );\n\n  const ProfileButton = (\n    <IconButton onClick={handleProfile}>\n      {\n        user?.avatarUrl\n          ? <Avatar className={classes.round} src={user?.avatarUrl} />\n          : <AccountCircle />\n      }\n    </IconButton>\n  );\n\n  const BrowserVersion = (\n    <AppBar position=\"fixed\">\n      <Toolbar className={`${classes.toolbar} ${classes.browserToolbar}`}>\n        <Typography variant=\"h5\" className={classes.logo} onClick={handleHome}>\n          Which\n        </Typography>\n        <SearchBar />\n        <div>\n          {FeedButton}\n          {NotificationsButton}\n          {ProfileButton}\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n\n  const MobileVersion = (\n    <AppBar position=\"fixed\" className={classes.mobile}>\n      <Toolbar className={classes.toolbar}>\n        <IconButton onClick={handleHome}>\n          <Typography className={`${classes.logo} ${classes.round}`}>W</Typography>\n        </IconButton>\n        {FeedButton}\n        {NotificationsButton}\n        {ProfileButton}\n      </Toolbar>\n    </AppBar>\n  );\n\n  return isMobile ? MobileVersion : BrowserVersion;\n};\n\nexport default Header;\n\n","import React, { useState } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useMediaQuery } from '@material-ui/core';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'fixed',\n    bottom: theme.spacing(10),\n    left: theme.spacing(10),\n    zIndex: 1000,\n    cursor: 'pointer',\n    opacity: 0.4,\n    '&:hover': {\n      opacity: 1\n    },\n    background: theme.palette.primary.main,\n    borderRadius: '50%'\n  },\n  icon: {\n    fontSize: 80,\n    color: 'white'\n  }\n}));\n\nconst ScrollTopArrow: React.FC = () => {\n  const [showScroll, setShowScroll] = useState(false);\n  const theme = useTheme();\n  const classes = useStyles();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  const checkScrollTop = () => {\n    if (!showScroll && window.pageYOffset > 400) {\n      setShowScroll(true);\n    } else if (showScroll && window.pageYOffset <= 400) {\n      setShowScroll(false);\n    }\n  };\n\n  const scrollTop = () => {\n    window.scrollTo({ top: 0 });\n  };\n\n  window.addEventListener('scroll', checkScrollTop);\n\n  return (\n    <div className={classes.root}>\n      {\n        showScroll\n        && !isMobile\n        && <ArrowUpwardIcon className={classes.icon} color=\"primary\" onClick={scrollTop} />\n      }\n    </div>\n  );\n};\n\nexport default ScrollTopArrow;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport IconButton from '@material-ui/core/IconButton';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport { makeStyles } from '@material-ui/core';\nimport { useAuth } from '../../hooks/useAuth';\n\nconst ITEM_HEIGHT = 48;\n\nconst useStyles = makeStyles({\n  moreMenu: {\n    position: 'absolute',\n    right: 10,\n    zIndex: 100\n  }\n});\n\nconst MoreMenu: React.FC = () => {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState<HTMLButtonElement | null>(null);\n  const { logout } = useAuth();\n  const history = useHistory();\n\n  const open = Boolean(anchorEl);\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleLogout = () => {\n    logout();\n    history.push('/login');\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div className={classes.moreMenu}>\n      <div>\n        <IconButton\n          aria-label=\"more\"\n          aria-controls=\"long-menu\"\n          aria-haspopup=\"true\"\n          onClick={handleClick}\n        >\n          <MoreHorizIcon />\n        </IconButton>\n        <Menu\n          id=\"long-menu\"\n          anchorEl={anchorEl}\n          keepMounted\n          open={open}\n          onClose={handleClose}\n          PaperProps={{\n            style: {\n              maxHeight: ITEM_HEIGHT * 4.5,\n              width: '20ch'\n            }\n          }}\n        >\n          <MenuItem onClick={handleLogout}>Log out</MenuItem>\n        </Menu>\n      </div>\n    </div>\n  );\n};\n\nexport default MoreMenu;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\ninterface PropTypes {\n  text: string;\n  value: string | number;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'relative'\n  },\n  menuButton: {\n    width: 200,\n    height: 50,\n    textAlign: 'center'\n  },\n  menuNumber: {\n    fontWeight: 800,\n    color: 'black'\n  },\n  menuText: {\n    color: 'darkgray'\n  }\n});\n\n\nconst Highlight: React.FC<PropTypes> = ({ text, value }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.menuButton}>\n      <div className={classes.menuNumber}>{value}</div>\n      <div className={classes.menuText}>{text}</div>\n    </div>\n  );\n};\n\nexport default Highlight;\n","import React, { useState } from 'react';\nimport {\n  Button,\n  TextField,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle\n} from '@material-ui/core';\n\ninterface PropTypes {\n  isOpen: boolean;\n  setIsOpen: (value: boolean) => void;\n  callback: (url: string) => void;\n}\n\nconst UploadImage: React.FC<PropTypes> = ({ setIsOpen, isOpen, callback }) => {\n  const [url, setUrl] = useState<string>('');\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  const handleSubmit = () => {\n    let result = url;\n    if (url.startsWith('https://www.instagram.com/')) {\n      const match = url.match('/p/(.*)/');\n      const id = match && match[1];\n      result = `https://www.instagram.com/p/${id}/media/?size=l`;\n    } else if (url.startsWith('https://drive.google.com/')) {\n      const match = url.match('/d/(.*)/');\n      const fileId = match && match[1];\n      result = `https://drive.google.com/uc?export=view&id=${fileId}`;\n    }\n    callback(result || '');\n    handleClose();\n  };\n\n  const handleChange = (event:React.ChangeEvent<HTMLInputElement>) => {\n    setUrl(event.target.value);\n  };\n\n  return (\n    <div>\n      <Dialog open={isOpen} onClose={handleClose}>\n        <DialogTitle>Upload an Image</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Unfortunetly we do not support uploading images yet. Please provide a valid URL to your image:\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Image URL\"\n            type=\"text\"\n            fullWidth\n            autoComplete=\"off\"\n            onChange={handleChange}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} color=\"primary\" disabled={!url.length}>\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default UploadImage;\n","import React, { useState } from 'react';\nimport { Avatar, Badge, Typography } from '@material-ui/core/';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { User } from 'which-types';\nimport CameraAltIcon from '@material-ui/icons/CameraAlt';\nimport VerifiedIcon from '@material-ui/icons/CheckCircleOutline';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport MoreMenu from './MoreMenu';\nimport Highlight from './Highlight';\nimport UploadImage from '../../components/UploadImage/UploadImage';\nimport { patch } from '../../requests';\nimport { useAuth } from '../../hooks/useAuth';\n\ninterface PropTypes {\n  savedPolls: number;\n  totalVotes: number;\n  userInfo: User | undefined;\n  setUserInfo: (userInfo: User) => void;\n  isLoading: boolean;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'relative'\n  },\n  avatar: {\n    width: 150,\n    height: 150,\n    margin: '0 auto'\n  },\n  name: {\n    margin: theme.spacing(1, 0),\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  verified: {\n    marginLeft: theme.spacing(0.5),\n    width: theme.spacing(3),\n    height: theme.spacing(3)\n  },\n  profileMenu: {\n    display: 'flex',\n    width: '100%',\n    height: 50,\n    margin: '50px 0',\n    borderBottom: '1px solid lightgray'\n  },\n  menuButton: {\n    width: 200,\n    height: 50,\n    textAlign: 'center'\n  },\n  badge: {\n    width: theme.spacing(5),\n    height: theme.spacing(5),\n    borderRadius: '50%',\n    cursor: 'pointer',\n    background: '#d3d3d3',\n    display: 'flex',\n    alignItems: 'center',\n    '& svg': {\n      margin: '0 auto'\n    }\n  },\n  avatarContainer: {\n    position: 'relative',\n    textAlign: 'center'\n  },\n  menuNumber: {\n    fontWeight: 800,\n    color: 'black'\n  },\n  menuText: {\n    color: 'darkgray'\n  },\n  skeleton: {\n    margin: '10px auto',\n    borderRadius: 2\n  }\n\n}));\n\n\nconst ProfileInfo: React.FC<PropTypes> = ({\n  savedPolls, totalVotes, setUserInfo, userInfo, isLoading\n}) => {\n  const classes = useStyles();\n  const [input, setInput] = useState(false);\n  const { setUser } = useAuth();\n  const dateSince = new Date(userInfo?.createdAt || '').toLocaleDateString();\n\n  const handleClick = () => {\n    setInput(!input);\n  };\n\n  const patchAvatar = (url: string) => {\n    const id = localStorage.getItem('userId');\n    patch(`/users/${id}`, { avatarUrl: url }).then(res => {\n      setUserInfo(res.data);\n      setUser(res.data);\n    });\n  };\n\n  return (\n    <div className={classes.root}>\n      {\n        isLoading\n          ? <Skeleton animation=\"wave\" variant=\"circle\" width={150} height={150} className={classes.avatar} />\n          : userInfo?._id === localStorage.getItem('userId')\n            ? (\n              <div>\n                <MoreMenu />\n                <div className={classes.avatarContainer}>\n                  <Badge\n                    overlap=\"circle\"\n                    anchorOrigin={{\n                      vertical: 'bottom',\n                      horizontal: 'right'\n                    }}\n                    badgeContent={(\n                      <div className={classes.badge}>\n                        <CameraAltIcon onClick={handleClick} />\n                      </div>\n                    )}\n                  >\n                    <Avatar className={classes.avatar} src={userInfo?.avatarUrl} />\n                  </Badge>\n                </div>\n                <UploadImage isOpen={input} setIsOpen={setInput} callback={patchAvatar} />\n              </div>\n            )\n            : <Avatar className={classes.avatar} src={userInfo?.avatarUrl} />\n      }\n      {\n        isLoading\n          ? <Skeleton animation=\"wave\" variant=\"rect\" width={100} height={20} className={classes.skeleton} />\n          : (\n            <Typography variant=\"h5\" className={classes.name}>\n              {userInfo?.username}\n              {userInfo?.verified && <VerifiedIcon className={classes.verified} color=\"primary\" />}\n            </Typography>\n          )\n      }\n      <div className={classes.profileMenu}>\n        {\n          isLoading\n            ? (\n              <>\n                <Skeleton animation=\"wave\" variant=\"rect\" width={170} height={20} className={classes.skeleton} />\n                <Skeleton animation=\"wave\" variant=\"rect\" width={170} height={20} className={classes.skeleton} />\n                <Skeleton animation=\"wave\" variant=\"rect\" width={170} height={20} className={classes.skeleton} />\n              </>\n            )\n            : (\n              <>\n                <Highlight text=\"Polls\" value={savedPolls} />\n                <Highlight text=\"Since\" value={dateSince} />\n                <Highlight text=\"Total votes\" value={totalVotes} />\n              </>\n            )\n        }\n      </div>\n    </div>\n  );\n};\n\nexport default ProfileInfo;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport LikeIcon from '@material-ui/icons/Favorite';\n\ninterface PropTypes {\n  value: number;\n  which: 'left' | 'right';\n  like: boolean;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'absolute',\n    color: 'white',\n    top: '86%',\n    fontSize: 20,\n    textShadow: '0 0 3px black',\n    display: 'flex',\n    alignItems: 'center'\n  },\n  left: {\n    left: 30\n  },\n  right: {\n    right: 30\n  }\n});\n\nconst PercentageBar: React.FC<PropTypes> = ({ value, which, like }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={`${classes.root} ${classes[which]}`}>\n      {like && <LikeIcon />}\n      {`${value}%`}\n    </div>\n  );\n};\n\n\nexport default PercentageBar;\n\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  Card,\n  CardActionArea,\n  CardMedia\n} from '@material-ui/core/';\nimport { Which, Poll } from 'which-types';\nimport { useSnackbar } from 'notistack';\n\nimport PercentageBar from './PercentageBar';\nimport UserStrip from '../UserStrip/UserStrip';\nimport { post } from '../../requests';\nimport { useAuth } from '../../hooks/useAuth';\n\ninterface PropTypes {\n  initialPoll: Poll;\n}\n\nconst DATE_FORMAT = {\n  month: 'long',\n  day: 'numeric',\n  year: 'numeric',\n  hour: '2-digit',\n  minute: '2-digit'\n};\n\nconst useStyles = makeStyles(theme => ({\n  images: {\n    height: theme.spacing(50)\n  },\n  imagesBlock: {\n    display: 'flex'\n  },\n  rateLine: {\n    position: 'relative',\n    width: '100%',\n    height: theme.spacing(2),\n    backgroundColor: theme.palette.primary.light,\n    transitionDuration: '0.5s'\n  },\n  highlight: {\n    backgroundColor: `${theme.palette.primary.main} !important`\n  },\n  fillRateLine: {\n    height: theme.spacing(2),\n    backgroundColor: theme.palette.primary.light,\n    transitionDuration: '0.5s'\n  }\n}));\n\nconst PollCard: React.FC<PropTypes> = ({ initialPoll }) => {\n  const [poll, setPoll] = useState<Poll>(initialPoll);\n  const classes = useStyles();\n  const { author, contents: { left, right }, vote } = poll;\n  const { enqueueSnackbar } = useSnackbar();\n  const { isAuthenticated } = useAuth();\n  const date: string = new Date(poll.createdAt).toLocaleString('default', DATE_FORMAT);\n\n  const handleVote = (which: Which) => {\n    if (!isAuthenticated()) {\n      enqueueSnackbar('Unauthorized users can not vote in polls', {\n        variant: 'error'\n      });\n    } else if (vote) {\n      enqueueSnackbar('You have already voted in this poll', {\n        variant: 'error'\n      });\n    } else {\n      const newVote = ({ which, pollId: poll._id });\n      post('votes/', newVote);\n      poll.contents[which].votes += 1;\n      poll.vote = {\n        _id: '',\n        authorId: '',\n        createdAt: new Date(),\n        ...newVote\n      };\n      setPoll({ ...poll });\n    }\n  };\n\n  const handleLeft = () => handleVote('left');\n  const handleRight = () => handleVote('right');\n\n  let leftPercentage;\n  let rightPercentage;\n\n  if (left.votes || right.votes) {\n    leftPercentage = Math.round(100 * (left.votes / (left.votes + right.votes)));\n    rightPercentage = 100 - leftPercentage;\n  } else {\n    leftPercentage = 0;\n    rightPercentage = 0;\n  }\n\n  const dominant: Which = left.votes >= right.votes ? 'left' : 'right';\n\n  return (\n    <Card>\n      <UserStrip user={author} info={date} />\n      <div className={classes.imagesBlock}>\n        <CardActionArea onDoubleClick={handleLeft}>\n          <CardMedia\n            className={classes.images}\n            image={left.url}\n          />\n          <PercentageBar value={leftPercentage} which=\"left\" like={vote?.which === 'left'} />\n        </CardActionArea>\n        <CardActionArea onDoubleClick={handleRight}>\n          <CardMedia\n            className={classes.images}\n            image={right.url}\n          />\n          <PercentageBar value={rightPercentage} which=\"right\" like={vote?.which === 'right'} />\n        </CardActionArea>\n      </div>\n      <div className={`${classes.rateLine} ${dominant === 'right' ? classes.highlight : ''}`}>\n        <div\n          className={`${classes.fillRateLine} ${dominant === 'left' ? classes.highlight : ''}`}\n          style={{ width: `${leftPercentage}%` }}\n        />\n      </div>\n    </Card>\n  );\n};\n\nexport default PollCard;\n","import React from 'react';\nimport { Poll } from 'which-types';\nimport { WindowScroller, AutoSizer, List } from 'react-virtualized';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core';\nimport PollCard from '../PollCard/PollCard';\n\ninterface PropTypes {\n  polls: Poll[];\n}\n\ninterface RenderPropTypes {\n  index: number;\n  key: string;\n  style: React.CSSProperties;\n}\n\nconst useStyles = makeStyles(theme => ({\n  loader: {\n    width: '100%',\n    textAlign: 'center',\n    marginTop: theme.spacing(10)\n  }\n}));\n\nconst Feed: React.FC<PropTypes> = ({ polls }) => {\n  const classes = useStyles();\n\n\n  const RenderItem: React.FC<RenderPropTypes> = ({ index, style, key }) => {\n    const poll = polls[index];\n    return (\n      <div key={key} style={style}>\n        <PollCard initialPoll={poll} />\n      </div>\n    );\n  };\n\n  const loader = (\n    <div className={classes.loader}>\n      <CircularProgress color=\"primary\" style={{ margin: '0 auto' }} />\n    </div>\n  );\n\n  const list = (\n    <WindowScroller>\n      {({\n        height,\n        isScrolling,\n        registerChild,\n        onChildScroll,\n        scrollTop\n      }) => (\n        <AutoSizer disableHeight>\n          {({ width }) => (\n            <div ref={registerChild}>\n              <List\n                autoHeight\n                height={height}\n                isScrolling={isScrolling}\n                onScroll={onChildScroll}\n                rowCount={polls.length}\n                rowHeight={550}\n                rowRenderer={RenderItem}\n                scrollTop={scrollTop}\n                width={width}\n                containerStyle={{ pointerEvents: 'auto' }}\n                overscanRowCount={1}\n              />\n            </div>\n          )}\n        </AutoSizer>\n      )}\n    </WindowScroller>\n  );\n\n  return polls.length ? list : loader;\n};\n\nexport default Feed;\n\n","import React, { useState, useEffect } from 'react';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { User, Poll } from 'which-types';\nimport { Container } from '@material-ui/core';\n\nimport ProfileInfo from './ProfileInfo';\nimport Feed from '../../components/Feed/Feed';\nimport { get } from '../../requests';\nimport { useAuth } from '../../hooks/useAuth';\n\n\nconst ProfilePage: React.FC = () => {\n  const [userInfo, setUserInfo] = useState<User>();\n  const [polls, setPolls] = useState<Poll[]>([]);\n  const [totalVotes, setTotalVotes] = useState<number>(0);\n  const [isInfoLoading, setIsInfoLoading] = useState(false);\n  const [isPollsLoading, setIsPollsLoading] = useState(false);\n  const history = useHistory();\n  const { username } = useParams();\n  const { user } = useAuth();\n\n  useEffect(() => {\n    setIsInfoLoading(true);\n\n    const redirect = () => {\n      if (user) history.push(`/profile/${user.username}`);\n      else history.push('/login');\n    };\n\n    if (username) {\n      get(`/users?username=${username}`).then(response => {\n        if (!response.data.length) redirect(); // TODO: handle this case\n        setUserInfo(response.data[0]);\n        setIsInfoLoading(false);\n      }).catch(() => redirect());\n    } else redirect();\n  }, [username, user, history]);\n\n\n  useEffect(() => {\n    if (userInfo?._id) {\n      setIsPollsLoading(true);\n\n      get(`/profiles/${userInfo._id}`).then(response => {\n        setIsPollsLoading(false);\n        setPolls([]);\n        setPolls(response.data);\n        setTotalVotes(response.data.reduce(\n          (total: number, current: Poll) => {\n            const { left, right } = current.contents;\n            return total + left.votes + right.votes;\n          }, 0\n        ));\n      });\n    }\n  }, [userInfo]);\n\n  return (\n    <Container maxWidth=\"sm\" disableGutters>\n      <ProfileInfo\n        userInfo={userInfo}\n        setUserInfo={setUserInfo}\n        savedPolls={polls.length}\n        totalVotes={totalVotes}\n        isLoading={isInfoLoading}\n      />\n      {isPollsLoading ? <Feed polls={[]} /> : (polls.length > 0 && <Feed polls={polls} />)}\n    </Container>\n  );\n};\n\nexport default ProfilePage;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport { CardActionArea, CardMedia, Typography } from '@material-ui/core';\nimport CancelOutlinedIcon from '@material-ui/icons/CancelOutlined';\n\nimport UploadImage from '../../components/UploadImage/UploadImage';\n\ninterface PropTypes {\n  url: string;\n  setUrl: (url: string) => void;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  clearIcon: {\n    opacity: '.5',\n    fontSize: 50\n  },\n  media: {\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  text: {\n    textAlign: 'center'\n  }\n});\n\n\nconst PollSubmissionImage: React.FC<PropTypes> = ({ url, setUrl }) => {\n  const classes = useStyles();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [isMediaHover, setIsMediaHover] = useState(false);\n\n  const handleClick = (): void => {\n    if (!isModalOpen) {\n      if (url) setUrl('');\n      else setIsModalOpen(!isModalOpen);\n    }\n  };\n\n  const handleMouseEnter = (): void => {\n    setIsMediaHover(true);\n  };\n\n  const handleMouseLeave = (): void => {\n    setIsMediaHover(false);\n  };\n\n\n  const Upload = (\n    <>\n      <CloudUploadIcon fontSize=\"large\" color=\"primary\" />\n      <Typography variant=\"h5\" className={classes.text}> Upload an image </Typography>\n    </>\n  );\n\n  const Media = (\n    <CardMedia\n      image={url}\n      className={classes.media}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n    >\n      {isMediaHover && <CancelOutlinedIcon className={classes.clearIcon} />}\n    </CardMedia>\n  );\n\n  return (\n    <>\n      <CardActionArea onClick={handleClick} className={classes.root}>\n        {url ? Media : Upload}\n      </CardActionArea>\n      <UploadImage isOpen={isModalOpen} setIsOpen={setIsModalOpen} callback={setUrl} />\n    </>\n  );\n};\n\nexport default PollSubmissionImage;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Collapse from '@material-ui/core/Collapse';\nimport {\n  Button,\n  Card,\n  ClickAwayListener,\n  Divider\n} from '@material-ui/core';\nimport { Poll, Which } from 'which-types';\nimport { useSnackbar } from 'notistack';\nimport PollSubmissionImage from './PollSubmissionImage';\nimport UserStrip from '../../components/UserStrip/UserStrip';\nimport { post } from '../../requests';\nimport { Contents } from './types';\nimport { useAuth } from '../../hooks/useAuth';\n\ninterface PropTypes{\n  addPoll: (poll: Poll) => void;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginBottom: theme.spacing(4)\n  },\n  images: {\n    height: theme.spacing(50),\n    display: 'flex'\n  }\n}));\n\nconst emptyContents: Contents = {\n  left: { url: '' },\n  right: { url: '' }\n};\n\nconst PollSubmission: React.FC<PropTypes> = ({ addPoll }) => {\n  const classes = useStyles();\n  const [expanded, setExpanded] = useState(false);\n  const [contents, setContents] = useState<Contents>(emptyContents);\n  const { enqueueSnackbar } = useSnackbar();\n  const { user } = useAuth();\n\n  const readyToSubmit = contents.left.url && contents.right.url;\n\n  const setUrl = (which: Which) => (url: string): void => {\n    setContents({ ...contents, [which]: { url } });\n  };\n\n  const handleClickAway = () => {\n    setExpanded(false);\n  };\n\n  const handleClick = () => {\n    if (expanded && readyToSubmit) {\n      post('/polls/', { contents }).then(response => {\n        addPoll(response.data);\n        enqueueSnackbar('Your poll has been successfully created!', {\n          variant: 'success'\n        });\n      });\n      setContents({ ...emptyContents });\n    }\n    setExpanded(!expanded);\n  };\n\n  return (\n    <ClickAwayListener onClickAway={handleClickAway}>\n      <Card className={classes.root}>\n        <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n          {user && <UserStrip user={user} info=\"\" />}\n          <Divider />\n          <div className={classes.images}>\n            <PollSubmissionImage url={contents.left.url} setUrl={setUrl('left')} />\n            <PollSubmissionImage url={contents.right.url} setUrl={setUrl('right')} />\n          </div>\n        </Collapse>\n        <Button\n          color=\"primary\"\n          disabled={expanded && !readyToSubmit}\n          variant={expanded ? 'contained' : 'outlined'}\n          onClick={handleClick}\n          fullWidth\n        >\n          {expanded ? 'Submit' : 'Create a Poll'}\n        </Button>\n      </Card>\n    </ClickAwayListener>\n  );\n};\n\nexport default PollSubmission;\n","import React, { useState, useEffect } from 'react';\nimport { Poll } from 'which-types';\nimport { Container } from '@material-ui/core/';\n\nimport Feed from '../../components/Feed/Feed';\nimport { get } from '../../requests';\nimport PollSubmission from './PollSubmission';\nimport { useAuth } from '../../hooks/useAuth';\n\nconst FeedPage: React.FC = () => {\n  const [polls, setPolls] = useState<Poll[]>([]);\n  const { isAuthenticated } = useAuth();\n\n  useEffect(() => {\n    get('/feed').then(response => {\n      setPolls(response.data);\n    });\n  }, []);\n\n  const addPoll = (poll: Poll): void => {\n    polls.unshift(poll);\n    setPolls([]);\n    setPolls(polls);\n  };\n\n  return (\n    <Container maxWidth=\"sm\" disableGutters>\n      {isAuthenticated() && <PollSubmission addPoll={addPoll} />}\n      <Feed polls={polls} />\n    </Container>\n  );\n};\n\nexport default FeedPage;\n\n","import React, { useState, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  TextField,\n  Button,\n  FormControlLabel,\n  Switch\n} from '@material-ui/core';\nimport { useAuth } from '../../hooks/useAuth';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n      width: theme.spacing(35)\n    },\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    textAlign: 'center'\n  },\n  formHeader: {\n    textAlign: 'center',\n    fontSize: 25\n  },\n  formTransfer: {\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  transferButton: {\n    marginLeft: 10,\n    color: 'green',\n    cursor: 'pointer'\n  }\n}));\n\nconst LoginPage: React.FC = () => {\n  const [error, setError] = useState<boolean>(false);\n  const [remember, setRemember] = useState<boolean>(true);\n  const classes = useStyles();\n  const nameRef = useRef<HTMLInputElement>();\n  const passwordRef = useRef<HTMLInputElement>();\n  const { login } = useAuth();\n  const history = useHistory();\n\n  const handleCheck = () => {\n    setRemember(!remember);\n  };\n\n  const handleSubmit = async () => {\n    const name = nameRef.current?.value?.toLowerCase();\n    const password = passwordRef.current?.value;\n    if (name && password) {\n      login(name, password, remember).then(success => {\n        if (success) history.push(`/profile/${name}`);\n        else setError(true);\n      });\n    }\n  };\n\n  const handleRegistration = () => {\n    history.push('/registration');\n  };\n\n  return (\n    <>\n      <div className={classes.formHeader}>Sign In</div>\n      <form className={classes.root} noValidate autoComplete=\"off\">\n        <TextField\n          inputRef={nameRef}\n          error={error}\n          label=\"Login\"\n        />\n        <TextField\n          inputRef={passwordRef}\n          error={error}\n          helperText={error && 'Invalid credentials'}\n          label=\"Password\"\n          type=\"password\"\n        />\n        <FormControlLabel\n          control={<Switch color=\"primary\" onClick={handleCheck} checked={remember} size=\"small\" />}\n          label=\"Remember me\"\n        />\n        <Button variant=\"contained\" onClick={handleSubmit}>submit</Button>\n      </form>\n      <div className={classes.formTransfer}>\n        <div>{'Don\\'t have an account?'}</div>\n        <span\n          onClick={handleRegistration}\n          className={classes.transferButton}\n          role=\"presentation\"\n        >\n          Sign up\n        </span>\n      </div>\n    </>\n  );\n};\n\nexport default LoginPage;\n\n","import React, { useState, useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport { post } from '../../requests';\nimport { useAuth } from '../../hooks/useAuth';\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n      width: theme.spacing(35)\n    },\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    textAlign: 'center'\n  },\n  formHeader: {\n    textAlign: 'center',\n    fontSize: 25\n  },\n  formTransfer: {\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  transferButton: {\n    marginLeft: 10,\n    color: 'green',\n    cursor: 'pointer'\n  }\n}));\n\nconst RegistrationPage: React.FC = () => {\n  const [error, setError] = useState<boolean>(false);\n  const classes = useStyles();\n  const usernameRef = useRef<HTMLInputElement>();\n  const emailRef = useRef<HTMLInputElement>();\n  const passwordRef = useRef<HTMLInputElement>();\n  const { login } = useAuth();\n  const history = useHistory();\n\n  const handleSubmit = () => {\n    const username = usernameRef.current?.value?.toLowerCase();\n    const password = passwordRef.current?.value;\n    const email = emailRef.current?.value;\n    if (username && password) {\n      post('/users', { username, password, email })\n        .then(() => login(username, password))\n        .then(() => history.push(`/profile/${username}`));\n    } else setError(true);\n  };\n\n  const handleLogin = () => {\n    history.push('/login');\n  };\n\n  return (\n    <>\n      <div className={classes.formHeader}>Sign Up</div>\n      <form className={classes.root} noValidate autoComplete=\"off\">\n        <TextField\n          inputRef={usernameRef}\n          label=\"Username\"\n          error={error}\n          helperText={error && 'This field is required!'}\n          required\n        />\n        <TextField inputRef={emailRef} label=\"Email\" />\n        <TextField\n          inputRef={passwordRef}\n          label=\"Password\"\n          type=\"password\"\n          required\n          error={error}\n          helperText={error && 'This field is required!'}\n        />\n        <Button variant=\"contained\" onClick={handleSubmit}>submit</Button>\n      </form>\n      <div className={classes.formTransfer}>\n        <div>Already have an account?</div>\n        <span\n          onClick={handleLogin}\n          className={classes.transferButton}\n          role=\"presentation\"\n        >\n          Log in\n        </span>\n      </div>\n    </>\n  );\n};\n\nexport default RegistrationPage;\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  Card,\n  CardContent,\n  Typography,\n  Divider\n} from '@material-ui/core/';\nimport { Rating } from '@material-ui/lab';\nimport { Feedback } from 'which-types';\n\nimport UserStrip from '../UserStrip/UserStrip';\n\ninterface PropTypes {\n  feedback: Feedback;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    margin: theme.spacing(4, 0, 1, 0)\n  }\n}));\n\nconst ReviewCard: React.FC<PropTypes> = ({ feedback }) => {\n  const classes = useStyles();\n\n  return (\n    <Card className={classes.root} elevation={2}>\n      <UserStrip\n        user={feedback.author}\n        info={<Rating value={feedback.score} readOnly size=\"small\" />}\n      />\n      {feedback.contents && (\n        <>\n          <Divider />\n          <CardContent>\n            <Typography>\n              {feedback.contents}\n            </Typography>\n          </CardContent>\n        </>\n      )}\n    </Card>\n  );\n};\n\nexport default ReviewCard;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { TextField, Button } from '@material-ui/core';\nimport { Rating } from '@material-ui/lab';\nimport { useSnackbar } from 'notistack';\n\nimport { post } from '../../requests';\n\nconst version = 'v1.0.0';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  textField: {\n    margin: theme.spacing(2, 0)\n  }\n}));\n\nconst ReviewForm: React.FC = () => {\n  const [contents, setContents] = useState<string>('');\n  const [score, setScore] = useState<number>(0);\n  const classes = useStyles();\n  const history = useHistory();\n  const { enqueueSnackbar } = useSnackbar();\n\n  const handleSubmit = (): void => {\n    if (score) {\n      post('/feedback', { contents, score, version }).then(() => {\n        enqueueSnackbar('Your feedback has been submitted!', {\n          variant: 'success'\n        });\n        history.push('/feed');\n      });\n    }\n  };\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n    setContents(event.target?.value || '');\n  };\n\n  const handleChangeRating = (event: React.ChangeEvent<Record<string, unknown>>, newScore: number | null): void => {\n    setScore(newScore || 0);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Rating value={score} onChange={handleChangeRating} size=\"large\" />\n      <TextField\n        value={contents}\n        onChange={handleChange}\n        label=\"Feedback\"\n        variant=\"outlined\"\n        className={classes.textField}\n        rows={4}\n        multiline\n      />\n      <div>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"large\"\n          onClick={handleSubmit}\n        >\n          submit\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default ReviewForm;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Typography,\n  Divider,\n  Grid,\n  Button,\n  Link,\n  useMediaQuery\n} from '@material-ui/core/';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport TrendingUpIcon from '@material-ui/icons/TrendingUp';\nimport { Rating } from '@material-ui/lab';\nimport { Feedback } from 'which-types';\n\nimport { useAuth } from '../../hooks/useAuth';\nimport { get } from '../../requests';\nimport ReviewCard from '../../components/ReviewCard/ReviewCard';\nimport ReviewForm from './ReviewForm';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    overflow: 'hidden',\n    padding: theme.spacing(0, 2)\n  },\n  logo: {\n    width: theme.spacing(20),\n    height: theme.spacing(20)\n  },\n  score: {\n    fontWeight: 'bold'\n  },\n  signup: {\n    marginLeft: theme.spacing(2)\n  },\n  reviews: {\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(0, 10)\n    }\n  }\n}));\n\nconst HomePage: React.FC = () => {\n  const [feedbacks, setFeedbacks] = useState<Feedback[]>([]);\n  const classes = useStyles();\n  const history = useHistory();\n  const { isAuthenticated, user } = useAuth();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  const rating = feedbacks.length && feedbacks.reduce(\n    (acc: number, feedback: Feedback) => acc + feedback.score,\n    0\n  ) / feedbacks.length;\n\n  useEffect(() => {\n    get('/feedback').then(response => {\n      setFeedbacks(response.data);\n    });\n  }, []);\n\n  const handleLetsGo = () => {\n    history.push('/feed');\n  };\n\n  const handleSignUp = () => {\n    history.push('/registration');\n  };\n\n  const GithubLink = <Link href=\"https://github.com/which-ecosystem\">GitHub</Link>;\n  const TypescriptLink = <Link href=\"https://www.typescriptlang.org/\">Typescript</Link>;\n  const ReactLink = <Link href=\"https://reactjs.org/\">React</Link>;\n  const FeathersLink = <Link href=\"https://feathersjs.com\">Feathers</Link>;\n  const MUILink = <Link href=\"https://material-ui.com\">Material-UI</Link>;\n  const EmailLink = <Link href=\"mailto: eug-vs@keemail.me\">eug-vs@keemail.me</Link>;\n\n  const Reviews = (\n    <div className={classes.reviews}>\n      {feedbacks.map(feedback => <ReviewCard feedback={feedback} />)}\n    </div>\n  );\n\n  const FeedbackSection = feedbacks.findIndex((feedback: Feedback) => feedback.author._id === user?._id) >= 0 ? (\n    <p>\n      You have already left feedback for this version.\n      If you have more to say, please open GitHub issue or contact us directly via email: {EmailLink}.\n      Alternatively, you can just wait for another application patch to come out.\n    </p>\n  ) : (\n    <>\n      <p>\n        Here you can share your thougts about Which with us!\n        Note that you can ony leave feedback once per application version (there will be plenty of them later).\n      </p>\n      {isAuthenticated() ? <ReviewForm /> : (\n        <>\n          <p> You must be authorized to leave feedback.</p>\n          <Button\n            variant=\"outlined\"\n            color=\"primary\"\n            onClick={handleSignUp}\n          >\n            sign in\n          </Button>\n        </>\n      )}\n    </>\n  );\n\n  return (\n    <div className={classes.root}>\n      <Grid container spacing={4}>\n        <Grid item xs={12} md={4}>\n          <Grid container direction=\"column\" spacing={1} alignItems=\"center\">\n            <Grid item>\n              <img src={`${process.env.PUBLIC_URL}/which-logo-512.png`} alt=\"logo\" className={classes.logo} />\n            </Grid>\n            <Grid item>\n              {rating !== 0 && <Rating value={rating} readOnly size=\"large\" />}\n            </Grid>\n            <Grid item>\n              {rating !== 0 && (\n                <Typography variant=\"h5\" className={classes.score}>\n                  User score: {rating.toFixed(1)}\n                </Typography>\n              )}\n            </Grid>\n          </Grid>\n          {isMobile || Reviews}\n        </Grid>\n        <Grid item xs={12} md={5}>\n          <Grid container direction=\"column\" spacing={6}>\n            <Grid item>\n              <Typography variant=\"h4\"> Which one to choose? </Typography>\n              <Divider />\n              <Typography>\n                <p>\n                  Have you ever found yourself stuck between two options, not being able to choose any?\n                  This is exactly the problem we are going to solve!\n                </p>\n                <p>Share your minor everyday uncertainties with the whole world and see what others think!</p>\n                <Button variant=\"contained\" color=\"primary\" size=\"large\" onClick={handleLetsGo}>\n                  {'let\\'s go!'}\n                </Button>\n                {!isAuthenticated() && (\n                  <Button\n                    variant=\"outlined\"\n                    color=\"primary\"\n                    size=\"large\"\n                    className={classes.signup}\n                    onClick={handleSignUp}\n                  >\n                    sign up\n                  </Button>\n                )}\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography variant=\"h4\"> About the project </Typography>\n              <Divider />\n              <Typography>\n                <p>\n                  The project is written in {TypescriptLink} and features {ReactLink}, {FeathersLink}, and {MUILink}.\n                  It is currently open-source and you can visit our {GithubLink} (make sure to star our repositories)!\n                </p>\n                <p>\n                  We encourage any developer to check it out. Feel free to open issues and create Pull Requests!\n                </p>\n                <p>\n                  All the development process is being tracked on the KanBan board (thanks GitHub).\n                  You can always check it to see what is the current state of the project.\n                </p>\n                <Button\n                  variant=\"outlined\"\n                  color=\"primary\"\n                  startIcon={<TrendingUpIcon />}\n                  href=\"https://github.com/orgs/which-ecosystem/projects/1\"\n                >\n                  track our progress\n                </Button>\n              </Typography>\n            </Grid>\n            <Grid item>\n              <Typography variant=\"h4\"> Leave feedback </Typography>\n              <Divider />\n              <Typography>\n                {FeedbackSection}\n              </Typography>\n            </Grid>\n            {isMobile && (\n              <Grid item>\n                {Reviews}\n              </Grid>\n            )}\n          </Grid>\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default HomePage;\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Typography } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    marginTop: theme.spacing(25),\n    textAlign: 'center'\n  }\n}));\n\nconst NotificationsPage: React.FC = () => {\n  const classes = useStyles();\n\n  return (\n    <Typography variant=\"h4\" className={classes.root}>\n      Sorry, this page is being constructed yet.\n    </Typography>\n  );\n};\n\nexport default NotificationsPage;\n\n","import React from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useMediaQuery } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport { Switch, Route } from 'react-router-dom';\n\nimport ProfilePage from './ProfilePage/ProfilePage';\nimport FeedPage from './FeedPage/FeedPage';\nimport LoginPage from './LoginPage/LoginPage';\nimport RegistrationPage from './RegistrationPage/RegistrationPage';\nimport HomePage from './HomePage/HomePage';\nimport NotificationsPage from './NotificationsPage/NotificationsPage';\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    [theme.breakpoints.down('sm')]: {\n      margin: theme.spacing(2, 0, 12, 0)\n    },\n    [theme.breakpoints.up('md')]: {\n      margin: theme.spacing(15, 5, 8, 5)\n    }\n  }\n}));\n\n\nconst Page: React.FC = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  return (\n    <SnackbarProvider\n      maxSnack={3}\n      anchorOrigin={{\n        vertical: isMobile ? 'top' : 'bottom',\n        horizontal: 'right'\n      }}\n    >\n      <div className={classes.root}>\n        <Switch>\n          <Route exact path=\"/\" component={HomePage} />\n          <Route exact path=\"/login\" component={LoginPage} />\n          <Route exact path=\"/registration\" component={RegistrationPage} />\n          <Route exact path=\"/feed\" component={FeedPage} />\n          <Route exact path=\"/notifications\" component={NotificationsPage} />\n          <Route path=\"/profile/:username\" component={ProfilePage} />\n        </Switch>\n      </div>\n    </SnackbarProvider>\n  );\n};\n\n\nexport default Page;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter } from 'react-router-dom';\nimport teal from '@material-ui/core/colors/teal';\nimport 'typeface-roboto';\n\nimport Header from './components/Header/Header';\nimport ScrollTopArrow from './components/ScrollTopArrow/ScrollTopArrow';\nimport Page from './pages/Page';\nimport { AuthProvider } from './hooks/useAuth';\n\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: teal[700],\n      light: teal[100]\n    }\n  }\n});\n\n\nconst App: React.FC = () => {\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          <Header />\n          <Page />\n          <ScrollTopArrow />\n        </ThemeProvider>\n      </AuthProvider>\n    </BrowserRouter>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}
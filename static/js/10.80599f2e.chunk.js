(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[10],{233:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(60),l=a(77),i=Object(c.a)({root:{position:"absolute",width:"100%",height:"100%"},image:{objectFit:"cover",pointerEvents:"none",width:"100%",height:"100%"}});t.a=function(e){var t=e.src,a=e.alt,n=i();return r.a.createElement("picture",{className:n.root},r.a.createElement(l.a,{src:t,alt:a,className:n.image}))}},262:function(e,t,a){"use strict";var n=a(12),r=a(0),c=a.n(r),l=a(395),i=a(240),o=a.n(i),s=a(301),u=a(302),m=a(303),p=a(304),f=a(408),d=a(305),b=function(e){var t=e.setIsOpen,a=e.isOpen,i=e.callback,o=Object(r.useState)(""),b=Object(n.a)(o,2),v=b[0],h=b[1],g=function(){t(!1)};return c.a.createElement("div",null,c.a.createElement(s.a,{open:a,onClose:g},c.a.createElement(u.a,null,"Upload via link"),c.a.createElement(m.a,null,c.a.createElement(p.a,null,"Provide a valid URL to your image:"),c.a.createElement(f.a,{autoFocus:!0,margin:"dense",id:"name",label:"Image URL",type:"text",fullWidth:!0,autoComplete:"off",onChange:function(e){h(e.target.value)}})),c.a.createElement(d.a,null,c.a.createElement(l.a,{onClick:g,color:"primary"},"Cancel"),c.a.createElement(l.a,{onClick:function(){var e=v;if(v.startsWith("https://www.instagram.com/")){var t=v.match("/p/(.*)/"),a=t&&t[1];e="https://www.instagram.com/p/".concat(a,"/media/?size=l")}else if(v.startsWith("https://drive.google.com/")){var n=v.match("/d/(.*)/"),r=n&&n[1];e="https://drive.google.com/uc?export=view&id=".concat(r)}i(e||""),g()},color:"primary",disabled:!v.length},"Submit"))))};t.a=function(e){var t=e.callback,a=e.children,i=Object(r.useState)(!1),s=Object(n.a)(i,2),u=s[0],m=s[1],p=function(){m(!0)},f=c.a.createElement(l.a,{onClick:p,variant:"outlined",color:"primary",startIcon:c.a.createElement(o.a,null)},"Attach a link"),d=a&&c.a.Children.toArray(a)[0];return c.a.createElement(c.a.Fragment,null,c.a.createElement(b,{callback:t,isOpen:u,setIsOpen:m}),c.a.isValidElement(d)?c.a.cloneElement(d,{onClick:p}):f)}},410:function(e,t,a){"use strict";a.r(t);var n=a(62),r=a.n(n),c=a(12),l=a(71),i=a(0),o=a.n(i),s=a(291),u=a.n(s),m=a(10),p=a(60),f=a(371),d=a(289),b=a(184),v=a(407),h=a(395),g=a(78),E=a(43),j=a(370),O=a(113),k=a(405),y=a(406),w=a(262),C=a(375),x=a(381),S=a.n(x),N=function(e){var t=e.callback,a=e.children,n=Object(C.useFilePicker)(),r=n.files,c=n.onClick,l=n.HiddenFileInput;Object(i.useEffect)((function(){if(null===r||void 0===r?void 0:r.length){var e=r[0];C.utils.loadFile(e).then((function(a){return t(a,e)}))}}),[r,t]);var s=a&&o.a.Children.toArray(a)[0],u=o.a.createElement(h.a,{onClick:c,variant:"contained",color:"primary",size:"large",startIcon:o.a.createElement(S.a,null)},"Upload");return o.a.createElement(o.a.Fragment,null,o.a.createElement(l,{accept:".jpg, .jpeg, .png, .gif",multiple:!1}),o.a.isValidElement(s)?o.a.cloneElement(s,{onClick:c}):u)},F=a(233),I=Object(p.a)({root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"50%"},clearIcon:{opacity:".5",fontSize:50},overlay:{backgroundColor:"rgba(0, 0, 0, 0.45)",color:"white",position:"absolute",top:0,left:0,height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",transitionDuration:"0.5s"},invisible:{backgroundColor:"rgba(0, 0, 0, 0)"},icon:{color:"white"}}),z=function(e){var t=e.callback,a=e.progress,n=I(),r=Object(i.useState)(),l=Object(c.a)(r,2),s=l[0],u=l[1],m=function(e,a){u(e),t(a||e)},p=o.a.createElement("div",{className:n.root},o.a.createElement(N,{callback:m}),o.a.createElement(E.a,{variant:"h6"}," or "),o.a.createElement(w.a,{callback:m})),f=o.a.createElement(j.a,{onClick:function(){u(void 0),t(void 0)},className:n.root,disabled:Boolean(a)},o.a.createElement(F.a,{src:s}),o.a.createElement("div",{className:"".concat(n.overlay," ").concat(100===a&&n.invisible)},a?a<100?o.a.createElement(O.a,{variant:"static",value:a,className:n.icon}):o.a.createElement(k.a,{className:n.icon,fontSize:"large"}):o.a.createElement(y.a,{className:n.icon,fontSize:"large"})));return s?f:p},P=a(75),R=a(27),U=a(32),V=a(74),W=a(85),A=a.n(W),B=a(382),q=a.n(B),D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;return new Promise((function(a,n){return new q.a(e,{success:function(e){return a(e)},error:function(e){return n(e)},quality:t})}))},J=function(){var e=Object(i.useState)(),t=Object(c.a)(e,2),a=t[0],n=t[1],o=Object(i.useState)(),s=Object(c.a)(o,2),m=s[0],p=s[1],f=Object(i.useState)(0),d=Object(c.a)(f,2),b=d[0],v=d[1],h=Object(i.useMemo)((function(){return Boolean(m||a)}),[m,a]),g=Object(i.useCallback)((function(e){e instanceof File?(p(e),n(void 0)):(n(e),p(void 0))}),[n,p]),E=Object(i.useCallback)((function(e){v(Math.round(95*e.loaded/e.total))}),[v]);return{setValue:g,isReady:h,resolve:Object(i.useCallback)(function(){var e=Object(l.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=4;break}return n={headers:{"Content-Type":"image/png"},onUploadProgress:E},v(.01),e.abrupt("return",u.a.all([Object(R.a)("/files?key=".concat(m.name)),D(m,t)]).then((function(e){var t=Object(c.a)(e,2),a=t[0],r=t[1],l=a.data;return A.a.put(l,r,n)})).then((function(e){v(100);var t=e.config.url;return t?t.slice(0,t.indexOf("?")):""})));case 4:return v(100),e.abrupt("return",a||"");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,E,a]),progress:b}},L=Object(p.a)((function(e){return{root:{marginBottom:e.spacing(4)},images:{height:e.spacing(50),display:"flex"}}}));t.default=function(){var e=L(),t=Object(m.f)(),a=Object(g.b)().enqueueSnackbar,n=Object(U.b)().user,i=Object(V.a)().mutate,s=J(),p=s.setValue,E=s.progress,j=s.resolve,O=s.isReady,k=J(),y=k.setValue,w=k.progress,C=k.resolve,x=k.isReady,S=function(){var e=Object(l.a)(r.a.mark((function e(){var n,l,o,s,m;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.a.all([j(),C()]);case 3:n=e.sent,l=Object(c.a)(n,2),o=l[0],s=l[1],m={left:{url:o},right:{url:s}},t.push("/feed"),Object(R.c)("/polls/",{contents:m}).then((function(){i(),a("Your poll has been successfully created!",{variant:"success"})})),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),a("Failed to create a poll. Please, try again.",{variant:"error"}),t.push("/feed");case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(f.a,{maxWidth:"sm",disableGutters:!0},o.a.createElement(d.a,{className:e.root},n&&o.a.createElement(P.a,{user:n,info:""}),o.a.createElement(b.a,null),o.a.createElement("div",{className:e.images},o.a.createElement(z,{callback:p,progress:E}),o.a.createElement(z,{callback:y,progress:w})),E||w?o.a.createElement(v.a,{color:"primary"}):o.a.createElement(h.a,{color:"primary",disabled:!(O&&x),variant:"contained",onClick:S,fullWidth:!0},"Submit")))}}}]);
//# sourceMappingURL=10.80599f2e.chunk.js.map
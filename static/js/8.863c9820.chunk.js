(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[8],{312:function(e,t,a){"use strict";var n=a(36),r=a(0),i=a.n(r),o=a(13),c=a(32),l=a(215),s=a(216),u=a(447),m=a(64),d=a(354),h=a.n(d),g=Object(m.a)((function(e){var t;return{root:(t={zIndex:1e3,position:"fixed"},Object(n.a)(t,e.breakpoints.down("sm"),{right:e.spacing(2),bottom:e.spacing(8)}),Object(n.a)(t,e.breakpoints.up("md"),{right:e.spacing(5),bottom:e.spacing(5)}),t)}}));t.a=function(e){var t=e.hideOnScroll,a=void 0!==t&&t,n=g(),r=Object(o.g)(),m=Object(l.a)();return i.a.createElement(s.a,{appear:!1,direction:"up",in:!a||!m},i.a.createElement(c.b,{to:{pathname:"/new",state:{background:r}}},i.a.createElement(u.a,{className:n.root,color:"secondary"},i.a.createElement(h.a,null))))}},328:function(e,t,a){"use strict";var n=a(27),r=a.n(n),i=a(35),o=a(7),c=a(0),l=a.n(c),s=a(290),u=a(94),m=a.n(u),d=a(366),h=a(64),g=a(352),f=a(239),v=a(40),p=a(235),b=a(67),O=a(353),w=a.n(O),j=Object(h.a)({root:{position:"absolute",color:"white",top:"86%",fontSize:20,textShadow:"0 0 3px black",display:"flex",alignItems:"center"},left:{left:30},right:{right:30}}),E=function(e){var t=e.value,a=e.which,n=e.like,r=j();return l.a.createElement("div",{className:"".concat(r.root," ").concat(r[a])},n&&l.a.createElement(w.a,null),"".concat(t,"%"))},y=a(65),k=[{name:"minute",ratio:60},{name:"hour",ratio:60},{name:"day",ratio:24},{name:"week",ratio:7},{name:"month",ratio:4},{name:"year",ratio:12}],x=function(e){var t=((new Date).valueOf()-e.valueOf())/1e3;return t<60?"just now":function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=k[a],r=k[a+1],i=t/n.ratio;if(i<.85*r.ratio){var o=Math.round(i),c=o>1,l=c?o:"a",s=c?"s":"";return"".concat(l," ").concat(n.name).concat(s," ago")}return e(i,a+1)}(t)},C=Object(h.a)({root:{display:"block",cursor:"pointer"}}),N={month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},R=function(e){var t=e.value,a=Object(c.useState)(!0),n=Object(o.a)(a,2),r=n[0],i=n[1],s=C(),u=Object(c.useCallback)((function(){return i((function(e){return!e}))}),[i]),m=Object(c.useMemo)((function(){return new Date(t)}),[t]),d=Object(c.useMemo)((function(){return m.toLocaleString("default",N)}),[m]),h=Object(c.useMemo)((function(){return x(m)}),[m]);return l.a.createElement("div",{role:"presentation",className:s.root,onClick:u},r?h:d)},S=a(95),M=a(26),I=a(33),T=Object(h.a)((function(e){return{media:{display:"flex",height:e.spacing(50)},rateLine:{position:"relative",width:"100%",height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},highlight:{backgroundColor:"".concat(e.palette.primary.main," !important")},fillRateLine:{height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},description:{fontSize:14,padding:e.spacing(0,2,1.25),wordWrap:"break-word",whiteSpace:"pre-wrap"}}})),z=l.a.memo((function(e){var t,a,n=e.poll,r=e.setPoll,i=T(),o=n.author,c=n.contents,s=c.left,u=c.right,m=n.vote,d=Object(b.b)().enqueueSnackbar,h=Object(I.b)().isAuthenticated,O=function(e){return function(){if(h)if(m)d("You have already voted in this poll",{variant:"error"});else{var t={which:e,pollId:n._id},a=Object(g.a)({},n);a.contents[e].votes+=1,a.vote=Object(g.a)({_id:"",authorId:"",createdAt:new Date},t),r(a),Object(M.c)("votes/",t)}else d("Unauthorized users can not vote in polls",{variant:"error"})}};s.votes||u.votes?a=100-(t=Math.round(s.votes/(s.votes+u.votes)*100)):(t=0,a=0);var w=s.votes>=u.votes?"left":"right";return l.a.createElement(f.a,{elevation:3},l.a.createElement(y.a,{user:o,info:l.a.createElement(R,{value:n.createdAt})}),n.description&&l.a.createElement(v.a,{className:i.description},n.description),l.a.createElement("div",{className:i.media},l.a.createElement(p.a,{onDoubleClick:O("left"),className:i.media},l.a.createElement(S.a,{src:s.url}),l.a.createElement(E,{value:t,which:"left",like:"left"===(null===m||void 0===m?void 0:m.which)})),l.a.createElement(p.a,{onDoubleClick:O("right"),className:i.media},l.a.createElement(S.a,{src:u.url}),l.a.createElement(E,{value:a,which:"right",like:"right"===(null===m||void 0===m?void 0:m.which)}))),l.a.createElement("div",{className:"".concat(i.rateLine," ").concat("right"===w?i.highlight:"")},l.a.createElement("div",{className:"".concat(i.fillRateLine," ").concat("left"===w?i.highlight:""),style:{width:"".concat(t,"%")}})))})),L=Object(h.a)((function(e){return{root:{paddingBottom:e.spacing(8)}}})),B=l.a.memo((function(e){var t=e.polls,a=e.mutate,n=e.index,r=e.style,i=e.cache,o=e.parent,u=e._key,m=L(),h=t[n],g=Object(c.useCallback)((function(e){var r=Object(d.a)(t);r[n]=e,a([],!1),a(r,!1)}),[a,n,t]);return l.a.createElement(s.b,{cache:i,columnIndex:0,rowIndex:n,parent:o},l.a.createElement("div",{key:"".concat(u,"-").concat(h._id),className:m.root,style:r},l.a.createElement(z,{poll:h,setPoll:g})))}),(function(e,t){return e._key===t._key&&(e.index===t.index&&(e.polls===t.polls&&e.style.height===t.style.height))})),A=new s.c({fixedWidth:!0});t.a=function(e){var t=e.polls,a=e.mutate,n=Object(c.useState)(10),u=Object(o.a)(n,2),d=u[0],h=u[1];Object(c.useEffect)((function(){A.clearAll()}),[t]);var g=Object(c.useCallback)((function(e){var n=e.index,r=e.style,i=e.key,o=e.parent;return l.a.createElement(B,{polls:t,mutate:a,index:n,style:r,cache:A,parent:o,key:i,_key:i})}),[t,a]),f=Object(c.useCallback)(Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h((function(e){return e+10}));case 1:case"end":return e.stop()}}),e)}))),[]),v=Object(c.useCallback)((function(e){return e.index<d-1||d===t.length}),[d,t]),p=Object(c.useMemo)((function(){return m.a.min([d,t.length])||t.length}),[d,t.length]);return l.a.createElement(s.f,null,(function(e){var t=e.height,a=e.isScrolling,n=e.registerChild,r=e.onChildScroll,i=e.scrollTop;return l.a.createElement(s.a,{disableHeight:!0},(function(e){var o=e.width;return l.a.createElement("div",{ref:n},l.a.createElement(s.d,{isRowLoaded:v,loadMoreRows:f,rowCount:p,threshold:1},(function(e){var n=e.onRowsRendered,c=e.registerChild;return l.a.createElement(s.e,{autoHeight:!0,height:t,isScrolling:a,onScroll:r,rowCount:p,rowHeight:A.rowHeight,rowRenderer:g,scrollTop:i,width:o,containerStyle:{pointerEvents:"auto"},overscanRowCount:2,onRowsRendered:n,ref:c,deferredMeasurementCache:A})})))}))}))}},457:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),o=a(238),c=a(27),l=a.n(c),s=a(35),u=a(7),m=a(1),d=a(2),h=(a(5),a(3)),g=a(4),f=a(6),v=n.forwardRef((function(e,t){var a=e.anchorOrigin,r=void 0===a?{vertical:"top",horizontal:"right"}:a,i=e.badgeContent,o=e.children,c=e.classes,l=e.className,s=e.color,u=void 0===s?"default":s,g=e.component,v=void 0===g?"span":g,p=e.invisible,b=e.max,O=void 0===b?99:b,w=e.overlap,j=void 0===w?"rectangle":w,E=e.showZero,y=void 0!==E&&E,k=e.variant,x=void 0===k?"standard":k,C=Object(d.a)(e,["anchorOrigin","badgeContent","children","classes","className","color","component","invisible","max","overlap","showZero","variant"]),N=p;null==p&&(0===i&&!y||null==i&&"dot"!==x)&&(N=!0);var R="";return"dot"!==x&&(R=i>O?"".concat(O,"+"):i),n.createElement(v,Object(m.a)({className:Object(h.a)(c.root,l),ref:t},C),o,n.createElement("span",{className:Object(h.a)(c.badge,c["".concat(r.horizontal).concat(Object(f.a)(r.vertical),"}")],c["anchorOrigin".concat(Object(f.a)(r.vertical)).concat(Object(f.a)(r.horizontal)).concat(Object(f.a)(j))],"default"!==u&&c["color".concat(Object(f.a)(u))],N&&c.invisible,"dot"===x&&c.dot)},R))})),p=Object(g.a)((function(e){return{root:{position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0},badge:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorError:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText},dot:{borderRadius:4,height:8,minWidth:8,padding:0},anchorOriginTopRightRectangle:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightRectangle:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftRectangle:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftRectangle:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},anchorOriginTopRightCircle:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightCircle:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftCircle:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftCircle:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},invisible:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}}),{name:"MuiBadge"})(v),b=a(134),O=a(40),w=a(16),j=Object(w.a)(r.a.createElement(r.a.Fragment,null,r.a.createElement("circle",{cx:"12",cy:"12",r:"3.2"}),r.a.createElement("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),"CameraAlt"),E=Object(w.a)(r.a.createElement("path",{d:"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline"),y=a(64),k=a(12),x=n.forwardRef((function(e,t){var a=e.animation,r=void 0===a?"pulse":a,i=e.classes,o=e.className,c=e.component,l=void 0===c?"span":c,s=e.height,u=e.variant,g=void 0===u?"text":u,f=e.width,v=Object(d.a)(e,["animation","classes","className","component","height","variant","width"]),p=Boolean(v.children);return n.createElement(l,Object(m.a)({ref:t,className:Object(h.a)(i.root,i[g],o,p&&[i.withChildren,!f&&i.fitContent,!s&&i.heightAuto],!1!==r&&i[r])},v,{style:Object(m.a)({width:f,height:s},v.style)}))})),C=Object(g.a)((function(e){return{root:{display:"block",backgroundColor:Object(k.c)(e.palette.text.primary,"light"===e.palette.type?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:e.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(e.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}}),{name:"MuiSkeleton"})(x),N=Object(y.a)({root:{position:"relative"},menuButton:{width:200,height:50,textAlign:"center"},menuNumber:{fontWeight:800,color:"black"},menuText:{color:"darkgray"}}),R=function(e){var t=e.text,a=e.value,n=N();return r.a.createElement("div",{className:n.menuButton},r.a.createElement("div",{className:n.menuNumber},a),r.a.createElement("div",{className:n.menuText},t))},S=a(113),M=a(46),I=a(26),T=a(33),z=a(111),L=Object(y.a)((function(e){return{root:{position:"relative",marginBottom:e.spacing(4)},avatar:{width:150,height:150,position:"relative",margin:"0 auto"},darken:{filter:"brightness(50%)"},name:{margin:e.spacing(1,0),display:"flex",alignItems:"center",justifyContent:"center"},verified:{marginLeft:e.spacing(.5),width:e.spacing(3),height:e.spacing(3)},profileMenu:{display:"flex",width:"100%",height:50,marginTop:e.spacing(6),borderBottom:"1px solid lightgray"},menuButton:{width:200,height:50,textAlign:"center"},badge:{width:e.spacing(5),height:e.spacing(5),borderRadius:"50%",cursor:"pointer",background:"#d3d3d3",display:"flex",alignItems:"center","& svg":{margin:"0 auto"}},avatarContainer:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center"},menuNumber:{fontWeight:800,color:"black"},menuText:{color:"darkgray"},skeleton:{margin:"10px auto",borderRadius:2},progress:{position:"absolute",color:"white"}}})),B=function(e){var t=e.savedPolls,a=e.totalVotes,i=e.setUserInfo,o=e.userInfo,c=L(),m=Object(T.b)().user,d=Object(n.useState)(0),h=Object(u.a)(d,2),g=h[0],f=h[1],v=Object(n.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new Date(e),a="0".concat(t.getDate()).slice(-2),n="0".concat(t.getMonth()).slice(-2),r=t.getFullYear();return"".concat(r,"-").concat(n,"-").concat(a)}(null===o||void 0===o?void 0:o.createdAt)}),[o]),w=Object(n.useCallback)(function(){var e=Object(s.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m&&Object(z.a)(t,.8,f).then((function(e){return Object(I.b)("/users/".concat(m._id),{avatarUrl:e})})).then((function(e){return i(e.data)})).then((function(){return f(0)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,i]);return r.a.createElement("div",{className:c.root},o?(null===o||void 0===o?void 0:o._id)===(null===m||void 0===m?void 0:m._id)?r.a.createElement("div",{className:c.avatarContainer},r.a.createElement(p,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},className:c.avatarContainer,badgeContent:r.a.createElement(S.a,{callback:w},r.a.createElement("div",{className:c.badge},r.a.createElement(j,null)))},r.a.createElement(M.a,{className:[c.avatar,g&&c.darken].join(" "),user:o}),g>0&&r.a.createElement(b.a,{variant:"static",value:g,className:c.progress}))):r.a.createElement(M.a,{className:c.avatar,user:o}):r.a.createElement(C,{animation:"wave",variant:"circle",width:150,height:150,className:c.avatar}),o?r.a.createElement(O.a,{variant:"h5",className:c.name},null===o||void 0===o?void 0:o.username,(null===o||void 0===o?void 0:o.verified)&&r.a.createElement(E,{className:c.verified,color:"primary"})):r.a.createElement(C,{animation:"wave",variant:"rect",width:100,height:20,className:c.skeleton}),r.a.createElement("div",{className:c.profileMenu},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(R,{text:"Polls",value:t}),r.a.createElement(R,{text:"Since",value:v}),r.a.createElement(R,{text:"Total votes",value:a})):r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{animation:"wave",variant:"rect",width:170,height:20,className:c.skeleton}),r.a.createElement(C,{animation:"wave",variant:"rect",width:170,height:20,className:c.skeleton}),r.a.createElement(C,{animation:"wave",variant:"rect",width:170,height:20,className:c.skeleton}))))},A=a(328),W=a(70),D=a(312),$=a(66),_=a(59);t.default=function(){var e=Object(i.f)(),t=Object(i.h)().username,a=Object(T.b)().user,c=Object(_.e)(t),l=c.data,s=c.mutate,u=Object(_.d)(t),m=u.data,d=u.mutate,h=u.isValidating;Object(n.useEffect)((function(){t||(a?e.push("/profile/".concat(a.username)):e.push("/login"))}),[t,e,a]);var g=Object(n.useMemo)((function(){return(null===a||void 0===a?void 0:a.username)===t}),[a,t]),f=Object(n.useMemo)((function(){return g?"Create a poll and it will show up here.":"This user has not uploaded anything yet."}),[g]),v=Object(n.useMemo)((function(){return(null===m||void 0===m?void 0:m.reduce((function(e,t){var a=t.contents,n=a.left,r=a.right;return e+n.votes+r.votes}),0))||0}),[m]);return r.a.createElement(o.a,{maxWidth:"sm",disableGutters:!0},r.a.createElement(B,{userInfo:l,setUserInfo:s,savedPolls:(null===m||void 0===m?void 0:m.length)||0,totalVotes:v}),m?m.length?r.a.createElement(A.a,{polls:m,mutate:d}):r.a.createElement($.a,{message:f}):h&&r.a.createElement(W.a,null),g&&r.a.createElement(D.a,null))}}}]);
//# sourceMappingURL=8.863c9820.chunk.js.map
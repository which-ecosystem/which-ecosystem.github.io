{"version":3,"sources":["components/Header/SearchBar.tsx","components/Header/Header.tsx","components/ScrollTopArrow/ScrollTopArrow.tsx","containers/Page/Page.tsx","index.tsx","requests.ts","hooks/useLocalStorage.ts","hooks/useAuth.tsx","components/UserStrip/UserStrip.tsx","hooks/APIClient.ts","components/Loading/Loading.tsx"],"names":["useStyles","makeStyles","theme","root","position","background","borderRadius","padding","spacing","display","alignItems","results","width","top","listItem","SearchBar","React","memo","useState","setResults","query","setQuery","debouncedQuery","setDebouncedQuery","history","useHistory","classes","useEffect","handler","setTimeout","clearTimeout","get","then","response","data","catch","handleClose","handleNavigate","index","username","push","SearchResults","ClickAwayListener","onClickAway","Paper","className","List","map","result","key","_id","ListItem","button","onClick","UserStrip","user","length","Divider","InputBase","placeholder","value","onChange","event","target","trim","mobile","bottom","toolbar","justifyContent","browserToolbar","margin","logo","fontWeight","cursor","color","round","height","Header","useAuth","useTheme","isMobile","useMediaQuery","breakpoints","down","handleHome","FeedButton","IconButton","NotificationsButton","ProfileButton","avatarUrl","Avatar","src","BrowserVersion","AppBar","Toolbar","Typography","variant","MobileVersion","left","zIndex","opacity","palette","primary","main","icon","fontSize","ScrollTopArrow","showScroll","setShowScroll","window","addEventListener","pageYOffset","scrollTo","Profile","lazy","Feed","Login","Registration","Home","Notifications","up","Page","maxSnack","anchorOrigin","vertical","horizontal","fallback","Loading","exact","path","component","createMuiTheme","teal","light","App","ThemeProvider","CssBaseline","ReactDOM","render","document","getElementById","requests","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","_","set","error","message","removeItem","location","reload","Promise","reject","post","patch","put","state","setState","useCallback","setItem","authContext","createContext","undefined","login","a","logout","isAuthenticated","AuthProvider","children","auth","useLocalStorage","remember","setRemember","setUsername","setToken","useUser","useMemo","Boolean","name","password","shouldRemember","strategy","accessToken","useProvideAuth","Provider","useContext","verified","marginLeft","avatar","info","alt","toUpperCase","title","subheader","fetcher","endpoint","arrayOptions","initialData","revalidateOnMount","useSWR","url","useProfile","id","useFeed","revalidateOnFocus","useFeedback","loader","textAlign","marginTop","style"],"mappings":"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","file":"static/js/main.a8c5d441.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {\n  InputBase,\n  List,\n  ListItem,\n  Paper,\n  Divider,\n  ClickAwayListener\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { User } from 'which-types';\n\nimport { get } from '../../requests';\nimport UserStrip from '../UserStrip/UserStrip';\n\nconst INTERVAL = 300;\nconst LIMIT = 7;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'relative',\n    background: 'rgba(255, 255, 255, 0.5)',\n    borderRadius: '2px',\n    padding: theme.spacing(0.5),\n    display: 'flex',\n    alignItems: 'center'\n  },\n  results: {\n    position: 'absolute',\n    width: '100%',\n    top: theme.spacing(5)\n  },\n  listItem: {\n    padding: 0\n  }\n}));\n\nconst SearchBar: React.FC = React.memo(() => {\n  const [results, setResults] = useState<User[]>([]);\n  const [query, setQuery] = useState<string>('');\n  const [debouncedQuery, setDebouncedQuery] = useState<string>(query);\n  const history = useHistory();\n  const classes = useStyles();\n\n  useEffect(() => {\n    const handler = setTimeout(() => setDebouncedQuery(query), INTERVAL);\n    return () => clearTimeout(handler);\n  }, [query]);\n\n  useEffect(() => {\n    const fetchPolls = () => {\n      get(`/users?username[$regex]=${debouncedQuery}&$limit=${LIMIT}`)\n        .then(response => setResults(response.data))\n        .catch(() => setResults([]));\n    };\n    if (debouncedQuery) fetchPolls();\n    else setResults([]);\n  }, [debouncedQuery]);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n    setQuery(event.target.value.trim());\n  };\n\n  const handleClose = () => {\n    setDebouncedQuery('');\n    setQuery('');\n  };\n\n  const handleNavigate = (index: number) => () => {\n    const { username } = results[index];\n    history.push(`/profile/${username}`);\n    handleClose();\n  };\n\n  const SearchResults = (\n    <ClickAwayListener onClickAway={handleClose}>\n      <Paper className={classes.results}>\n        <List>\n          {\n          results.map((result, index) => (\n            <div key={result._id}>\n              <ListItem button onClick={handleNavigate(index)} className={classes.listItem}>\n                <UserStrip user={result} />\n              </ListItem>\n              {(index < results.length - 1) && <Divider />}\n            </div>\n          ))\n        }\n        </List>\n      </Paper>\n    </ClickAwayListener>\n  );\n\n  return (\n    <div className={classes.root}>\n      <SearchIcon />\n      <InputBase\n        placeholder=\"Search...\"\n        value={query}\n        onChange={handleChange}\n      />\n      {results.length > 0 && SearchResults}\n    </div>\n  );\n});\n\n\nexport default SearchBar;\n\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  AppBar,\n  Toolbar,\n  IconButton,\n  Typography,\n  Avatar,\n  useMediaQuery\n} from '@material-ui/core';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport HomeIcon from '@material-ui/icons/Home';\n\nimport { useAuth } from '../../hooks/useAuth';\nimport SearchBar from './SearchBar';\n\n\nconst useStyles = makeStyles(theme => ({\n  mobile: {\n    top: 'auto',\n    bottom: 0\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-around'\n  },\n  browserToolbar: {\n    width: '60%',\n    margin: 'auto'\n  },\n  logo: {\n    fontWeight: 'bold',\n    cursor: 'pointer',\n    color: 'white'\n  },\n  round: {\n    width: theme.spacing(3),\n    height: theme.spacing(3)\n  }\n}));\n\n\nconst Header: React.FC = React.memo(() => {\n  const classes = useStyles();\n  const { user } = useAuth();\n  const theme = useTheme();\n  const history = useHistory();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  const handleHome = (): void => {\n    history.push('/');\n  };\n\n  const handleFeed = (): void => {\n    history.push('/feed');\n  };\n\n  const handleProfile = (): void => {\n    if (user) history.push(`/profile/${user.username}`);\n    else history.push('/login');\n  };\n\n  const handleNotifications = (): void => {\n    history.push('/notifications');\n  };\n\n  const FeedButton = (\n    <IconButton onClick={handleFeed}>\n      <HomeIcon />\n    </IconButton>\n  );\n\n  const NotificationsButton = (\n    <IconButton onClick={handleNotifications}>\n      <NotificationsIcon />\n    </IconButton>\n  );\n\n  const ProfileButton = (\n    <IconButton onClick={handleProfile}>\n      {\n        user?.avatarUrl\n          ? <Avatar className={classes.round} src={user?.avatarUrl} />\n          : <AccountCircle />\n      }\n    </IconButton>\n  );\n\n  const BrowserVersion = (\n    <AppBar position=\"fixed\">\n      <Toolbar className={`${classes.toolbar} ${classes.browserToolbar}`}>\n        <Typography variant=\"h5\" className={classes.logo} onClick={handleHome}>\n          Which\n        </Typography>\n        <SearchBar />\n        <div>\n          {FeedButton}\n          {NotificationsButton}\n          {ProfileButton}\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n\n  const MobileVersion = (\n    <AppBar position=\"fixed\" className={classes.mobile}>\n      <Toolbar className={classes.toolbar}>\n        <IconButton onClick={handleHome}>\n          <Typography className={`${classes.logo} ${classes.round}`}>W</Typography>\n        </IconButton>\n        {FeedButton}\n        {NotificationsButton}\n        {ProfileButton}\n      </Toolbar>\n    </AppBar>\n  );\n\n  return isMobile ? MobileVersion : BrowserVersion;\n});\n\nexport default Header;\n\n","import React, { useState } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useMediaQuery } from '@material-ui/core';\nimport ArrowUpwardIcon from '@material-ui/icons/ArrowUpward';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'fixed',\n    bottom: theme.spacing(10),\n    left: theme.spacing(10),\n    zIndex: 1000,\n    cursor: 'pointer',\n    opacity: 0.4,\n    '&:hover': {\n      opacity: 1\n    },\n    background: theme.palette.primary.main,\n    borderRadius: '50%'\n  },\n  icon: {\n    fontSize: 80,\n    color: 'white'\n  }\n}));\n\nconst ScrollTopArrow: React.FC = React.memo(() => {\n  const [showScroll, setShowScroll] = useState(false);\n  const theme = useTheme();\n  const classes = useStyles();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  const checkScrollTop = () => {\n    if (!showScroll && window.pageYOffset > 400) {\n      setShowScroll(true);\n    } else if (showScroll && window.pageYOffset <= 400) {\n      setShowScroll(false);\n    }\n  };\n\n  const scrollTop = () => {\n    window.scrollTo({ top: 0 });\n  };\n\n  window.addEventListener('scroll', checkScrollTop);\n\n  return (\n    <div className={classes.root}>\n      {\n        showScroll\n        && !isMobile\n        && <ArrowUpwardIcon className={classes.icon} color=\"primary\" onClick={scrollTop} />\n      }\n    </div>\n  );\n});\n\nexport default ScrollTopArrow;\n","import React, { Suspense } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useMediaQuery } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport { Switch, Route } from 'react-router-dom';\nimport Loading from '../../components/Loading/Loading';\n\nconst Profile = React.lazy(() => import('../Profile/Profile'));\nconst Feed = React.lazy(() => import('../Feed/Feed'));\nconst Login = React.lazy(() => import('../Login/Login'));\nconst Registration = React.lazy(() => import('../Registration/Registration'));\nconst Home = React.lazy(() => import('../Home/Home'));\nconst Notifications = React.lazy(() => import('../Notifications/Notifications'));\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    [theme.breakpoints.down('sm')]: {\n      margin: theme.spacing(2, 0, 12, 0)\n    },\n    [theme.breakpoints.up('md')]: {\n      margin: theme.spacing(15, 5, 8, 5)\n    }\n  }\n}));\n\n\nconst Page: React.FC = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  return (\n    <SnackbarProvider\n      maxSnack={isMobile ? 1 : 3}\n      anchorOrigin={{\n        vertical: isMobile ? 'top' : 'bottom',\n        horizontal: 'right'\n      }}\n    >\n      <div className={classes.root}>\n        <Suspense fallback={<Loading />}>\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route exact path=\"/login\" component={Login} />\n            <Route exact path=\"/registration\" component={Registration} />\n            <Route exact path=\"/feed\" component={Feed} />\n            <Route exact path=\"/notifications\" component={Notifications} />\n            <Route path=\"/profile/:username\" component={Profile} />\n          </Switch>\n        </Suspense>\n      </div>\n    </SnackbarProvider>\n  );\n};\n\n\nexport default Page;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter } from 'react-router-dom';\nimport teal from '@material-ui/core/colors/teal';\nimport 'typeface-roboto';\n\nimport Header from './components/Header/Header';\nimport ScrollTopArrow from './components/ScrollTopArrow/ScrollTopArrow';\nimport Page from './containers/Page/Page';\nimport { AuthProvider } from './hooks/useAuth';\n\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: teal[700],\n      light: teal[100]\n    }\n  }\n});\n\n\nconst App: React.FC = () => {\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          <Header />\n          <Page />\n          <ScrollTopArrow />\n        </ThemeProvider>\n      </AuthProvider>\n    </BrowserRouter>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n","import axios from 'axios';\nimport _ from 'lodash';\n\nconst baseURL = process.env.NODE_ENV === 'production'\n  ? 'https://which-api.herokuapp.com'\n  : 'http://localhost:3030';\n\nconst requests = axios.create({ baseURL });\n\nrequests.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  return _.set(config, 'headers.Authorization', token);\n});\n\nrequests.interceptors.response.use(response => response, error => {\n  if (error.message === 'Request failed with status code 401' && localStorage.getItem('token')) {\n    localStorage.removeItem('remember');\n    window.location.reload();\n  }\n  return Promise.reject(error);\n});\n\nexport const {\n  get, post, put, patch\n} = requests;\nexport default requests;\n\n","import { useState, useCallback } from 'react';\n\ntype Value = string | null;\ntype Setter = (value: Value) => void;\n\nexport default (key: string): [Value, Setter] => {\n  const [state, setState] = useState<Value>(() => localStorage.getItem(key) || null);\n\n  const update: Setter = useCallback(value => {\n    if (value) localStorage.setItem(key, value);\n    else localStorage.removeItem(key);\n    setState(value);\n  }, [key]);\n\n  return [state, update];\n};\n","import React, {\n  useEffect, useCallback, useMemo, useContext, createContext\n} from 'react';\nimport { User } from 'which-types';\nimport { post } from '../requests';\nimport { useUser } from './APIClient';\nimport useLocalStorage from './useLocalStorage';\n\n\ninterface ContextType {\n  user: User | undefined,\n  login: (username: string, password: string, remember?: boolean) => Promise<boolean>;\n  logout: () => void;\n  isAuthenticated: boolean;\n}\n\nconst authContext = createContext<ContextType>({\n  user: undefined,\n  login: async () => false,\n  logout: () => {},\n  isAuthenticated: false\n});\n\nconst useProvideAuth = () => {\n  const [remember, setRemember] = useLocalStorage('remember');\n  const [username, setUsername] = useLocalStorage('username');\n  const [token, setToken] = useLocalStorage('token');\n  const { data: user } = useUser(username);\n\n  const isAuthenticated = useMemo(() => Boolean(username), [username]);\n\n  const logout = useCallback(() => {\n    setToken(null);\n    setUsername(null);\n  }, [setToken, setUsername]);\n\n  useEffect(() => {\n    // If should not remember, logout\n    if (!remember) logout();\n  }, [remember, logout]);\n\n\n  const login: ContextType['login'] = (name, password, shouldRemember = true) => {\n    return post('/authentication', {\n      strategy: 'local',\n      username: name,\n      password\n    }).then(response => {\n      setToken(response.data.accessToken);\n      setUsername(name);\n      setRemember(shouldRemember ? 'true' : null);\n      return true;\n    }).catch(() => false);\n  };\n\n  return {\n    user, login, logout, token, isAuthenticated\n  };\n};\n\nexport const AuthProvider: React.FC = ({ children }) => {\n  const auth = useProvideAuth();\n  const { Provider } = authContext;\n  return <Provider value={auth}>{children}</Provider>;\n};\n\nexport const useAuth = (): ContextType => {\n  return useContext(authContext);\n};\n\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { makeStyles } from '@material-ui/core/styles';\nimport VerifiedIcon from '@material-ui/icons/CheckCircleOutline';\nimport { Avatar, CardHeader } from '@material-ui/core/';\nimport { User } from 'which-types';\n\n\ninterface PropTypes {\n  user: User;\n  info?: string | JSX.Element\n}\n\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  verified: {\n    marginLeft: theme.spacing(0.5),\n    width: theme.spacing(2),\n    height: theme.spacing(2)\n  },\n  avatar: {\n    cursor: 'pointer'\n  }\n}));\n\n\nconst UserStrip: React.FC<PropTypes> = ({ user, info }) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { username, avatarUrl, verified } = user;\n\n  const handleNavigate = () => {\n    history.push(`/profile/${username}`);\n  };\n\n  const avatar = (\n    <Avatar\n      src={avatarUrl}\n      alt={username[0].toUpperCase()}\n      onClick={handleNavigate}\n      className={classes.avatar}\n    />\n  );\n\n  const title = (\n    <div className={classes.root}>\n      {username}\n      {verified && <VerifiedIcon color=\"primary\" className={classes.verified} />}\n    </div>\n  );\n\n  return <CardHeader avatar={avatar} title={title} subheader={info} />;\n};\n\nexport default UserStrip;\n","import useSWR, { responseInterface } from 'swr';\nimport { User, Poll, Feedback } from 'which-types';\nimport { get } from '../requests';\n\n\ninterface Response<T> extends responseInterface<T, Error> {\n  data: T;\n}\n\nconst fetcher = (endpoint: string) => get(endpoint).then(response => response.data);\n\nconst arrayOptions = {\n  initialData: [],\n  revalidateOnMount: true\n};\n\nexport const useUser = (username: string | null): Response<User> => {\n  return useSWR(\n    username && `/users?username=${username}`,\n    (url: string) => get(url).then(response => response.data[0])\n  ) as Response<User>;\n};\n\nexport const useProfile = (id: string): Response<Poll[]> => {\n  return useSWR(id && `/profiles/${id}`, fetcher, arrayOptions) as Response<Poll[]>;\n};\n\nexport const useFeed = (): Response<Poll[]> => {\n  return useSWR('/feed', fetcher, { ...arrayOptions, revalidateOnFocus: false }) as Response<Poll[]>;\n};\n\nexport const useFeedback = (): Response<Feedback[]> => {\n  return useSWR('/feedback', fetcher, arrayOptions) as Response<Feedback[]>;\n};\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles(theme => ({\n  loader: {\n    width: '100%',\n    textAlign: 'center',\n    marginTop: theme.spacing(10)\n  }\n}));\n\nconst Loading: React.FC = React.memo(() => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.loader}>\n      <CircularProgress color=\"primary\" style={{ margin: '0 auto' }} />\n    </div>\n  );\n});\n\nexport default Loading;\n\n"],"sourceRoot":""}
(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[7],{312:function(e,t,a){"use strict";var n=a(36),r=a(0),i=a.n(r),c=a(13),o=a(32),l=a(215),s=a(216),u=a(447),h=a(64),d=a(354),m=a.n(d),p=Object(h.a)((function(e){var t;return{root:(t={zIndex:1e3,position:"fixed"},Object(n.a)(t,e.breakpoints.down("sm"),{right:e.spacing(2),bottom:e.spacing(8)}),Object(n.a)(t,e.breakpoints.up("md"),{right:e.spacing(5),bottom:e.spacing(5)}),t)}}));t.a=function(e){var t=e.hideOnScroll,a=void 0!==t&&t,n=p(),r=Object(c.g)(),h=Object(l.a)();return i.a.createElement(s.a,{appear:!1,direction:"up",in:!a||!h},i.a.createElement(o.b,{to:{pathname:"/new",state:{background:r}}},i.a.createElement(u.a,{className:n.root,color:"secondary"},i.a.createElement(m.a,null))))}},329:function(e,t,a){"use strict";var n=a(27),r=a.n(n),i=a(35),c=a(7),o=a(0),l=a.n(o),s=a(290),u=a(94),h=a.n(u),d=a(366),m=a(64),p=a(352),g=a(239),f=a(40),v=a(235),b=a(67),w=a(353),E=a.n(w),k=Object(m.a)({root:{position:"absolute",color:"white",top:"86%",fontSize:20,textShadow:"0 0 3px black",display:"flex",alignItems:"center"},left:{left:30},right:{right:30}}),O=function(e){var t=e.value,a=e.which,n=e.like,r=k();return l.a.createElement("div",{className:"".concat(r.root," ").concat(r[a])},n&&l.a.createElement(E.a,null),"".concat(t,"%"))},j=a(65),y=a(95),x=a(26),C=a(33),S={month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},R=Object(m.a)((function(e){return{media:{display:"flex",height:e.spacing(50)},rateLine:{position:"relative",width:"100%",height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},highlight:{backgroundColor:"".concat(e.palette.primary.main," !important")},fillRateLine:{height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},description:{fontSize:14,padding:e.spacing(0,2,1.25),wordWrap:"break-word",whiteSpace:"pre-wrap"}}})),N=l.a.memo((function(e){var t,a,n=e.poll,r=e.setPoll,i=R(),c=n.author,o=n.contents,s=o.left,u=o.right,h=n.vote,d=Object(b.b)().enqueueSnackbar,m=Object(C.b)().isAuthenticated,w=new Date(n.createdAt).toLocaleString("default",S),E=function(e){return function(){if(m)if(h)d("You have already voted in this poll",{variant:"error"});else{var t={which:e,pollId:n._id},a=Object(p.a)({},n);a.contents[e].votes+=1,a.vote=Object(p.a)({_id:"",authorId:"",createdAt:new Date},t),r(a),Object(x.c)("votes/",t)}else d("Unauthorized users can not vote in polls",{variant:"error"})}};s.votes||u.votes?a=100-(t=Math.round(s.votes/(s.votes+u.votes)*100)):(t=0,a=0);var k=s.votes>=u.votes?"left":"right";return l.a.createElement(g.a,{elevation:3},l.a.createElement(j.a,{user:c,info:w}),n.description&&l.a.createElement(f.a,{className:i.description},n.description),l.a.createElement("div",{className:i.media},l.a.createElement(v.a,{onDoubleClick:E("left"),className:i.media},l.a.createElement(y.a,{src:s.url}),l.a.createElement(O,{value:t,which:"left",like:"left"===(null===h||void 0===h?void 0:h.which)})),l.a.createElement(v.a,{onDoubleClick:E("right"),className:i.media},l.a.createElement(y.a,{src:u.url}),l.a.createElement(O,{value:a,which:"right",like:"right"===(null===h||void 0===h?void 0:h.which)}))),l.a.createElement("div",{className:"".concat(i.rateLine," ").concat("right"===k?i.highlight:"")},l.a.createElement("div",{className:"".concat(i.fillRateLine," ").concat("left"===k?i.highlight:""),style:{width:"".concat(t,"%")}})))})),_=Object(m.a)((function(e){return{root:{paddingBottom:e.spacing(8)}}})),D=l.a.memo((function(e){var t=e.polls,a=e.mutate,n=e.index,r=e.style,i=e.cache,c=e.parent,u=e._key,h=_(),m=t[n],p=Object(o.useCallback)((function(e){var r=Object(d.a)(t);r[n]=e,a([],!1),a(r,!1)}),[a,n,t]);return l.a.createElement(s.b,{cache:i,columnIndex:0,rowIndex:n,parent:c},l.a.createElement("div",{key:"".concat(u,"-").concat(m._id),className:h.root,style:r},l.a.createElement(N,{poll:m,setPoll:p})))}),(function(e,t){return e._key===t._key&&(e.index===t.index&&(e.polls===t.polls&&e.style.height===t.style.height))})),I=new s.c({fixedWidth:!0});t.a=function(e){var t=e.polls,a=e.mutate,n=Object(o.useState)(10),u=Object(c.a)(n,2),d=u[0],m=u[1];Object(o.useEffect)((function(){I.clearAll()}),[t]);var p=Object(o.useCallback)((function(e){var n=e.index,r=e.style,i=e.key,c=e.parent;return l.a.createElement(D,{polls:t,mutate:a,index:n,style:r,cache:I,parent:c,key:i,_key:i})}),[t,a]),g=Object(o.useCallback)(Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m((function(e){return e+10}));case 1:case"end":return e.stop()}}),e)}))),[]),f=Object(o.useCallback)((function(e){return e.index<d-1||d===t.length}),[d,t]),v=Object(o.useMemo)((function(){return h.a.min([d,t.length])||t.length}),[d,t.length]);return l.a.createElement(s.f,null,(function(e){var t=e.height,a=e.isScrolling,n=e.registerChild,r=e.onChildScroll,i=e.scrollTop;return l.a.createElement(s.a,{disableHeight:!0},(function(e){var c=e.width;return l.a.createElement("div",{ref:n},l.a.createElement(s.d,{isRowLoaded:f,loadMoreRows:g,rowCount:v,threshold:1},(function(e){var n=e.onRowsRendered,o=e.registerChild;return l.a.createElement(s.e,{autoHeight:!0,height:t,isScrolling:a,onScroll:r,rowCount:v,rowHeight:I.rowHeight,rowRenderer:p,scrollTop:i,width:c,containerStyle:{pointerEvents:"auto"},overscanRowCount:2,onRowsRendered:n,ref:o,deferredMeasurementCache:I})})))}))}))}},448:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(238),c=a(329),o=a(312),l=a(70),s=a(66),u=a(33),h=a(59);t.default=function(){var e=Object(h.a)(),t=e.data,a=e.isValidating,n=e.mutate,d=Object(u.b)().isAuthenticated;return r.a.createElement(i.a,{maxWidth:"sm",disableGutters:!0},d&&r.a.createElement(o.a,{hideOnScroll:!0}),t?t.length?r.a.createElement(c.a,{polls:t,mutate:n}):r.a.createElement(s.a,null):a&&r.a.createElement(l.a,null))}}}]);
//# sourceMappingURL=7.6aed414c.chunk.js.map
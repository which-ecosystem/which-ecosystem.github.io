(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[2],{106:function(e,t,n){e.exports=n(136)},136:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),o=n.n(c),i=n(99),u=n(174),l=n(175),s=n(28),m=n(61),f=n.n(m),d=(n(111),n(6)),p=n(168),b=n(169),h=n(142),g=n(170),v=n(171),E=n(50),O=n(100),j=n(30),w=n(97),k=n.n(w),y=n(96),x=n.n(y),C=n(95),N=n.n(C),S=n(41),I=n(16),z=n(94),P=n.n(z),T=n(164),A=n(139),U=n(165),R=n(166),L=n(167),W=n(176),q=n(24),B=n(64),J=Object(O.a)((function(e){return{root:{position:"relative",background:"rgba(255, 255, 255, 0.5)",borderRadius:"2px",padding:e.spacing(.5),display:"flex",alignItems:"center"},results:{position:"absolute",width:"100%",top:e.spacing(5)},listItem:{padding:0}}})),M=r.a.memo((function(){var e=Object(a.useState)([]),t=Object(I.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),i=Object(I.a)(o,2),u=i[0],l=i[1],s=Object(a.useState)(u),m=Object(I.a)(s,2),f=m[0],p=m[1],b=Object(d.f)(),h=J();Object(a.useEffect)((function(){var e=setTimeout((function(){return p(u)}),300);return function(){return clearTimeout(e)}}),[u]),Object(a.useEffect)((function(){f?Object(q.a)("/users?username[$regex]=".concat(f,"&$limit=").concat(7)).then((function(e){return c(e.data)})).catch((function(){return c([])})):c([])}),[f]);var g=function(){p(""),l("")},v=function(e){return function(){var t=n[e].username;b.push("/profile/".concat(t)),g()}},E=r.a.createElement(T.a,{onClickAway:g},r.a.createElement(A.a,{className:h.results},r.a.createElement(U.a,null,n.map((function(e,t){return r.a.createElement("div",{key:e._id},r.a.createElement(R.a,{button:!0,onClick:v(t),className:h.listItem},r.a.createElement(B.a,{user:e})),t<n.length-1&&r.a.createElement(L.a,null))})))));return r.a.createElement("div",{className:h.root},r.a.createElement(P.a,null),r.a.createElement(W.a,{placeholder:"Search...",value:u,onChange:function(e){l(e.target.value.trim())}}),n.length>0&&E)})),Y=Object(O.a)((function(e){return{mobile:{top:"auto",bottom:0},toolbar:{display:"flex",justifyContent:"space-around"},browserToolbar:{width:"60%",margin:"auto"},logo:{fontWeight:"bold",cursor:"pointer",color:"white"},round:{width:e.spacing(3),height:e.spacing(3)}}})),$=r.a.memo((function(){var e=Y(),t=Object(S.b)().user,n=Object(j.a)(),a=Object(d.f)(),c=Object(p.a)(n.breakpoints.down("sm")),o=function(){a.push("/")},i=r.a.createElement(b.a,{onClick:function(){a.push("/feed")}},r.a.createElement(N.a,null)),u=r.a.createElement(b.a,{onClick:function(){a.push("/notifications")}},r.a.createElement(x.a,null)),l=r.a.createElement(b.a,{onClick:function(){t?a.push("/profile/".concat(t.username)):a.push("/login")}},(null===t||void 0===t?void 0:t.avatarUrl)?r.a.createElement(h.a,{className:e.round,src:null===t||void 0===t?void 0:t.avatarUrl}):r.a.createElement(k.a,null)),s=r.a.createElement(g.a,{position:"fixed"},r.a.createElement(v.a,{className:"".concat(e.toolbar," ").concat(e.browserToolbar)},r.a.createElement(E.a,{variant:"h5",className:e.logo,onClick:o},"Which"),r.a.createElement(M,null),r.a.createElement("div",null,i,u,l))),m=r.a.createElement(g.a,{position:"fixed",className:e.mobile},r.a.createElement(v.a,{className:e.toolbar},r.a.createElement(b.a,{onClick:o},r.a.createElement(E.a,{className:"".concat(e.logo," ").concat(e.round)},"W")),i,u,l));return c?m:s})),D=n(98),F=n.n(D),_=Object(O.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(10),left:e.spacing(10),zIndex:1e3,cursor:"pointer",opacity:.4,"&:hover":{opacity:1},background:e.palette.primary.main,borderRadius:"50%"},icon:{fontSize:80,color:"white"}}})),G=r.a.memo((function(){var e=Object(a.useState)(!1),t=Object(I.a)(e,2),n=t[0],c=t[1],o=Object(j.a)(),i=_(),u=Object(p.a)(o.breakpoints.down("sm"));return window.addEventListener("scroll",(function(){!n&&window.pageYOffset>400?c(!0):n&&window.pageYOffset<=400&&c(!1)})),r.a.createElement("div",{className:i.root},n&&!u&&r.a.createElement(F.a,{className:i.icon,color:"primary",onClick:function(){window.scrollTo({top:0})}}))})),H=n(36),K=n(66),Q=n(87),V=r.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,367))})),X=r.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(6)]).then(n.bind(null,370))})),Z=r.a.lazy((function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,369))})),ee=r.a.lazy((function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,361))})),te=r.a.lazy((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,371))})),ne=r.a.lazy((function(){return n.e(10).then(n.bind(null,365))})),ae=Object(O.a)((function(e){var t;return{root:(t={},Object(H.a)(t,e.breakpoints.down("sm"),{margin:e.spacing(2,0,12,0)}),Object(H.a)(t,e.breakpoints.up("md"),{margin:e.spacing(15,5,8,5)}),t)}})),re=function(){var e=ae(),t=Object(j.a)(),n=Object(p.a)(t.breakpoints.down("sm"));return r.a.createElement(K.a,{maxSnack:n?1:3,anchorOrigin:{vertical:n?"top":"bottom",horizontal:"right"}},r.a.createElement("div",{className:e.root},r.a.createElement(a.Suspense,{fallback:r.a.createElement(Q.a,null)},r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:te}),r.a.createElement(d.a,{exact:!0,path:"/login",component:Z}),r.a.createElement(d.a,{exact:!0,path:"/registration",component:ee}),r.a.createElement(d.a,{exact:!0,path:"/feed",component:X}),r.a.createElement(d.a,{exact:!0,path:"/notifications",component:ne}),r.a.createElement(d.a,{path:"/profile/:username",component:V})))))},ce=Object(i.a)({palette:{primary:{main:f.a[700],light:f.a[100]}}}),oe=function(){return r.a.createElement(s.a,null,r.a.createElement(S.a,null,r.a.createElement(u.a,{theme:ce},r.a.createElement(l.a,null),r.a.createElement($,null),r.a.createElement(re,null),r.a.createElement(G,null))))};o.a.render(r.a.createElement(oe,null),document.getElementById("root"))},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return s}));var a=n(88),r=n.n(a),c=n(89),o=n.n(c),i=r.a.create({baseURL:"https://which-api.herokuapp.com"});i.interceptors.request.use((function(e){var t=localStorage.getItem("token");return o.a.set(e,"headers.Authorization",t)})),i.interceptors.response.use((function(e){return e}),(function(e){return"Request failed with status code 401"===e.message&&localStorage.getItem("token")&&(localStorage.removeItem("remember"),window.location.reload()),Promise.reject(e)}));var u=i.get,l=i.post,s=(i.put,i.patch)},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var a=n(16),r=n(58),c=n.n(r),o=n(73),i=n(0),u=n.n(i),l=n(24),s=n(67),m=function(e){var t=Object(i.useState)((function(){return localStorage.getItem(e)||null})),n=Object(a.a)(t,2),r=n[0],c=n[1];return[r,Object(i.useCallback)((function(t){t?localStorage.setItem(e,t):localStorage.removeItem(e),c(t)}),[e])]},f=Object(i.createContext)({user:void 0,login:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){},isAuthenticated:!1}),d=function(e){var t=e.children,n=function(){var e=m("remember"),t=Object(a.a)(e,2),n=t[0],r=t[1],c=m("username"),o=Object(a.a)(c,2),u=o[0],f=o[1],d=m("token"),p=Object(a.a)(d,2),b=p[0],h=p[1],g=Object(s.d)(u).data,v=Object(i.useMemo)((function(){return Boolean(u)}),[u]),E=Object(i.useCallback)((function(){h(null),f(null)}),[h,f]);Object(i.useEffect)((function(){n||E()}),[n,E]);return{user:g,login:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(l.c)("/authentication",{strategy:"local",username:e,password:t}).then((function(t){return h(t.data.accessToken),f(e),r(n?"true":null),!0})).catch((function(){return!1}))},logout:E,token:b,isAuthenticated:v}}(),r=f.Provider;return u.a.createElement(r,{value:n},t)},p=function(){return Object(i.useContext)(f)}},64:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(6),o=n(100),i=n(84),u=n.n(i),l=n(142),s=n(138),m=Object(o.a)((function(e){return{root:{display:"flex",alignItems:"center"},verified:{marginLeft:e.spacing(.5),width:e.spacing(2),height:e.spacing(2)},avatar:{cursor:"pointer"}}}));t.a=function(e){var t=e.user,n=e.info,a=m(),o=Object(c.f)(),i=t.username,f=t.avatarUrl,d=t.verified,p=r.a.createElement(l.a,{src:f,alt:i[0].toUpperCase(),onClick:function(){o.push("/profile/".concat(i))},className:a.avatar}),b=r.a.createElement("div",{className:a.root},i,d&&r.a.createElement(u.a,{color:"primary",className:a.verified}));return r.a.createElement(s.a,{avatar:p,title:b,subheader:n})}},67:function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return m}));var a=n(52),r=n(40),c=n(24),o=function(e){return Object(c.a)(e).then((function(e){return e.data}))},i={initialData:[],revalidateOnMount:!0},u=function(e){return Object(r.a)(e&&"/users?username=".concat(e),(function(e){return Object(c.a)(e).then((function(e){return e.data[0]}))}))},l=function(e){return Object(r.a)(e&&"/profiles/".concat(e),o,i)},s=function(){return Object(r.a)("/feed",o,Object(a.a)(Object(a.a)({},i),{},{revalidateOnFocus:!1}))},m=function(){return Object(r.a)("/feedback",o,i)}},87:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(140),o=n(100),i=Object(o.a)((function(e){return{loader:{width:"100%",textAlign:"center",marginTop:e.spacing(10)}}})),u=r.a.memo((function(){var e=i();return r.a.createElement("div",{className:e.loader},r.a.createElement(c.a,{color:"primary",style:{margin:"0 auto"}}))}));t.a=u}},[[106,3,4]]]);
//# sourceMappingURL=main.d635ec8c.chunk.js.map
(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[7],{223:function(e,t,a){"use strict";var n=a(19),i=a(0),r=a.n(i),c=a(102),l=a(142),o=a(233),s=a.n(o),u=a(232),m=a.n(u),d=Object(c.a)((function(e){return{container:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},success:{opacity:"100%",filterBrightness:"100%",filterSaturate:"100%"},loading:{opacity:0,filterBrightness:0,filterSaturate:"20%",position:"absolute"},error:{display:"none"},errorIcon:{color:m.a[300],width:e.spacing(6),height:e.spacing(6)}}})),h=r.a.memo((function(e){var t=e.src,a=e.alt,c=e.className,o=e.animationDuration,u=void 0===o?1e3:o,m=e.disableLoading,h=void 0!==m&&m,v=d(),g=Object(i.useState)("loading"),p=Object(n.a)(g,2),f=p[0],b=p[1],E=Object(i.useCallback)((function(){b("success")}),[b]),w=Object(i.useCallback)((function(){b("error")}),[b]),y=Object(i.useMemo)((function(){return"\n    filterBrightness ".concat(.75*u,"ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    filterSaturate ").concat(u,"ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    opacity ").concat(u/2,"ms cubic-bezier(0.4, 0.0, 0.2, 1)\n  ")}),[u]),k=r.a.createElement("img",{src:t,alt:a,className:"".concat(c," ").concat(v[f]),style:{transition:y},onLoad:E,onError:w});return r.a.createElement(r.a.Fragment,null,t&&k,"success"!==f&&r.a.createElement("div",{className:v.container},"error"!==f&&t?!h&&r.a.createElement(l.a,{color:"primary"}):r.a.createElement(s.a,{className:v.errorIcon})))}));t.a=h},224:function(e,t,a){"use strict";var n=a(0),i=a.n(n),r=a(55),c=a(102),l=a(225),o=a.n(l),s=a(226),u=a.n(s),m=Object(c.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},img:{margin:e.spacing(2),width:e.spacing(24)}}})),d={default:{icon:o.a,tagline:"No content"},construction:{icon:u.a,tagline:"Coming soon"}};t.a=function(e){var t=e.variant,a=void 0===t?"default":t,n=e.message,c=m(),l=d[a],o=l.icon,s=l.tagline;return i.a.createElement("div",{className:c.root},i.a.createElement("img",{src:o,className:c.img,alt:"No content"}),i.a.createElement(r.a,{variant:"h5"},s),i.a.createElement(r.a,{color:"textSecondary"},i.a.createElement("p",null,n)))}},225:function(e,t,a){e.exports=a.p+"static/media/noContent.527b7724.svg"},226:function(e,t,a){e.exports=a.p+"static/media/construction.07ebb9e5.svg"},255:function(e,t,a){"use strict";var n=a(57),i=a(0),r=a.n(i),c=a(10),l=a(175),o=a(176),s=a(389),u=a(102),m=a(285),d=a.n(m),h=Object(u.a)((function(e){var t;return{root:(t={zIndex:1e3,position:"fixed"},Object(n.a)(t,e.breakpoints.down("sm"),{right:e.spacing(2),bottom:e.spacing(8)}),Object(n.a)(t,e.breakpoints.up("md"),{right:e.spacing(5),bottom:e.spacing(5)}),t)}}));t.a=function(e){var t=e.hideOnScroll,a=void 0!==t&&t,n=h(),i=Object(c.f)(),u=Object(l.a)();return r.a.createElement(o.a,{appear:!1,direction:"up",in:!a||!u},r.a.createElement(s.a,{onClick:function(){i.push("/new")},className:n.root,color:"secondary"},r.a.createElement(d.a,null)))}},256:function(e,t,a){"use strict";var n=a(0),i=a.n(n),r=a(290),c=a(291),l=a(282),o=a(102),s=a(284),u=a(364),m=a(71),d=a(283),h=a.n(d),v=Object(o.a)({root:{position:"absolute",color:"white",top:"86%",fontSize:20,textShadow:"0 0 3px black",display:"flex",alignItems:"center"},left:{left:30},right:{right:30}}),g=function(e){var t=e.value,a=e.which,n=e.like,r=v();return i.a.createElement("div",{className:"".concat(r.root," ").concat(r[a])},n&&i.a.createElement(h.a,null),"".concat(t,"%"))},p=a(69),f=a(223),b=Object(o.a)({root:{position:"absolute",width:"100%",height:"100%"},image:{objectFit:"cover",pointerEvents:"none",width:"100%",height:"100%"}}),E=function(e){var t=e.src,a=e.alt,n=b();return i.a.createElement("picture",{className:n.root},i.a.createElement(f.a,{src:t,alt:a,className:n.image}))},w=a(31),y=a(32),k={month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},O=Object(o.a)((function(e){return{media:{display:"flex",height:e.spacing(50)},rateLine:{position:"relative",width:"100%",height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},highlight:{backgroundColor:"".concat(e.palette.primary.main," !important")},fillRateLine:{height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"}}})),j=i.a.memo((function(e){var t,a,n=e.poll,r=e.setPoll,c=O(),o=n.author,d=n.contents,h=d.left,v=d.right,f=n.vote,b=Object(m.b)().enqueueSnackbar,j=Object(y.b)().isAuthenticated,N=new Date(n.createdAt).toLocaleString("default",k),x=function(e){if(j)if(f)b("You have already voted in this poll",{variant:"error"});else{var t={which:e,pollId:n._id},a=Object(l.a)({},n);a.contents[e].votes+=1,a.vote=Object(l.a)({_id:"",authorId:"",createdAt:new Date},t),r(a),Object(w.c)("votes/",t)}else b("Unauthorized users can not vote in polls",{variant:"error"})};h.votes||v.votes?a=100-(t=Math.round(h.votes/(h.votes+v.votes)*100)):(t=0,a=0);var C=h.votes>=v.votes?"left":"right";return i.a.createElement(s.a,null,i.a.createElement(p.a,{user:o,info:N}),i.a.createElement("div",{className:c.media},i.a.createElement(u.a,{onDoubleClick:function(){return x("left")},className:c.media},i.a.createElement(E,{src:h.url}),i.a.createElement(g,{value:t,which:"left",like:"left"===(null===f||void 0===f?void 0:f.which)})),i.a.createElement(u.a,{onDoubleClick:function(){return x("right")},className:c.media},i.a.createElement(E,{src:v.url}),i.a.createElement(g,{value:a,which:"right",like:"right"===(null===f||void 0===f?void 0:f.which)}))),i.a.createElement("div",{className:"".concat(c.rateLine," ").concat("right"===C?c.highlight:"")},i.a.createElement("div",{className:"".concat(c.fillRateLine," ").concat("left"===C?c.highlight:""),style:{width:"".concat(t,"%")}})))})),N=i.a.memo((function(e){var t=e.polls,a=e.mutate,r=e.index,l=e.style,o=e._key,s=t[r],u=Object(n.useCallback)((function(e){var n=Object(c.a)(t);n[r]=e,a([],!1),a(n,!1)}),[a,r,t]);return i.a.createElement("div",{key:o,style:l},i.a.createElement(j,{poll:s,setPoll:u}))}),(function(e,t){return e._key===t._key&&(e.index===t.index&&e.polls===t.polls)}));t.a=function(e){var t=e.polls,a=e.mutate,c=Object(n.useCallback)((function(e){var n=e.index,r=e.style,c=e.key;return i.a.createElement(N,{polls:t,mutate:a,index:n,style:r,key:c,_key:c})}),[t,a]);return i.a.createElement(r.c,null,(function(e){var a=e.height,n=e.isScrolling,l=e.registerChild,o=e.onChildScroll,s=e.scrollTop;return i.a.createElement(r.a,{disableHeight:!0},(function(e){var u=e.width;return i.a.createElement("div",{ref:l},i.a.createElement(r.b,{autoHeight:!0,height:a,isScrolling:n,onScroll:o,rowCount:t.length,rowHeight:550,rowRenderer:c,scrollTop:s,width:u,containerStyle:{pointerEvents:"auto"},overscanRowCount:2}))}))}))}},257:function(e,t,a){"use strict";var n=a(19),i=a(0),r=a.n(i),c=a(386),l=a(235),o=a.n(l),s=a(295),u=a(296),m=a(297),d=a(298),h=a(400),v=a(299),g=function(e){var t=e.setIsOpen,a=e.isOpen,l=e.callback,o=Object(i.useState)(""),g=Object(n.a)(o,2),p=g[0],f=g[1],b=function(){t(!1)};return r.a.createElement("div",null,r.a.createElement(s.a,{open:a,onClose:b},r.a.createElement(u.a,null,"Upload via link"),r.a.createElement(m.a,null,r.a.createElement(d.a,null,"Provide a valid URL to your image:"),r.a.createElement(h.a,{autoFocus:!0,margin:"dense",id:"name",label:"Image URL",type:"text",fullWidth:!0,autoComplete:"off",onChange:function(e){f(e.target.value)}})),r.a.createElement(v.a,null,r.a.createElement(c.a,{onClick:b,color:"primary"},"Cancel"),r.a.createElement(c.a,{onClick:function(){var e=p;if(p.startsWith("https://www.instagram.com/")){var t=p.match("/p/(.*)/"),a=t&&t[1];e="https://www.instagram.com/p/".concat(a,"/media/?size=l")}else if(p.startsWith("https://drive.google.com/")){var n=p.match("/d/(.*)/"),i=n&&n[1];e="https://drive.google.com/uc?export=view&id=".concat(i)}l(e||""),b()},color:"primary",disabled:!p.length},"Submit"))))};t.a=function(e){var t=e.callback,a=e.children,l=Object(i.useState)(!1),s=Object(n.a)(l,2),u=s[0],m=s[1],d=function(){m(!0)},h=r.a.createElement(c.a,{onClick:d,variant:"outlined",color:"primary",startIcon:r.a.createElement(o.a,null)},"Attach a link"),v=a&&r.a.Children.toArray(a)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,{callback:t,isOpen:u,setIsOpen:m}),r.a.isValidElement(v)?r.a.cloneElement(v,{onClick:d}):h)}},403:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(10),c=a(365),l=a(388),o=a(55),s=a(102),u=a(300),m=a.n(u),d=a(90),h=a.n(d),v=a(387),g=Object(s.a)({root:{position:"relative"},menuButton:{width:200,height:50,textAlign:"center"},menuNumber:{fontWeight:800,color:"black"},menuText:{color:"darkgray"}}),p=function(e){var t=e.text,a=e.value,n=g();return i.a.createElement("div",{className:n.menuButton},i.a.createElement("div",{className:n.menuNumber},a),i.a.createElement("div",{className:n.menuText},t))},f=a(257),b=a(34),E=a(31),w=a(32),y=Object(s.a)((function(e){return{root:{position:"relative",marginBottom:e.spacing(4)},avatar:{width:150,height:150,margin:"0 auto"},name:{margin:e.spacing(1,0),display:"flex",alignItems:"center",justifyContent:"center"},verified:{marginLeft:e.spacing(.5),width:e.spacing(3),height:e.spacing(3)},profileMenu:{display:"flex",width:"100%",height:50,marginTop:e.spacing(6),borderBottom:"1px solid lightgray"},menuButton:{width:200,height:50,textAlign:"center"},badge:{width:e.spacing(5),height:e.spacing(5),borderRadius:"50%",cursor:"pointer",background:"#d3d3d3",display:"flex",alignItems:"center","& svg":{margin:"0 auto"}},avatarContainer:{position:"relative",textAlign:"center"},menuNumber:{fontWeight:800,color:"black"},menuText:{color:"darkgray"},skeleton:{margin:"10px auto",borderRadius:2}}})),k=function(e){var t=e.savedPolls,a=e.totalVotes,n=e.setUserInfo,r=e.userInfo,c=y(),s=Object(w.b)().user,u=new Date((null===r||void 0===r?void 0:r.createdAt)||"").toLocaleDateString();return i.a.createElement("div",{className:c.root},r?(null===r||void 0===r?void 0:r._id)===(null===s||void 0===s?void 0:s._id)?i.a.createElement(f.a,{callback:function(e){var t=null===s||void 0===s?void 0:s._id;Object(E.b)("/users/".concat(t),{avatarUrl:e}).then((function(e){n(e.data)}))}},i.a.createElement("div",{className:c.avatarContainer},i.a.createElement(l.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:i.a.createElement("div",{className:c.badge},i.a.createElement(m.a,null))},i.a.createElement(b.a,{className:c.avatar,user:r})))):i.a.createElement(b.a,{className:c.avatar,user:r}):i.a.createElement(v.a,{animation:"wave",variant:"circle",width:150,height:150,className:c.avatar}),r?i.a.createElement(o.a,{variant:"h5",className:c.name},null===r||void 0===r?void 0:r.username,(null===r||void 0===r?void 0:r.verified)&&i.a.createElement(h.a,{className:c.verified,color:"primary"})):i.a.createElement(v.a,{animation:"wave",variant:"rect",width:100,height:20,className:c.skeleton}),i.a.createElement("div",{className:c.profileMenu},r?i.a.createElement(i.a.Fragment,null,i.a.createElement(p,{text:"Polls",value:t}),i.a.createElement(p,{text:"Since",value:u}),i.a.createElement(p,{text:"Total votes",value:a})):i.a.createElement(i.a.Fragment,null,i.a.createElement(v.a,{animation:"wave",variant:"rect",width:170,height:20,className:c.skeleton}),i.a.createElement(v.a,{animation:"wave",variant:"rect",width:170,height:20,className:c.skeleton}),i.a.createElement(v.a,{animation:"wave",variant:"rect",width:170,height:20,className:c.skeleton}))))},O=a(256),j=a(76),N=a(255),x=a(224),C=a(68);t.default=function(){var e=Object(r.f)(),t=Object(r.g)().username,a=Object(w.b)().user,l=Object(C.d)(t),o=l.data,s=l.mutate,u=Object(C.c)(t),m=u.data,d=u.mutate,h=u.isValidating;Object(n.useEffect)((function(){t||(a?e.push("/profile/".concat(a.username)):e.push("/login"))}),[t,e,a]);var v=Object(n.useMemo)((function(){return(null===a||void 0===a?void 0:a.username)===t}),[a,t]),g=Object(n.useMemo)((function(){return v?"Create a poll and it will show up here.":"This user has not uploaded anything yet."}),[v]),p=Object(n.useMemo)((function(){return(null===m||void 0===m?void 0:m.reduce((function(e,t){var a=t.contents,n=a.left,i=a.right;return e+n.votes+i.votes}),0))||0}),[m]);return i.a.createElement(c.a,{maxWidth:"sm",disableGutters:!0},i.a.createElement(k,{userInfo:o,setUserInfo:s,savedPolls:(null===m||void 0===m?void 0:m.length)||0,totalVotes:p}),m?m.length?i.a.createElement(O.a,{polls:m,mutate:d}):i.a.createElement(x.a,{message:g}):h&&i.a.createElement(j.a,null),v&&i.a.createElement(N.a,null))}}}]);
//# sourceMappingURL=7.aa13ef0a.chunk.js.map
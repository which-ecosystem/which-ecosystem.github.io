(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[10],{252:function(e,t,a){"use strict";var n=a(19),c=a(0),r=a.n(c),l=a(382),i=a(230),o=a.n(i),u=a(289),s=a(290),m=a(291),f=a(292),d=a(392),p=a(293),b=function(e){var t=e.setIsOpen,a=e.isOpen,i=e.callback,o=Object(c.useState)(""),b=Object(n.a)(o,2),h=b[0],v=b[1],E=function(){t(!1)};return r.a.createElement("div",null,r.a.createElement(u.a,{open:a,onClose:E},r.a.createElement(s.a,null,"Upload via link"),r.a.createElement(m.a,null,r.a.createElement(f.a,null,"Provide a valid URL to your image:"),r.a.createElement(d.a,{autoFocus:!0,margin:"dense",id:"name",label:"Image URL",type:"text",fullWidth:!0,autoComplete:"off",onChange:function(e){v(e.target.value)}})),r.a.createElement(p.a,null,r.a.createElement(l.a,{onClick:E,color:"primary"},"Cancel"),r.a.createElement(l.a,{onClick:function(){var e=h;if(h.startsWith("https://www.instagram.com/")){var t=h.match("/p/(.*)/"),a=t&&t[1];e="https://www.instagram.com/p/".concat(a,"/media/?size=l")}else if(h.startsWith("https://drive.google.com/")){var n=h.match("/d/(.*)/"),c=n&&n[1];e="https://drive.google.com/uc?export=view&id=".concat(c)}i(e||""),E()},color:"primary",disabled:!h.length},"Submit"))))};t.a=function(e){var t=e.callback,a=e.children,i=Object(c.useState)(!1),u=Object(n.a)(i,2),s=u[0],m=u[1],f=function(){m(!0)},d=r.a.createElement(l.a,{onClick:f,variant:"outlined",color:"primary",startIcon:r.a.createElement(o.a,null)},"Attach a link"),p=a&&r.a.Children.toArray(a)[0];return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{callback:t,isOpen:s,setIsOpen:m}),r.a.isValidElement(p)?r.a.cloneElement(p,{onClick:f}):d)}},396:function(e,t,a){"use strict";a.r(t);var n=a(58),c=a.n(n),r=a(73),l=a(19),i=a(0),o=a.n(i),u=a(10),s=a(103),m=a(360),f=a(278),d=a(175),p=a(382),b=a(72),h=a(80),v=a.n(h),E=a(56),g=a(358),k=a(359),O=a(369),j=a.n(O),y=a(252),C=a(362),w=a(368),x=a.n(w),I=function(e){var t=e.callback,a=e.children,n=Object(C.useFilePicker)(),c=n.files,r=n.onClick,l=n.HiddenFileInput;Object(i.useEffect)((function(){if(null===c||void 0===c?void 0:c.length){var e=c[0];C.utils.loadFile(e).then((function(a){return t(a,e)}))}}),[c,t]);var u=a&&o.a.Children.toArray(a)[0],s=o.a.createElement(p.a,{onClick:r,variant:"contained",color:"primary",size:"large",startIcon:o.a.createElement(x.a,null)},"Upload");return o.a.createElement(o.a.Fragment,null,o.a.createElement(l,{accept:".jpg, .jpeg, .png, .gif",multiple:!1}),o.a.isValidElement(u)?o.a.cloneElement(u,{onClick:r}):s)},S=Object(s.a)({root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"50%"},clearIcon:{opacity:".5",fontSize:50},media:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}),F=function(e){var t=e.callback,a=S(),n=Object(i.useState)(),c=Object(l.a)(n,2),r=c[0],u=c[1],s=function(e,a){u(e),t(a||e)},m=o.a.createElement("div",{className:a.root},o.a.createElement(I,{callback:s}),o.a.createElement(E.a,{variant:"h6"}," or "),o.a.createElement(y.a,{callback:s})),f=o.a.createElement(g.a,{onClick:function(){u(void 0),t(void 0)},className:a.root},o.a.createElement(k.a,{image:r,className:a.media},o.a.createElement(j.a,{className:a.clearIcon})));return r?f:m},N=a(70),W=a(31),U=a(32),z=a(69),A=Object(s.a)((function(e){return{root:{marginBottom:e.spacing(4)},images:{height:e.spacing(50),display:"flex"}}}));t.default=function(){var e=A(),t=Object(u.f)(),a=Object(i.useState)(),n=Object(l.a)(a,2),s=n[0],h=n[1],E=Object(i.useState)(),g=Object(l.a)(E,2),k=g[0],O=g[1],j=Object(b.b)().enqueueSnackbar,y=Object(U.b)().user,C=Object(z.a)().mutate,w=s&&k,x=function(e){var t={"Content-Type":"image/png"};return Object(W.a)("/files").then((function(e){return e.data})).then((function(a){return v.a.put(a,e,{headers:t})})).then((function(e){var t=e.config.url;return(null===t||void 0===t?void 0:t.slice(0,null===t||void 0===t?void 0:t.indexOf("?")))||""}))},I=function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof File)){e.next=2;break}return e.abrupt("return",x(t));case 2:return e.abrupt("return",t||"");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(r.a)(c.a.mark((function e(){var a,n,r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=10;break}return e.next=3,Promise.all([I(s),I(k)]);case 3:a=e.sent,n=Object(l.a)(a,2),r=n[0],i=n[1],o={left:{url:r},right:{url:i}},Object(W.c)("/polls/",{contents:o}).then((function(){C(),j("Your poll has been successfully created!",{variant:"success"})})),t.push("/feed");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(m.a,{maxWidth:"sm",disableGutters:!0},o.a.createElement(f.a,{className:e.root},y&&o.a.createElement(N.a,{user:y,info:""}),o.a.createElement(d.a,null),o.a.createElement("div",{className:e.images},o.a.createElement(F,{callback:h}),o.a.createElement(F,{callback:O})),o.a.createElement(p.a,{color:"primary",disabled:!w,variant:"contained",onClick:S,fullWidth:!0},"Submit")))}}}]);
//# sourceMappingURL=10.7c1ccaf6.chunk.js.map
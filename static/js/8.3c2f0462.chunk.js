(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[8],{314:function(e,t,a){"use strict";var n=a(37),r=a(0),o=a.n(r),i=a(12),c=a(33),l=a(223),u=a(182),s=a(454),h=a(57),d=a(356),m=a.n(d),p=Object(h.a)((function(e){var t;return{root:(t={zIndex:1e3,position:"fixed"},Object(n.a)(t,e.breakpoints.down("sm"),{right:e.spacing(2),bottom:e.spacing(8)}),Object(n.a)(t,e.breakpoints.up("md"),{right:e.spacing(5),bottom:e.spacing(5)}),t)}}));t.a=function(e){var t=e.hideOnScroll,a=void 0!==t&&t,n=p(),r=Object(i.g)(),h=Object(l.a)();return o.a.createElement(u.a,{appear:!1,direction:"up",in:!a||!h},o.a.createElement(c.b,{to:{pathname:"/new",state:{background:r}}},o.a.createElement(s.a,{className:n.root,color:"secondary"},o.a.createElement(m.a,null))))}},330:function(e,t,a){"use strict";var n=a(27),r=a.n(n),o=a(36),i=a(7),c=a(0),l=a.n(c),u=a(292),s=a(95),h=a.n(s),d=a(368),m=a(57),p=a(354),f=a(241),g=a(32),v=a(237),b=a(66),w=a(355),E=a.n(w),O=Object(m.a)({root:{position:"absolute",color:"white",top:"86%",fontSize:20,textShadow:"0 0 3px black",display:"flex",alignItems:"center"},left:{left:30},right:{right:30}}),j=function(e){var t=e.value,a=e.which,n=e.like,r=O();return l.a.createElement("div",{className:"".concat(r.root," ").concat(r[a])},n&&l.a.createElement(E.a,null),"".concat(t,"%"))},k=a(64),y=[{name:"minute",ratio:60},{name:"hour",ratio:60},{name:"day",ratio:24},{name:"week",ratio:7},{name:"month",ratio:4},{name:"year",ratio:12}],C=function(e){var t=((new Date).valueOf()-e.valueOf())/1e3;return t<60?"just now":function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=y[a],r=y[a+1],o=t/n.ratio;if(o<.85*r.ratio){var i=Math.round(o),c=i>1,l=c?i:"a",u=c?"s":"";return"".concat(l," ").concat(n.name).concat(u," ago")}return"year"===n.name?"A year ago":e(o,a+1)}(t)},x=Object(m.a)({root:{display:"block",cursor:"pointer"}}),S={month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},N=function(e){var t=e.value,a=Object(c.useState)(!0),n=Object(i.a)(a,2),r=n[0],o=n[1],u=x(),s=Object(c.useCallback)((function(){return o((function(e){return!e}))}),[o]),h=Object(c.useMemo)((function(){return new Date(t)}),[t]),d=Object(c.useMemo)((function(){return h.toLocaleString("default",S)}),[h]),m=Object(c.useMemo)((function(){return C(h)}),[h]);return l.a.createElement("div",{role:"presentation",className:u.root,onClick:s},r?m:d)},R=a(98),M=a(26),D=a(34),_=Object(m.a)((function(e){return{media:{display:"flex",height:e.spacing(50)},rateLine:{position:"relative",width:"100%",height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},highlight:{backgroundColor:"".concat(e.palette.primary.main," !important")},fillRateLine:{height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},description:{fontSize:14,padding:e.spacing(0,2,1.25),wordWrap:"break-word",whiteSpace:"pre-wrap"}}})),A=l.a.memo((function(e){var t,a,n=e.poll,r=e.setPoll,o=_(),i=n.author,c=n.contents,u=c.left,s=c.right,h=n.vote,d=Object(b.b)().enqueueSnackbar,m=Object(D.b)().isAuthenticated,w=function(e){return function(){if(m)if(h)d("You have already voted in this poll",{variant:"error"});else{var t={which:e,pollId:n._id},a=Object(p.a)({},n);a.contents[e].votes+=1,a.vote=Object(p.a)({_id:"",authorId:"",createdAt:new Date},t),r(a),Object(M.c)("votes/",t)}else d("Unauthorized users can not vote in polls",{variant:"error"})}};u.votes||s.votes?a=100-(t=Math.round(u.votes/(u.votes+s.votes)*100)):(t=0,a=0);var E=u.votes>=s.votes?"left":"right";return l.a.createElement(f.a,{elevation:3},l.a.createElement(k.a,{user:i,info:l.a.createElement(N,{value:n.createdAt})}),n.description&&l.a.createElement(g.a,{className:o.description},n.description),l.a.createElement("div",{className:o.media},l.a.createElement(v.a,{onDoubleClick:w("left"),className:o.media},l.a.createElement(R.a,{src:u.url}),l.a.createElement(j,{value:t,which:"left",like:"left"===(null===h||void 0===h?void 0:h.which)})),l.a.createElement(v.a,{onDoubleClick:w("right"),className:o.media},l.a.createElement(R.a,{src:s.url}),l.a.createElement(j,{value:a,which:"right",like:"right"===(null===h||void 0===h?void 0:h.which)}))),l.a.createElement("div",{className:"".concat(o.rateLine," ").concat("right"===E?o.highlight:"")},l.a.createElement("div",{className:"".concat(o.fillRateLine," ").concat("left"===E?o.highlight:""),style:{width:"".concat(t,"%")}})))})),I=Object(m.a)((function(e){return{root:{paddingBottom:e.spacing(8)}}})),L=l.a.memo((function(e){var t=e.polls,a=e.mutate,n=e.index,r=e.style,o=e.cache,i=e.parent,s=e._key,h=I(),m=t[n],p=Object(c.useCallback)((function(e){var r=Object(d.a)(t);r[n]=e,a([],!1),a(r,!1)}),[a,n,t]);return l.a.createElement(u.b,{cache:o,columnIndex:0,rowIndex:n,parent:i},l.a.createElement("div",{key:"".concat(s,"-").concat(m._id),className:h.root,style:r},l.a.createElement(A,{poll:m,setPoll:p})))}),(function(e,t){return e._key===t._key&&(e.index===t.index&&(e.polls===t.polls&&e.style.height===t.style.height))})),z=new u.c({fixedWidth:!0});t.a=function(e){var t=e.polls,a=e.mutate,n=Object(c.useState)(10),s=Object(i.a)(n,2),d=s[0],m=s[1];Object(c.useEffect)((function(){z.clearAll()}),[t]);var p=Object(c.useCallback)((function(e){var n=e.index,r=e.style,o=e.key,i=e.parent;return l.a.createElement(L,{polls:t,mutate:a,index:n,style:r,cache:z,parent:i,key:o,_key:o})}),[t,a]),f=Object(c.useCallback)(Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m((function(e){return e+10}));case 1:case"end":return e.stop()}}),e)}))),[]),g=Object(c.useCallback)((function(e){return e.index<d-1||d===t.length}),[d,t]),v=Object(c.useMemo)((function(){return h.a.min([d,t.length])||t.length}),[d,t.length]);return l.a.createElement(u.f,null,(function(e){var t=e.height,a=e.isScrolling,n=e.registerChild,r=e.onChildScroll,o=e.scrollTop;return l.a.createElement(u.a,{disableHeight:!0},(function(e){var i=e.width;return l.a.createElement("div",{ref:n},l.a.createElement(u.d,{isRowLoaded:g,loadMoreRows:f,rowCount:v,threshold:1},(function(e){var n=e.onRowsRendered,c=e.registerChild;return l.a.createElement(u.e,{autoHeight:!0,height:t,isScrolling:a,onScroll:r,rowCount:v,rowHeight:z.rowHeight,rowRenderer:p,scrollTop:o,width:i,containerStyle:{pointerEvents:"auto"},overscanRowCount:2,onRowsRendered:n,ref:c,deferredMeasurementCache:z})})))}))}))}},455:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(240),i=a(330),c=a(314),l=a(69),u=a(65),s=a(34),h=a(59);t.default=function(){var e=Object(h.a)(),t=e.data,a=e.isValidating,n=e.mutate,d=Object(s.b)().isAuthenticated;return r.a.createElement(o.a,{maxWidth:"sm",disableGutters:!0},d&&r.a.createElement(c.a,{hideOnScroll:!0}),t?t.length?r.a.createElement(i.a,{polls:t,mutate:n}):r.a.createElement(u.a,null):a&&r.a.createElement(l.a,null))}}}]);
//# sourceMappingURL=8.3c2f0462.chunk.js.map
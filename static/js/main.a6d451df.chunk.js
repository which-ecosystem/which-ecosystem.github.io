(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[2],{106:function(e,t,a){e.exports=a(136)},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c),i=a(100),l=a(182),u=a(183),s=a(27),m=a(63),f=a.n(m),p=(a(111),a(6)),d=a(173),b=a(174),h=a(53),E=a(175),g=a(176),O=a(177),j=a(178),v=a(179),w=a(101),k=a(29),y=a(42),x=a(165),N=a(166),C=a(167),S=a(168),I=Object(w.a)({root:{display:"flex",justifyContent:"space-between"}}),z=r.a.memo((function(e){var t=I(),a=Object(x.a)(),n=e.menu,c=e.search,o=e.logo;return r.a.createElement(N.a,{appear:!1,direction:"down",in:!a},r.a.createElement(C.a,{position:"fixed"},r.a.createElement(S.a,{className:t.root},n,o,c)))})),P=Object(w.a)({root:{top:"auto",bottom:0},toolbar:{display:"flex",justifyContent:"space-around"}}),A=r.a.memo((function(e){var t=P(),a=e.profile,n=e.feed,c=e.notifications;return r.a.createElement(C.a,{position:"fixed",className:t.root},r.a.createElement(S.a,{className:t.toolbar},c,n,a))})),T=a(16),R=a(98),L=a.n(R),U=a(169),q=a(137),B=a(170),F=a(171),J=a(172),M=a(184),W=a(26),Y=a(68),$=Object(w.a)((function(e){return{root:{position:"relative",background:"rgba(255, 255, 255, 0.5)",borderRadius:"2px",padding:e.spacing(.5),display:"flex",alignItems:"center"},results:{position:"absolute",width:"100%",top:e.spacing(5)},listItem:{padding:0}}})),D=r.a.memo((function(){var e=Object(n.useState)([]),t=Object(T.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(T.a)(o,2),l=i[0],u=i[1],s=Object(n.useState)(l),m=Object(T.a)(s,2),f=m[0],d=m[1],b=Object(p.f)(),h=$();Object(n.useEffect)((function(){var e=setTimeout((function(){return d(l)}),300);return function(){return clearTimeout(e)}}),[l]),Object(n.useEffect)((function(){f?Object(W.a)("/users?username[$regex]=".concat(f,"&$limit=").concat(7)).then((function(e){return c(e.data)})).catch((function(){return c([])})):c([])}),[f]);var E=function(){d(""),u("")},g=function(e){return function(){var t=a[e].username;b.push("/profile/".concat(t)),E()}},O=r.a.createElement(U.a,{onClickAway:E},r.a.createElement(q.a,{className:h.results},r.a.createElement(B.a,null,a.map((function(e,t){return r.a.createElement("div",{key:e._id},r.a.createElement(F.a,{button:!0,onClick:g(t),className:h.listItem},r.a.createElement(Y.a,{user:e})),t<a.length-1&&r.a.createElement(J.a,null))})))));return r.a.createElement("div",{className:h.root},r.a.createElement(L.a,null),r.a.createElement(M.a,{placeholder:"Search...",value:l,onChange:function(e){u(e.target.value.trim())}}),a.length>0&&O)})),_=Object(w.a)({root:{width:"60%",margin:"auto",display:"flex",justifyContent:"space-around"},group:{display:"flex"}}),G=r.a.memo((function(e){var t=_(),a=e.logo,n=e.feed,c=e.notifications,o=e.profile;return r.a.createElement(C.a,{position:"fixed"},r.a.createElement(S.a,{className:t.root},a,r.a.createElement(D,null),r.a.createElement("div",{className:t.group},n,c,o)))})),H=a(48),K=Object(w.a)((function(e){return{logo:{fontWeight:"bold",cursor:"pointer",color:"white"},avatar:{width:e.spacing(3),height:e.spacing(3)}}})),Q=r.a.memo((function(){var e=K(),t=Object(y.b)().user,a=Object(k.a)(),n=Object(p.f)(),c=Object(d.a)(a.breakpoints.down("sm")),o=r.a.createElement(b.a,{onClick:function(){n.push("/feed")}},r.a.createElement(E.a,null)),i=r.a.createElement(b.a,{onClick:function(){n.push("/notifications")}},r.a.createElement(g.a,null)),l=r.a.createElement(b.a,null,r.a.createElement(O.a,null)),u=r.a.createElement(b.a,null,r.a.createElement(j.a,null)),s=r.a.createElement(h.a,{variant:"h5",className:e.logo,onClick:function(){n.push("/")}},"Which"),m=r.a.createElement(b.a,{onClick:function(){t?n.push("/profile/".concat(t.username)):n.push("/login")}},t?r.a.createElement(H.a,{className:e.avatar,user:t}):r.a.createElement(v.a,{className:e.avatar}));return c?r.a.createElement(r.a.Fragment,null,r.a.createElement(z,{logo:s,menu:l,search:u}),r.a.createElement(A,{feed:o,profile:m,notifications:i})):r.a.createElement(G,{logo:s,profile:m,notifications:i,feed:o})})),V=a(99),X=a.n(V),Z=Object(w.a)((function(e){return{root:{position:"fixed",bottom:e.spacing(10),left:e.spacing(10),zIndex:1e3,cursor:"pointer",opacity:.4,"&:hover":{opacity:1},background:e.palette.primary.main,borderRadius:"50%"},icon:{fontSize:80,color:"white"}}})),ee=r.a.memo((function(){var e=Object(n.useState)(!1),t=Object(T.a)(e,2),a=t[0],c=t[1],o=Object(k.a)(),i=Z(),l=Object(d.a)(o.breakpoints.down("sm"));return window.addEventListener("scroll",(function(){!a&&window.pageYOffset>400?c(!0):a&&window.pageYOffset<=400&&c(!1)})),r.a.createElement("div",{className:i.root},a&&!l&&r.a.createElement(X.a,{className:i.icon,color:"primary",onClick:function(){window.scrollTo({top:0})}}))})),te=a(38),ae=a(69),ne=a(91),re=r.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(6),a.e(9)]).then(a.bind(null,388))})),ce=r.a.lazy((function(){return Promise.all([a.e(1),a.e(5),a.e(8)]).then(a.bind(null,390))})),oe=r.a.lazy((function(){return Promise.all([a.e(0),a.e(11)]).then(a.bind(null,389))})),ie=r.a.lazy((function(){return Promise.all([a.e(0),a.e(13)]).then(a.bind(null,381))})),le=r.a.lazy((function(){return Promise.all([a.e(0),a.e(7),a.e(10)]).then(a.bind(null,391))})),ue=r.a.lazy((function(){return a.e(12).then(a.bind(null,385))})),se=Object(w.a)((function(e){var t;return{root:(t={},Object(te.a)(t,e.breakpoints.down("sm"),{margin:e.spacing(15,0,12,0)}),Object(te.a)(t,e.breakpoints.up("md"),{margin:e.spacing(15,5,8,5)}),t)}})),me=function(){var e=se(),t=Object(k.a)(),a=Object(d.a)(t.breakpoints.down("sm"));return r.a.createElement(ae.a,{maxSnack:a?1:3,anchorOrigin:{vertical:a?"top":"bottom",horizontal:"right"}},r.a.createElement("div",{className:e.root},r.a.createElement(n.Suspense,{fallback:r.a.createElement(ne.a,null)},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/",component:le}),r.a.createElement(p.a,{exact:!0,path:"/login",component:oe}),r.a.createElement(p.a,{exact:!0,path:"/registration",component:ie}),r.a.createElement(p.a,{exact:!0,path:"/feed",component:ce}),r.a.createElement(p.a,{exact:!0,path:"/notifications",component:ue}),r.a.createElement(p.a,{path:"/profile/:username",component:re})))))},fe=Object(i.a)({palette:{primary:{main:f.a[700],light:f.a[100]}}}),pe=function(){return r.a.createElement(s.a,null,r.a.createElement(y.a,null,r.a.createElement(l.a,{theme:fe},r.a.createElement(u.a,null),r.a.createElement(Q,null),r.a.createElement(me,null),r.a.createElement(ee,null))))};o.a.render(r.a.createElement(pe,null),document.getElementById("root"))},26:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return s}));var n=a(77),r=a.n(n),c=a(92),o=a.n(c),i=r.a.create({baseURL:"https://which-api.herokuapp.com"});i.interceptors.request.use((function(e){var t=localStorage.getItem("token");return o.a.set(e,"headers.Authorization",t)})),i.interceptors.response.use((function(e){return e}),(function(e){return"Request failed with status code 401"===e.message&&localStorage.getItem("token")&&(localStorage.removeItem("remember"),window.location.reload()),Promise.reject(e)}));var l=i.get,u=i.post,s=(i.put,i.patch)},42:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return d}));var n=a(16),r=a(55),c=a.n(r),o=a(71),i=a(0),l=a.n(i),u=a(26),s=a(70),m=function(e){var t=Object(i.useState)((function(){return localStorage.getItem(e)||null})),a=Object(n.a)(t,2),r=a[0],c=a[1];return[r,Object(i.useCallback)((function(t){t?localStorage.setItem(e,t):localStorage.removeItem(e),c(t)}),[e])]},f=Object(i.createContext)({user:void 0,login:function(){var e=Object(o.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),logout:function(){},isAuthenticated:!1}),p=function(e){var t=e.children,a=function(){var e=m("remember"),t=Object(n.a)(e,2),a=t[0],r=t[1],c=m("username"),o=Object(n.a)(c,2),l=o[0],f=o[1],p=m("token"),d=Object(n.a)(p,2),b=d[0],h=d[1],E=Object(s.d)(l).data,g=Object(i.useMemo)((function(){return Boolean(l)}),[l]),O=Object(i.useCallback)((function(){h(null),f(null)}),[h,f]);Object(i.useEffect)((function(){a||O()}),[a,O]);return{user:E,login:function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return Object(u.c)("/authentication",{strategy:"local",username:e,password:t}).then((function(t){return h(t.data.accessToken),f(e),r(a?"true":null),!0})).catch((function(){return!1}))},logout:O,token:b,isAuthenticated:g}}(),r=f.Provider;return l.a.createElement(r,{value:a},t)},d=function(){return Object(i.useContext)(f)}},48:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(6),o=a(142),i=a(97),l=a.n(i);t.a=function(e){var t=e.user,a=e.className,n=Object(c.f)(),i=t.username,u=t.avatarUrl,s=function(){n.push("/profile/".concat(i))};return u?r.a.createElement(o.a,{src:u,alt:i[0].toUpperCase(),onClick:s,className:a,style:{cursor:"pointer"}}):r.a.createElement(l.a,{className:a,onClick:s})}},68:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(101),o=a(88),i=a.n(o),l=a(139),u=a(48),s=Object(c.a)((function(e){return{root:{display:"flex",alignItems:"center"},verified:{marginLeft:e.spacing(.5),width:e.spacing(2),height:e.spacing(2)}}}));t.a=function(e){var t=e.user,a=e.info,n=s(),c=t.username,o=t.verified,m=r.a.createElement(u.a,{user:t}),f=r.a.createElement("div",{className:n.root},c,o&&r.a.createElement(i.a,{color:"primary",className:n.verified}));return r.a.createElement(l.a,{avatar:m,title:f,subheader:a})}},70:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return u})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return m}));var n=a(56),r=a(41),c=a(26),o=function(e){return Object(c.a)(e).then((function(e){return e.data}))},i={initialData:[],revalidateOnMount:!0},l=function(e){return Object(r.a)(e&&"/users?username=".concat(e),(function(e){return Object(c.a)(e).then((function(e){return e.data[0]}))}))},u=function(e){return Object(r.a)(e&&"/profiles/".concat(e),o,i)},s=function(){return Object(r.a)("/feed",o,Object(n.a)(Object(n.a)({},i),{},{revalidateOnFocus:!1}))},m=function(){return Object(r.a)("/feedback",o,i)}},91:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(140),o=a(101),i=Object(o.a)((function(e){return{loader:{width:"100%",textAlign:"center",marginTop:e.spacing(10)}}})),l=r.a.memo((function(){var e=i();return r.a.createElement("div",{className:e.loader},r.a.createElement(c.a,{color:"primary",style:{margin:"0 auto"}}))}));t.a=l}},[[106,3,4]]]);
//# sourceMappingURL=main.a6d451df.chunk.js.map
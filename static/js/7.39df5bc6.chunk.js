(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[7],{209:function(e,t,a){"use strict";var n=a(16),r=a(0),i=a.n(r),o=a(372),l=a(353),c=a(354),s=a(355),m=a(366),u=a(356),d=a(357);t.a=function(e){var t=e.setIsOpen,a=e.isOpen,h=e.callback,g=Object(r.useState)(""),v=Object(n.a)(g,2),f=v[0],p=v[1],b=function(){t(!1)};return i.a.createElement("div",null,i.a.createElement(o.a,{open:a,onClose:b},i.a.createElement(l.a,null,"Upload an Image"),i.a.createElement(c.a,null,i.a.createElement(s.a,null,"Unfortunetly we do not support uploading images yet. Please provide a valid URL to your image:"),i.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"name",label:"Image URL",type:"text",fullWidth:!0,autoComplete:"off",onChange:function(e){p(e.target.value)}})),i.a.createElement(u.a,null,i.a.createElement(d.a,{onClick:b,color:"primary"},"Cancel"),i.a.createElement(d.a,{onClick:function(){var e=f;if(f.startsWith("https://www.instagram.com/")){var t=f.match("/p/(.*)/"),a=t&&t[1];e="https://www.instagram.com/p/".concat(a,"/media/?size=l")}else if(f.startsWith("https://drive.google.com/")){var n=f.match("/d/(.*)/"),r=n&&n[1];e="https://drive.google.com/uc?export=view&id=".concat(r)}h(e||""),b()},color:"primary",disabled:!f.length},"Submit"))))}},230:function(e,t,a){"use strict";var n=a(229),r=a(0),i=a.n(r),o=a(258),l=a(52),c=a(100),s=a(330),m=a(358),u=a(359),d=a(66),h=a(257),g=a.n(h),v=Object(c.a)({root:{position:"absolute",color:"white",top:"86%",fontSize:20,textShadow:"0 0 3px black",display:"flex",alignItems:"center"},left:{left:30},right:{right:30}}),f=function(e){var t=e.value,a=e.which,n=e.like,r=v();return i.a.createElement("div",{className:"".concat(r.root," ").concat(r[a])},n&&i.a.createElement(g.a,null),"".concat(t,"%"))},p=a(64),b=a(24),O=a(41),E={month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},w=Object(c.a)((function(e){return{images:{height:e.spacing(50)},imagesBlock:{display:"flex"},rateLine:{position:"relative",width:"100%",height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},highlight:{backgroundColor:"".concat(e.palette.primary.main," !important")},fillRateLine:{height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"}}})),y=function(e){var t,a,n=e.poll,r=e.setPoll,o=w(),c=n.author,h=n.contents,g=h.left,v=h.right,y=n.vote,j=Object(d.b)().enqueueSnackbar,x=Object(O.b)().isAuthenticated,k=new Date(n.createdAt).toLocaleString("default",E),C=function(e){if(x)if(y)j("You have already voted in this poll",{variant:"error"});else{var t={which:e,pollId:n._id},a=Object(l.a)({},n);a.contents[e].votes+=1,a.vote=Object(l.a)({_id:"",authorId:"",createdAt:new Date},t),r(a),Object(b.c)("votes/",t)}else j("Unauthorized users can not vote in polls",{variant:"error"})};g.votes||v.votes?a=100-(t=Math.round(g.votes/(g.votes+v.votes)*100)):(t=0,a=0);var N=g.votes>=v.votes?"left":"right";return i.a.createElement(s.a,null,i.a.createElement(p.a,{user:c,info:k}),i.a.createElement("div",{className:o.imagesBlock},i.a.createElement(m.a,{onDoubleClick:function(){return C("left")}},i.a.createElement(u.a,{className:o.images,image:g.url}),i.a.createElement(f,{value:t,which:"left",like:"left"===(null===y||void 0===y?void 0:y.which)})),i.a.createElement(m.a,{onDoubleClick:function(){return C("right")}},i.a.createElement(u.a,{className:o.images,image:v.url}),i.a.createElement(f,{value:a,which:"right",like:"right"===(null===y||void 0===y?void 0:y.which)}))),i.a.createElement("div",{className:"".concat(o.rateLine," ").concat("right"===N?o.highlight:"")},i.a.createElement("div",{className:"".concat(o.fillRateLine," ").concat("left"===N?o.highlight:""),style:{width:"".concat(t,"%")}})))};t.a=function(e){var t=e.polls,a=e.mutate,r=function(e){var r=e.index,o=e.style,l=e.key,c=t[r];return i.a.createElement("div",{key:"".concat(l,"-").concat(c._id,"-").concat(t.length),style:o},i.a.createElement(y,{poll:c,setPoll:function(e){var i=Object(n.a)(t);i[r]=e,a([],!1),a(i,!1)}}))};return i.a.createElement(o.c,null,(function(e){var a=e.height,n=e.isScrolling,l=e.registerChild,c=e.onChildScroll,s=e.scrollTop;return i.a.createElement(o.a,{disableHeight:!0},(function(e){var m=e.width;return i.a.createElement("div",{ref:l},i.a.createElement(o.b,{autoHeight:!0,height:a,isScrolling:n,onScroll:c,rowCount:t.length,rowHeight:550,rowRenderer:r,scrollTop:s,width:m,containerStyle:{pointerEvents:"auto"},overscanRowCount:1}))}))}))}},265:function(e,t,a){"use strict";var n=a(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(27)).default)(r.default.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");t.default=i},266:function(e,t,a){"use strict";var n=a(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a(0)),i=(0,n(a(27)).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("circle",{cx:"12",cy:"12",r:"3.2"}),r.default.createElement("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})),"CameraAlt");t.default=i},367:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),o=a(360),l=a(16),c=a(1),s=a(2),m=(a(5),a(3)),u=a(4),d=a(8),h=n.forwardRef((function(e,t){var a=e.anchorOrigin,r=void 0===a?{vertical:"top",horizontal:"right"}:a,i=e.badgeContent,o=e.children,l=e.classes,u=e.className,h=e.color,g=void 0===h?"default":h,v=e.component,f=void 0===v?"span":v,p=e.invisible,b=e.max,O=void 0===b?99:b,E=e.overlap,w=void 0===E?"rectangle":E,y=e.showZero,j=void 0!==y&&y,x=e.variant,k=void 0===x?"standard":x,C=Object(s.a)(e,["anchorOrigin","badgeContent","children","classes","className","color","component","invisible","max","overlap","showZero","variant"]),N=p;null==p&&(0===i&&!j||null==i&&"dot"!==k)&&(N=!0);var R="";return"dot"!==k&&(R=i>O?"".concat(O,"+"):i),n.createElement(f,Object(c.a)({className:Object(m.a)(l.root,u),ref:t},C),o,n.createElement("span",{className:Object(m.a)(l.badge,l["".concat(r.horizontal).concat(Object(d.a)(r.vertical),"}")],l["anchorOrigin".concat(Object(d.a)(r.vertical)).concat(Object(d.a)(r.horizontal)).concat(Object(d.a)(w))],"default"!==g&&l["color".concat(Object(d.a)(g))],N&&l.invisible,"dot"===k&&l.dot)},R))})),g=Object(u.a)((function(e){return{root:{position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0},badge:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.pxToRem(12),minWidth:20,lineHeight:1,padding:"0 6px",height:20,borderRadius:10,zIndex:1,transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.enteringScreen})},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorError:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText},dot:{borderRadius:4,height:8,minWidth:8,padding:0},anchorOriginTopRightRectangle:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightRectangle:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftRectangle:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftRectangle:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},anchorOriginTopRightCircle:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%","&$invisible":{transform:"scale(0) translate(50%, -50%)"}},anchorOriginBottomRightCircle:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%","&$invisible":{transform:"scale(0) translate(50%, 50%)"}},anchorOriginTopLeftCircle:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%","&$invisible":{transform:"scale(0) translate(-50%, -50%)"}},anchorOriginBottomLeftCircle:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%","&$invisible":{transform:"scale(0) translate(-50%, 50%)"}},invisible:{transition:e.transitions.create("transform",{easing:e.transitions.easing.easeInOut,duration:e.transitions.duration.leavingScreen})}}}),{name:"MuiBadge"})(h),v=a(142),f=a(50),p=a(100),b=a(266),O=a.n(b),E=a(84),w=a.n(E),y=a(17),j=n.forwardRef((function(e,t){var a=e.animation,r=void 0===a?"pulse":a,i=e.classes,o=e.className,l=e.component,u=void 0===l?"span":l,d=e.height,h=e.variant,g=void 0===h?"text":h,v=e.width,f=Object(s.a)(e,["animation","classes","className","component","height","variant","width"]),p=Boolean(f.children);return n.createElement(u,Object(c.a)({ref:t,className:Object(m.a)(i.root,i[g],o,p&&[i.withChildren,!v&&i.fitContent,!d&&i.heightAuto],!1!==r&&i[r])},f,{style:Object(c.a)({width:v,height:d},f.style)}))})),x=Object(u.a)((function(e){return{root:{display:"block",backgroundColor:Object(y.c)(e.palette.text.primary,"light"===e.palette.type?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:e.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(e.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}}),{name:"MuiSkeleton"})(j),k=a(169),C=a(334),N=a(12),R=a(166),I=n.forwardRef((function(e,t){var a,r=e.classes,i=e.className,o=e.component,l=void 0===o?"li":o,u=e.disableGutters,d=void 0!==u&&u,h=e.ListItemClasses,g=e.role,v=void 0===g?"menuitem":g,f=e.selected,p=e.tabIndex,b=Object(s.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(a=void 0!==p?p:-1),n.createElement(R.a,Object(c.a)({button:!0,role:v,tabIndex:a,component:l,selected:f,disableGutters:d,classes:Object(c.a)({dense:r.dense},h),className:Object(m.a)(r.root,i,f&&r.selected,!d&&r.gutters),ref:t},b))})),S=Object(u.a)((function(e){return{root:Object(c.a)(Object(c.a)({},e.typography.body1),{},Object(N.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(c.a)(Object(c.a)({},e.typography.body2),{},{minHeight:"auto"})}}),{name:"MuiMenuItem"})(I),z=a(265),L=a.n(z),M=a(41),T=Object(p.a)({moreMenu:{position:"absolute",right:10,zIndex:100}}),B=function(){var e=T(),t=r.a.useState(null),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(M.b)().logout,s=Object(i.f)(),m=Boolean(n);return r.a.createElement("div",{className:e.moreMenu},r.a.createElement("div",null,r.a.createElement(k.a,{"aria-label":"more","aria-controls":"long-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}},r.a.createElement(L.a,null)),r.a.createElement(C.a,{id:"long-menu",anchorEl:n,keepMounted:!0,open:m,onClose:function(){o(null)},PaperProps:{style:{maxHeight:216,width:"20ch"}}},r.a.createElement(S,{onClick:function(){c(),s.push("/login")}},"Log out"))))},W=Object(p.a)({root:{position:"relative"},menuButton:{width:200,height:50,textAlign:"center"},menuNumber:{fontWeight:800,color:"black"},menuText:{color:"darkgray"}}),A=function(e){var t=e.text,a=e.value,n=W();return r.a.createElement("div",{className:n.menuButton},r.a.createElement("div",{className:n.menuNumber},a),r.a.createElement("div",{className:n.menuText},t))},H=a(209),P=a(24),U=Object(p.a)((function(e){return{root:{position:"relative"},avatar:{width:150,height:150,margin:"0 auto"},name:{margin:e.spacing(1,0),display:"flex",alignItems:"center",justifyContent:"center"},verified:{marginLeft:e.spacing(.5),width:e.spacing(3),height:e.spacing(3)},profileMenu:{display:"flex",width:"100%",height:50,margin:"50px 0",borderBottom:"1px solid lightgray"},menuButton:{width:200,height:50,textAlign:"center"},badge:{width:e.spacing(5),height:e.spacing(5),borderRadius:"50%",cursor:"pointer",background:"#d3d3d3",display:"flex",alignItems:"center","& svg":{margin:"0 auto"}},avatarContainer:{position:"relative",textAlign:"center"},menuNumber:{fontWeight:800,color:"black"},menuText:{color:"darkgray"},skeleton:{margin:"10px auto",borderRadius:2}}})),$=function(e){var t=e.savedPolls,a=e.totalVotes,i=e.setUserInfo,o=e.userInfo,c=U(),s=Object(n.useState)(!1),m=Object(l.a)(s,2),u=m[0],d=m[1],h=Object(M.b)().user,p=new Date((null===o||void 0===o?void 0:o.createdAt)||"").toLocaleDateString();return r.a.createElement("div",{className:c.root},o?(null===o||void 0===o?void 0:o._id)===(null===h||void 0===h?void 0:h._id)?r.a.createElement("div",null,r.a.createElement(B,null),r.a.createElement("div",{className:c.avatarContainer},r.a.createElement(g,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:r.a.createElement("div",{className:c.badge},r.a.createElement(O.a,{onClick:function(){d(!u)}}))},r.a.createElement(v.a,{className:c.avatar,src:null===o||void 0===o?void 0:o.avatarUrl}))),r.a.createElement(H.a,{isOpen:u,setIsOpen:d,callback:function(e){var t=null===h||void 0===h?void 0:h._id;Object(P.b)("/users/".concat(t),{avatarUrl:e}).then((function(e){i(e.data)}))}})):r.a.createElement(v.a,{className:c.avatar,src:null===o||void 0===o?void 0:o.avatarUrl}):r.a.createElement(x,{animation:"wave",variant:"circle",width:150,height:150,className:c.avatar}),o?r.a.createElement(f.a,{variant:"h5",className:c.name},null===o||void 0===o?void 0:o.username,(null===o||void 0===o?void 0:o.verified)&&r.a.createElement(w.a,{className:c.verified,color:"primary"})):r.a.createElement(x,{animation:"wave",variant:"rect",width:100,height:20,className:c.skeleton}),r.a.createElement("div",{className:c.profileMenu},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(A,{text:"Polls",value:t}),r.a.createElement(A,{text:"Since",value:p}),r.a.createElement(A,{text:"Total votes",value:a})):r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{animation:"wave",variant:"rect",width:170,height:20,className:c.skeleton}),r.a.createElement(x,{animation:"wave",variant:"rect",width:170,height:20,className:c.skeleton}),r.a.createElement(x,{animation:"wave",variant:"rect",width:170,height:20,className:c.skeleton}))))},_=a(230),D=a(87),F=a(67);t.default=function(){var e=Object(i.f)(),t=Object(i.g)().username,a=Object(M.b)().user,l=Object(F.d)(t),c=l.data,s=l.mutate,m=Object(F.c)(t),u=m.data,d=m.mutate,h=m.isValidating;Object(n.useEffect)((function(){t||(a?e.push("/profile/".concat(a.username)):e.push("/login"))}),[t,e,a]);var g=Object(n.useMemo)((function(){return u.reduce((function(e,t){var a=t.contents,n=a.left,r=a.right;return e+n.votes+r.votes}),0)}),[u]);return r.a.createElement(o.a,{maxWidth:"sm",disableGutters:!0},r.a.createElement($,{userInfo:c,setUserInfo:s,savedPolls:u.length,totalVotes:g}),h&&!u?r.a.createElement(D.a,null):r.a.createElement(_.a,{polls:u,mutate:d}))}}}]);
//# sourceMappingURL=7.39df5bc6.chunk.js.map
(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[13],{396:function(e,t,a){"use strict";a.r(t);var n=a(59),c=a.n(n),r=a(73),i=a(16),l=a(0),s=a.n(l),o=a(104),u=a(354),f=a(276),m=a(176),p=a(287),d=a(71),b=a(80),h=a.n(b),g=a(356),j=a(362),O=a.n(j),v=a(57),E=a(353),x=a(352),y=a(363),k=a.n(y),F=Object(o.a)({root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},clearIcon:{opacity:".5",fontSize:50},media:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},text:{textAlign:"center"}}),S=function(e){var t=e.file,a=e.setFile,n=F(),c=Object(g.useFilePicker)(),r=c.files,o=c.onClick,u=c.HiddenFileInput,f=Object(l.useState)(),m=Object(i.a)(f,2),p=m[0],d=m[1],b=Object(l.useState)(!1),h=Object(i.a)(b,2),j=h[0],y=h[1];Object(l.useEffect)((function(){if(null===r||void 0===r?void 0:r.length){var e=r[0];a(e),g.utils.loadFile(e).then((function(e){return d(e)}))}}),[r,a]);var S=s.a.createElement(s.a.Fragment,null,s.a.createElement(O.a,{fontSize:"large",color:"primary"}),s.a.createElement(v.a,{variant:"h5",className:n.text}," Upload an image "),s.a.createElement(u,{accept:".jpg, .jpeg, .png, .gif",multiple:!1})),w=s.a.createElement(E.a,{image:p,className:n.media,onMouseEnter:function(){y(!0)},onMouseLeave:function(){y(!1)}},j&&s.a.createElement(k.a,{className:n.clearIcon}));return s.a.createElement(s.a.Fragment,null,s.a.createElement(x.a,{onClick:function(){t?a(void 0):o()},className:n.root},t?p&&w:S))},w=a(69),C=a(31),N=a(32),I=Object(o.a)((function(e){return{root:{marginBottom:e.spacing(4)},images:{height:e.spacing(50),display:"flex"}}}));t.default=function(e){var t=e.addPoll,a=I(),n=Object(l.useState)(),o=Object(i.a)(n,2),b=o[0],g=o[1],j=Object(l.useState)(),O=Object(i.a)(j,2),v=O[0],E=O[1],x=Object(d.b)().enqueueSnackbar,y=Object(N.b)().user,k=b&&v,F=function(e){var t={"Content-Type":"image/png"};return Object(C.a)("/files").then((function(e){return e.data})).then((function(a){return h.a.put(a,e,{headers:t})})).then((function(e){var t=e.config.url;return t&&t.slice(0,t.indexOf(".png")+4)}))},P=function(){var e=Object(r.a)(c.a.mark((function e(){var a,n,r,l,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k){e.next=9;break}return e.next=3,Promise.all([F(b),F(v)]);case 3:a=e.sent,n=Object(i.a)(a,2),r=n[0],l=n[1],s={left:{url:r},right:{url:l}},Object(C.c)("/polls/",{contents:s}).then((function(e){t(e.data),x("Your poll has been successfully created!",{variant:"success"})}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(u.a,{maxWidth:"sm",disableGutters:!0},s.a.createElement(f.a,{className:a.root},y&&s.a.createElement(w.a,{user:y,info:""}),s.a.createElement(m.a,null),s.a.createElement("div",{className:a.images},s.a.createElement(S,{file:b,setFile:g}),s.a.createElement(S,{file:v,setFile:E})),s.a.createElement(p.a,{color:"primary",disabled:!k,variant:"contained",onClick:P,fullWidth:!0},"Submit")))}}}]);
//# sourceMappingURL=13.9828b20f.chunk.js.map
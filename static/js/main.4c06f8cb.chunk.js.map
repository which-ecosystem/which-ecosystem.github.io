{"version":3,"sources":["utils/uploadFileToS3.ts","components/FileUpload/FileUpload.tsx","assets/noContent.svg","assets/construction.svg","assets/server.svg","assets/error.svg","components/Header/SearchBar.tsx","components/Header/MobileHeader.tsx","components/Header/BottomBar.tsx","components/Header/BrowserHeader.tsx","components/Drawer/UserInfo.tsx","components/Drawer/Drawer.tsx","components/Header/Header.tsx","containers/PollCreation/useS3Preupload.ts","components/AttachLink/Modal.tsx","components/AttachLink/AttachLink.tsx","containers/PollCreation/ImageInput.tsx","utils/getLocalFileUrl.ts","components/ModalScreen/ModalScreen.tsx","containers/PollCreation/PollCreation.tsx","containers/Page/Router.tsx","containers/Page/DynoWaiter.tsx","containers/Page/Page.tsx","index.tsx","requests.ts","hooks/useLocalStorage.ts","hooks/useAuth.tsx","components/Message/Message.tsx","hooks/APIClient.ts","components/UserStrip/UserStrip.tsx","components/EmptyState/EmptyState.tsx","components/Loading/Loading.tsx","components/Avatar/Avatar.tsx","components/Image/Image.tsx","components/Image/BackgroundImage.tsx"],"names":["compressFile","file","quality","Promise","resolve","reject","Compressor","success","result","error","err","setProgress","config","headers","onUploadProgress","progressEvent","loaded","total","progress","Math","round","Bluebird","all","get","name","then","response","compressedFile","uploadUrl","data","axios","put","uri","url","slice","indexOf","FileUpload","callback","children","inputRef","useRef","handleClick","current","click","child","React","Children","only","defaultButton","onClick","variant","color","size","startIcon","type","ref","multiple","accept","style","display","onChange","event","files","target","length","isValidElement","cloneElement","module","exports","useStyles","makeStyles","theme","root","position","background","borderRadius","padding","spacing","alignItems","results","width","top","listItem","SearchBar","memo","useState","setResults","query","setQuery","debouncedQuery","setDebouncedQuery","history","useHistory","classes","useEffect","handler","setTimeout","clearTimeout","catch","handleClose","handleNavigate","index","username","push","SearchResults","ClickAwayListener","onClickAway","Paper","className","List","map","key","_id","ListItem","button","UserStrip","user","Divider","InputBase","placeholder","value","trim","justifyContent","MobileHeader","props","trigger","useScrollTrigger","isSearchOpen","setIsSearchOpen","menu","logo","handleToggle","Slide","appear","direction","in","AppBar","Toolbar","IconButton","Clear","Search","bottom","toolbar","BottomBar","profile","feed","notifications","margin","group","BrowserHeader","textAlign","avatar","height","UserInfo","Avatar","Typography","item","icon","marginRight","Drawer","isOpen","setIsOpen","useAuth","logout","handleOpen","useCallback","listen","handleLogout","handleAbout","iOS","useMemo","test","navigator","userAgent","SwipeableDrawer","anchor","open","onOpen","onClose","disableBackdropTransition","disableDiscovery","Info","fontWeight","cursor","activeIcon","Header","useTheme","isMobile","useMediaQuery","breakpoints","down","isDrawerOpen","setIsDrawerOpen","useLocation","pathname","path","setPath","location","Home","Notifications","Menu","AccountCircle","includes","join","setFile","a","File","uploadFileToS3","Modal","setUrl","Dialog","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","id","label","fullWidth","autoComplete","DialogActions","Button","startsWith","match","fileId","disabled","AttachLink","mediaRoot","uploadRoot","flex","up","outline","border","flexDirection","clearIcon","opacity","fontSize","overlay","backgroundColor","left","transitionDuration","invisible","ImageInput","childrenCallback","reader","FileReader","addEventListener","Error","readAsDataURL","localUrl","Upload","Media","CardActionArea","undefined","Boolean","BackgroundImage","src","CircularProgress","Check","CancelOutlined","palette","default","content","Transition","forwardRef","ModalScreen","title","actionIcon","handleAction","isActionDisabled","onExited","goBack","handleClickAction","TransitionComponent","PaperProps","fullScreen","maxWidth","images","textarea","description","PollCreation","setDescription","enqueueSnackbar","useSnackbar","updateFeed","useFeed","mutate","updateProfile","useProfile","useS3Preupload","setLeft","resolveLeft","leftProgress","right","setRight","resolveRight","rightProgress","handleSubmit","leftUrl","rightUrl","contents","post","isSubmitting","Container","disableGutters","Card","elevation","component","multiline","e","readOnly","LinearProgress","Message","tagline","message","noMargin","Profile","lazy","Feed","Login","Registration","Router","state","ModalSwitch","exact","messages","hidden","visibility","overflow","img","DynoWaiter","isReady","setIsReady","time","setTime","tick","interval","setInterval","clearInterval","floor","lastIndex","Loading","EmptyState","smart","ErrorFallback","Page","update","window","scrollTo","preventDuplicate","maxSnack","anchorOrigin","vertical","horizontal","FallbackComponent","fallback","createMuiTheme","primary","main","teal","light","secondary","App","ThemeProvider","CssBaseline","ReactDOM","render","document","getElementById","requests","create","baseURL","interceptors","request","use","token","localStorage","getItem","_","set","removeItem","reload","patch","setState","setItem","authContext","createContext","login","isAuthenticated","AuthProvider","auth","useLocalStorage","remember","setRemember","setUsername","setToken","useUser","password","shouldRemember","strategy","accessToken","useProvideAuth","Provider","useContext","marginTop","fetcher","endpoint","useSWR","revalidateOnFocus","useFeedback","usePatchNotes","html_url","version","tag_name","body","verified","marginLeft","info","subheader","CONTEXT","noContentIcon","construction","constructionIcon","waiting","serverIcon","errorIcon","Component","Image","alt","avatarUrl","image","imageOrientation","container","filterBrightness","filterSaturate","loading","grey","animationDuration","disableLoading","status","setStatus","handleLoad","handleError","transition","onLoad","onError","objectFit","pointerEvents","minHeight"],"mappings":"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","file":"static/js/main.4c06f8cb.chunk.js","sourcesContent":["import Compressor from 'compressorjs';\nimport axios from 'axios';\nimport Bluebird from 'bluebird';\nimport { get } from '../requests';\n\ninterface ProgressEvent {\n  loaded: number;\n  total: number;\n}\n\ntype SetProgress = (progress: number) => void;\n\n\nconst compressFile = (file: File, quality = 0.6): Promise<File | Blob> => {\n  return new Promise((resolve, reject) => {\n    if (quality === 1) return resolve(file);\n    return new Compressor(file, {\n      success: result => resolve(result),\n      error: err => reject(err),\n      quality\n    });\n  });\n};\n\nexport default (file: File, quality?: number, setProgress?: SetProgress): Promise<string> => {\n  const onUploadProgress = (progressEvent: ProgressEvent): void => {\n    if (setProgress) {\n      const { loaded, total } = progressEvent;\n      // Only allow upload progress reach 95%, and set 100% when request is resolved\n      const progress = Math.round((loaded * 95) / total);\n      setProgress(progress);\n    }\n  };\n\n  const config = {\n    headers: { 'Content-Type': 'image/png' },\n    onUploadProgress\n  };\n\n  // Add querystring to avoid caching request in some browsers, see\n  // https://stackoverflow.com/questions/59339561/safari-skipping-xmlhttprequests\n  return Bluebird.all([get(`/files?key=${file.name}`), compressFile(file, quality)])\n    .then(([response, compressedFile]) => {\n      const uploadUrl = response.data;\n      return axios.put(uploadUrl, compressedFile, config);\n    })\n    .then(response => {\n      if (setProgress) setProgress(100);\n      const uri = response.config.url;\n      return uri ? uri.slice(0, uri.indexOf('?')) : '';\n    });\n};\n\n","import React, { useRef } from 'react';\nimport Button from '@material-ui/core/Button';\nimport CloudUpload from '@material-ui/icons/CloudUpload';\n\ninterface PropTypes {\n  callback: (file: File) => void;\n}\n\n\nconst FileUpload: React.FC<PropTypes> = ({ callback, children }) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target?.files;\n    if (files?.length) callback(files[0]);\n  };\n\n  const handleClick = () => {\n    if (inputRef?.current) inputRef.current.click();\n  };\n\n  const child = children && React.Children.only(children);\n\n  const defaultButton = (\n    <Button\n      onClick={handleClick}\n      variant=\"contained\"\n      color=\"primary\"\n      size=\"large\"\n      startIcon={<CloudUpload />}\n    >\n      Upload\n    </Button>\n  );\n\n  return (\n    <>\n      <input\n        type=\"file\"\n        ref={inputRef}\n        multiple={false}\n        accept=\".jpg, .jpeg, .png, .gif\"\n        style={{ display: 'none' }}\n        onChange={handleChange}\n      />\n      {\n        React.isValidElement(child)\n          ? React.cloneElement(child, { onClick: handleClick })\n          : defaultButton\n      }\n    </>\n  );\n};\n\nexport default FileUpload;\n","module.exports = __webpack_public_path__ + \"static/media/noContent.527b7724.svg\";","module.exports = __webpack_public_path__ + \"static/media/construction.07ebb9e5.svg\";","module.exports = __webpack_public_path__ + \"static/media/server.5f74112c.svg\";","module.exports = __webpack_public_path__ + \"static/media/error.74f870d4.svg\";","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport SearchIcon from '@material-ui/icons/Search';\nimport {\n  InputBase,\n  List,\n  ListItem,\n  Paper,\n  Divider,\n  ClickAwayListener\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { User } from 'which-types';\n\nimport { get } from '../../requests';\nimport UserStrip from '../UserStrip/UserStrip';\n\ninterface PropTypes {\n  callback?: () => void;\n}\n\nconst INTERVAL = 300;\nconst LIMIT = 7;\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'relative',\n    background: 'rgba(255, 255, 255, 0.5)',\n    borderRadius: '2px',\n    padding: theme.spacing(0.5),\n    display: 'flex',\n    alignItems: 'center'\n  },\n  results: {\n    position: 'absolute',\n    width: '100%',\n    top: theme.spacing(5)\n  },\n  listItem: {\n    padding: 0\n  }\n}));\n\nconst SearchBar: React.FC<PropTypes> = React.memo(({ callback }) => {\n  const [results, setResults] = useState<User[]>([]);\n  const [query, setQuery] = useState<string>('');\n  const [debouncedQuery, setDebouncedQuery] = useState<string>(query);\n  const history = useHistory();\n  const classes = useStyles();\n\n  useEffect(() => {\n    const handler = setTimeout(() => setDebouncedQuery(query), INTERVAL);\n    return () => clearTimeout(handler);\n  }, [query]);\n\n  useEffect(() => {\n    const fetchPolls = () => {\n      get(`/users?username[$regex]=${debouncedQuery}&$limit=${LIMIT}`)\n        .then(response => setResults(response.data))\n        .catch(() => setResults([]));\n    };\n    if (debouncedQuery) fetchPolls();\n    else setResults([]);\n  }, [debouncedQuery]);\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\n    setQuery(event.target.value.trim());\n  };\n\n  const handleClose = () => {\n    setDebouncedQuery('');\n    setQuery('');\n  };\n\n  const handleNavigate = (index: number) => () => {\n    const { username } = results[index];\n    history.push(`/profile/${username}`);\n    handleClose();\n    if (callback) callback();\n  };\n\n  const SearchResults = (\n    <ClickAwayListener onClickAway={handleClose}>\n      <Paper className={classes.results}>\n        <List>\n          {\n          results.map((result, index) => (\n            <div key={result._id}>\n              <ListItem button onClick={handleNavigate(index)} className={classes.listItem}>\n                <UserStrip user={result} />\n              </ListItem>\n              {(index < results.length - 1) && <Divider />}\n            </div>\n          ))\n        }\n        </List>\n      </Paper>\n    </ClickAwayListener>\n  );\n\n  return (\n    <div className={classes.root}>\n      <SearchIcon />\n      <InputBase\n        placeholder=\"Search...\"\n        value={query}\n        onChange={handleChange}\n      />\n      {results.length > 0 && SearchResults}\n    </div>\n  );\n});\n\n\nexport default SearchBar;\n\n","import React, { useState } from 'react';\nimport {\n  AppBar,\n  Toolbar,\n  IconButton,\n  useScrollTrigger,\n  Slide\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Search, Clear } from '@material-ui/icons';\nimport SearchBar from './SearchBar';\n\ninterface PropTypes {\n  menu: JSX.Element;\n  logo: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n});\n\n\nconst MobileHeader: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const trigger = useScrollTrigger();\n  const [isSearchOpen, setIsSearchOpen] = useState<boolean>(false);\n\n  const { menu, logo } = props;\n\n  const handleToggle = () => {\n    setIsSearchOpen(value => !value);\n  };\n\n  return (\n    <Slide appear={false} direction=\"down\" in={!trigger}>\n      <AppBar position=\"fixed\">\n        <Toolbar className={classes.root}>\n          {menu}\n          {isSearchOpen ? <SearchBar callback={handleToggle} /> : logo}\n          <IconButton onClick={handleToggle}>\n            {isSearchOpen ? <Clear /> : <Search />}\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n    </Slide>\n  );\n});\n\nexport default MobileHeader;\n\n","import React from 'react';\nimport { AppBar, Toolbar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\ninterface PropTypes {\n  profile: JSX.Element;\n  feed: JSX.Element;\n  notifications: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    top: 'auto',\n    bottom: 0\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-around'\n  }\n});\n\n\nconst BottomBar: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const { profile, feed, notifications } = props;\n\n  return (\n    <AppBar position=\"fixed\" className={classes.root}>\n      <Toolbar variant=\"dense\" className={classes.toolbar}>\n        {notifications}\n        {feed}\n        {profile}\n      </Toolbar>\n    </AppBar>\n  );\n});\n\nexport default BottomBar;\n\n","import React from 'react';\nimport { AppBar, Toolbar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SearchBar from './SearchBar';\n\ninterface PropTypes {\n  logo: JSX.Element;\n  menu: JSX.Element;\n  feed: JSX.Element;\n  notifications: JSX.Element;\n  profile: JSX.Element;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    width: '60%',\n    margin: 'auto',\n    display: 'flex',\n    justifyContent: 'space-around'\n  },\n  group: {\n    display: 'flex',\n    alignItems: 'center'\n  }\n});\n\n\nconst BrowserHeader: React.FC<PropTypes> = React.memo(props => {\n  const classes = useStyles();\n  const {\n    logo,\n    menu,\n    feed,\n    notifications,\n    profile\n  } = props;\n\n  return (\n    <AppBar position=\"fixed\">\n      <Toolbar>\n        {menu}\n        <div className={classes.root}>\n          <div className={classes.group}>\n            {logo}\n          </div>\n          <SearchBar />\n          <div className={classes.group}>\n            {feed}\n            {notifications}\n            {profile}\n          </div>\n        </div>\n      </Toolbar>\n    </AppBar>\n  );\n});\n\nexport default BrowserHeader;\n\n","import React from 'react';\nimport { Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { User } from 'which-types';\n\nimport Avatar from '../Avatar/Avatar';\n\ninterface PropTypes {\n  user: User;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: theme.spacing(4, 10),\n    textAlign: 'center'\n  },\n  avatar: {\n    width: theme.spacing(14),\n    height: theme.spacing(14)\n  }\n}));\n\n\nconst UserInfo: React.FC<PropTypes> = React.memo(({ user }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <Avatar user={user} className={classes.avatar} />\n      <Typography variant=\"h5\">\n        {user.username}\n      </Typography>\n    </div>\n  );\n});\n\nexport default UserInfo;\n\n","import React, { useMemo, useEffect, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  SwipeableDrawer,\n  List,\n  ListItem,\n  Typography,\n  Divider\n} from '@material-ui/core';\nimport { ExitToApp as LogoutIcon, Info } from '@material-ui/icons';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport UserInfo from './UserInfo';\nimport { useAuth } from '../../hooks/useAuth';\n\ninterface PropTypes {\n  isOpen: boolean;\n  setIsOpen: (value: boolean) => void;\n}\n\nconst useStyles = makeStyles(theme => ({\n  item: {\n    padding: theme.spacing(2, 14, 2, 2)\n  },\n  icon: {\n    marginRight: theme.spacing(1)\n  }\n}));\n\n\nconst Drawer: React.FC<PropTypes> = React.memo(({ isOpen, setIsOpen }) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const { user, logout } = useAuth();\n\n  const handleOpen = useCallback(() => {\n    setIsOpen(true);\n  }, [setIsOpen]);\n\n  const handleClose = useCallback(() => {\n    setIsOpen(false);\n  }, [setIsOpen]);\n\n  useEffect(() => {\n    // Close drawer on navigations\n    return history.listen(() => handleClose());\n  }, [history, handleClose]);\n\n  const handleLogout = useCallback(() => {\n    logout();\n    history.push('/login');\n  }, [logout, history]);\n\n  const handleAbout = useCallback(() => {\n    history.push('/');\n  }, [history]);\n\n  const iOS = useMemo(() => {\n    return /iPad|iPhone|iPod/.test(navigator.userAgent);\n  }, []);\n\n  return (\n    <SwipeableDrawer\n      anchor=\"left\"\n      open={isOpen}\n      onOpen={handleOpen}\n      onClose={handleClose}\n      disableBackdropTransition={!iOS}\n      disableDiscovery={iOS}\n    >\n      {user && <UserInfo user={user} />}\n      <Divider />\n      <List>\n        {user && (\n          <ListItem button className={classes.item} onClick={handleLogout}>\n            <LogoutIcon className={classes.icon} />\n            <Typography>Logout</Typography>\n          </ListItem>\n        )}\n        <ListItem button className={classes.item} onClick={handleAbout}>\n          <Info className={classes.icon} />\n          <Typography>About</Typography>\n        </ListItem>\n      </List>\n    </SwipeableDrawer>\n  );\n});\n\nexport default Drawer;\n\n","import React, { useEffect, useState } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport {\n  IconButton,\n  Typography,\n  useMediaQuery\n} from '@material-ui/core';\nimport {\n  AccountCircle,\n  Notifications,\n  Home,\n  Menu\n} from '@material-ui/icons';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\n\nimport { useAuth } from '../../hooks/useAuth';\nimport MobileHeader from './MobileHeader';\nimport BottomBar from './BottomBar';\nimport BrowserHeader from './BrowserHeader';\nimport Drawer from '../Drawer/Drawer';\n\n\nconst useStyles = makeStyles(theme => ({\n  logo: {\n    fontWeight: 'bold',\n    cursor: 'pointer',\n    color: 'white'\n  },\n  avatar: {\n    width: theme.spacing(3),\n    height: theme.spacing(3)\n  },\n  activeIcon: {\n    color: 'white'\n  }\n}));\n\nconst Header: React.FC = React.memo(() => {\n  const classes = useStyles();\n  const { user } = useAuth();\n  const theme = useTheme();\n  const history = useHistory();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const [isDrawerOpen, setIsDrawerOpen] = useState<boolean>(false);\n  const [path, setPath] = useState<string>(useLocation().pathname);\n\n\n  useEffect(() => {\n    return history.listen(location => {\n      setPath(location.pathname);\n    });\n  }, [history]);\n\n  const handleHome = (): void => {\n    history.push('/');\n  };\n\n  const handleFeed = (): void => {\n    history.push('/feed');\n  };\n\n  const handleProfile = (): void => {\n    if (user) history.push(`/profile/${user.username}`);\n    else history.push('/login');\n  };\n\n  const handleNotifications = (): void => {\n    history.push('/notifications');\n  };\n\n  const handleMenu = (): void => {\n    setIsDrawerOpen(true);\n  };\n\n  const feed = (\n    <IconButton onClick={handleFeed}>\n      <Home className={path === '/feed' ? classes.activeIcon : ''} />\n    </IconButton>\n  );\n\n  const notifications = (\n    <IconButton onClick={handleNotifications}>\n      <Notifications className={path === '/notifications' ? classes.activeIcon : ''} />\n    </IconButton>\n  );\n\n  const menu = (\n    <IconButton onClick={handleMenu}>\n      <Menu />\n    </IconButton>\n  );\n\n  const logo = (\n    <Typography variant=\"h5\" className={classes.logo} onClick={handleHome}>\n      Which\n    </Typography>\n  );\n\n  const profile = (\n    <IconButton onClick={handleProfile}>\n      <AccountCircle className={[classes.avatar, path.includes('/profile') ? classes.activeIcon : ''].join(' ')} />\n    </IconButton>\n  );\n\n  return isMobile ? (\n    <>\n      <MobileHeader logo={logo} menu={menu} />\n      <BottomBar feed={feed} profile={profile} notifications={notifications} />\n      <Drawer isOpen={isDrawerOpen} setIsOpen={setIsDrawerOpen} />\n    </>\n  ) : (\n    <>\n      <BrowserHeader menu={menu} logo={logo} profile={profile} notifications={notifications} feed={feed} />\n      <Drawer isOpen={isDrawerOpen} setIsOpen={setIsDrawerOpen} />\n    </>\n  );\n});\n\nexport default Header;\n\n","import { useState, useCallback } from 'react';\nimport uploadFileToS3 from '../../utils/uploadFileToS3';\n\ninterface Hook {\n  file: File | string | undefined;\n  setFile: (value: File | string | undefined) => void;\n  resolve: () => Promise<string>;\n  progress: number;\n}\n\nexport default (): Hook => {\n  const [file, setFile] = useState<File | string>();\n  const [progress, setProgress] = useState<number>(0);\n\n  const resolve = useCallback(async (quality?: number): Promise<string> => {\n    // Indicate start\n    setProgress(0.01);\n\n    if (file instanceof File) return uploadFileToS3(file, quality, setProgress);\n    return file || '';\n  }, [file]);\n\n  return {\n    file,\n    setFile,\n    resolve,\n    progress\n  };\n};\n","import React, { useState } from 'react';\nimport {\n  Button,\n  TextField,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle\n} from '@material-ui/core';\n\ninterface PropTypes {\n  isOpen: boolean;\n  setIsOpen: (value: boolean) => void;\n  callback: (url: string) => void;\n}\n\nconst Modal: React.FC<PropTypes> = ({ setIsOpen, isOpen, callback }) => {\n  const [url, setUrl] = useState<string>('');\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  const handleSubmit = () => {\n    let result = url;\n    if (url.startsWith('https://www.instagram.com/')) {\n      const match = url.match('/p/(.*)/');\n      const id = match && match[1];\n      result = `https://www.instagram.com/p/${id}/media/?size=l`;\n    } else if (url.startsWith('https://drive.google.com/')) {\n      const match = url.match('/d/(.*)/');\n      const fileId = match && match[1];\n      result = `https://drive.google.com/uc?export=view&id=${fileId}`;\n    }\n    callback(result || '');\n    handleClose();\n  };\n\n  const handleChange = (event:React.ChangeEvent<HTMLInputElement>) => {\n    setUrl(event.target.value);\n  };\n\n  return (\n    <div>\n      <Dialog open={isOpen} onClose={handleClose}>\n        <DialogTitle>Upload via link</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Provide a valid URL to your image:\n          </DialogContentText>\n          <TextField\n            autoFocus\n            margin=\"dense\"\n            id=\"name\"\n            label=\"Image URL\"\n            type=\"text\"\n            fullWidth\n            autoComplete=\"off\"\n            onChange={handleChange}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} color=\"primary\" disabled={!url.length}>\n            Submit\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default Modal;\n","import React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport LinkIcon from '@material-ui/icons/Link';\nimport Modal from './Modal';\n\ninterface PropTypes {\n  callback: (url: string) => void;\n}\n\nconst AttachLink: React.FC<PropTypes> = ({ callback, children }) => {\n  const [isOpen, setIsOpen] = useState<boolean>(false);\n\n  const handleOpen = (): void => {\n    setIsOpen(true);\n  };\n\n  const defaultButton = (\n    <Button\n      onClick={handleOpen}\n      variant=\"outlined\"\n      color=\"primary\"\n      startIcon={<LinkIcon />}\n    >\n      Link\n    </Button>\n  );\n\n  const child = children && React.Children.only(children);\n\n  return (\n    <>\n      <Modal callback={callback} isOpen={isOpen} setIsOpen={setIsOpen} />\n      {\n        React.isValidElement(child)\n          ? React.cloneElement(child, { onClick: handleOpen })\n          : defaultButton\n      }\n    </>\n  );\n};\n\nexport default AttachLink;\n","import React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport {\n  CardActionArea,\n  Typography,\n  CircularProgress\n} from '@material-ui/core';\nimport { Check, CancelOutlined } from '@material-ui/icons';\n\nimport AttachLink from '../../components/AttachLink/AttachLink';\nimport FileUpload from '../../components/FileUpload/FileUpload';\nimport BackgroundImage from '../../components/Image/BackgroundImage';\nimport getLocalFileUrl from '../../utils/getLocalFileUrl';\n\ninterface PropTypes {\n  callback: (file?: File | string) => void;\n  progress?: number;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '50%',\n    display: 'flex'\n  },\n  mediaRoot: {\n    display: 'flex'\n  },\n  uploadRoot: {\n    flex: 1,\n    display: 'flex',\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(4)\n    },\n    [theme.breakpoints.down('sm')]: {\n      padding: theme.spacing(8, 1)\n    }\n  },\n  outline: {\n    padding: theme.spacing(2),\n    flex: 1,\n    border: '2px dashed gray',\n    borderRadius: theme.spacing(1),\n    display: 'flex',\n    justifyContent: 'center',\n    flexDirection: 'column',\n    alignItems: 'center'\n  },\n  clearIcon: {\n    opacity: '.5',\n    fontSize: 50\n  },\n  overlay: {\n    backgroundColor: 'rgba(0, 0, 0, 0.45)',\n    color: 'white',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    transitionDuration: '0.5s'\n  },\n  invisible: {\n    backgroundColor: 'rgba(0, 0, 0, 0)'\n  },\n  icon: {\n    color: 'white'\n  }\n}));\n\n\nconst ImageInput: React.FC<PropTypes> = ({ callback, progress }) => {\n  const classes = useStyles();\n  const [url, setUrl] = useState<string>();\n\n  const handleClear = (): void => {\n    setUrl(undefined);\n    callback(undefined);\n  };\n\n  const childrenCallback = (value: File | string) => {\n    if (value instanceof File) {\n      getLocalFileUrl(value).then(localUrl => setUrl(localUrl));\n    } else setUrl(value);\n\n    callback(value);\n  };\n\n  const Upload = (\n    <div className={classes.uploadRoot}>\n      <div className={classes.outline}>\n        <FileUpload callback={childrenCallback} />\n        <Typography variant=\"h6\"> or </Typography>\n        <AttachLink callback={childrenCallback} />\n      </div>\n    </div>\n  );\n\n  const Media = (\n    <CardActionArea onClick={handleClear} className={classes.mediaRoot} disabled={Boolean(progress)}>\n      <BackgroundImage src={url} />\n      <div className={`${classes.overlay} ${progress === 100 && classes.invisible}`}>\n        {\n          progress\n            ? progress < 100\n              ? <CircularProgress variant=\"static\" value={progress} className={classes.icon} />\n              : <Check className={classes.icon} fontSize=\"large\" />\n            : <CancelOutlined className={classes.icon} fontSize=\"large\" />\n        }\n      </div>\n    </CardActionArea>\n  );\n\n  return (\n    <div className={classes.root}>\n      {url ? Media : Upload}\n    </div>\n  );\n};\n\nexport default ImageInput;\n","export default (file: File): Promise<string> => {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      if (typeof reader.result === 'string') resolve(reader.result);\n    }, false);\n\n    reader.addEventListener('error', () => {\n      reject(new Error('Error reading the file'));\n    }, false);\n\n    if (file) reader.readAsDataURL(file);\n  });\n};\n","import React, { useState, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  AppBar,\n  Dialog,\n  Toolbar,\n  Typography,\n  IconButton,\n  Divider,\n  Slide,\n  useMediaQuery,\n  useTheme\n} from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { TransitionProps } from '@material-ui/core/transitions';\nimport CloseIcon from '@material-ui/icons/Close';\n\ninterface PropTypes {\n  title: string;\n  actionIcon?: JSX.Element;\n  handleAction?: () => void;\n  isActionDisabled?: boolean;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    backgroundColor: theme.palette.background.default\n  },\n  content: {\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(4)\n    }\n  },\n  toolbar: {\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n}));\n\nconst Transition = React.forwardRef((\n  props: TransitionProps & { children?: React.ReactElement },\n  ref: React.Ref<unknown>\n) => <Slide direction=\"left\" ref={ref} {...props} />);\n\nconst ModalScreen: React.FC<PropTypes> = ({ title, actionIcon, handleAction, isActionDisabled, children }) => {\n  const [isOpen, setIsOpen] = useState<boolean>(true);\n  const classes = useStyles();\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n  const history = useHistory();\n\n  const handleClose = useCallback(() => setIsOpen(false), [setIsOpen]);\n  const onExited = useCallback(() => history.goBack(), [history]);\n\n  const handleClickAction = useCallback(async () => {\n    if (handleAction) await handleAction();\n    return handleClose();\n  }, [handleAction, handleClose]);\n\n  return (\n    <Dialog\n      open={isOpen}\n      onClose={handleClose}\n      onExited={onExited}\n      TransitionComponent={Transition}\n      PaperProps={{ className: classes.root }}\n      fullScreen={isMobile}\n      maxWidth=\"md\"\n      fullWidth\n    >\n      <AppBar position=\"static\">\n        <Toolbar className={classes.toolbar}>\n          <IconButton onClick={handleClose}>\n            <CloseIcon />\n          </IconButton>\n          <Typography variant=\"h6\">\n            { title }\n          </Typography>\n          <IconButton onClick={handleClickAction} disabled={isActionDisabled}>\n            { actionIcon }\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n      <Divider />\n      <div className={classes.content}>\n        { children }\n      </div>\n    </Dialog>\n  );\n};\n\nexport default ModalScreen;\n","import React, { ChangeEvent, useState, useMemo } from 'react';\nimport Bluebird from 'bluebird';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Card, Container, LinearProgress, InputBase, Typography } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport { useSnackbar } from 'notistack';\n\nimport useS3Preupload from './useS3Preupload';\nimport ImageInput from './ImageInput';\nimport ModalScreen from '../../components/ModalScreen/ModalScreen';\nimport Message from '../../components/Message/Message';\nimport UserStrip from '../../components/UserStrip/UserStrip';\nimport { post } from '../../requests';\nimport { useFeed, useProfile } from '../../hooks/APIClient';\nimport { useAuth } from '../../hooks/useAuth';\n\nconst useStyles = makeStyles(theme => ({\n  images: {\n    height: theme.spacing(50),\n    display: 'flex'\n  },\n  textarea: {\n    width: '100%',\n    height: 100\n  },\n  description: {\n    fontSize: 14,\n    padding: theme.spacing(1, 2)\n  }\n}));\n\nconst PollCreation: React.FC = () => {\n  const [description, setDescription] = useState<string>('');\n  const classes = useStyles();\n  const { enqueueSnackbar } = useSnackbar();\n  const { user } = useAuth();\n  const { mutate: updateFeed } = useFeed();\n  const { mutate: updateProfile } = useProfile(user?.username || '');\n  const {\n    file: left,\n    setFile: setLeft,\n    resolve: resolveLeft,\n    progress: leftProgress\n  } = useS3Preupload();\n  const {\n    file: right,\n    setFile: setRight,\n    resolve: resolveRight,\n    progress: rightProgress\n  } = useS3Preupload();\n\n  const handleDescriptionChange = (e: ChangeEvent<HTMLTextAreaElement|HTMLInputElement>) => {\n    setDescription(e.target.value);\n  };\n\n  const handleSubmit = async () => {\n    try {\n      const [leftUrl, rightUrl] = await Bluebird.all([resolveLeft(), resolveRight()]);\n      const contents = {\n        left: { url: leftUrl },\n        right: { url: rightUrl }\n      };\n\n      post('/polls/', { contents, description }).then(() => {\n        updateFeed();\n        updateProfile();\n        enqueueSnackbar('Your poll has been successfully created!', { variant: 'success' });\n      });\n    } catch (error) {\n      enqueueSnackbar('Failed to create a poll. Please, try again.', { variant: 'error' });\n    }\n  };\n\n  const isSubmitting = useMemo(() => leftProgress + rightProgress > 0, [leftProgress, rightProgress]);\n\n  return (\n    <ModalScreen\n      title=\"Create a poll\"\n      actionIcon={<SendIcon />}\n      handleAction={handleSubmit}\n      isActionDisabled={!(left && right) || isSubmitting}\n    >\n      <Container maxWidth=\"sm\" disableGutters>\n        <Card elevation={3}>\n          {user && <UserStrip user={user} />}\n          <Typography component=\"span\">\n            <InputBase\n              multiline\n              fullWidth\n              placeholder=\"Add description\"\n              onChange={handleDescriptionChange}\n              className={classes.description}\n              readOnly={isSubmitting}\n            />\n          </Typography>\n          <div className={classes.images}>\n            <ImageInput callback={setLeft} progress={leftProgress} />\n            <ImageInput callback={setRight} progress={rightProgress} />\n          </div>\n        </Card>\n        {isSubmitting && (\n          <>\n            <LinearProgress color=\"primary\" />\n            <Message\n              tagline=\"You can close this window now\"\n              message=\"We will upload your images in the background.\"\n              noMargin\n            />\n          </>\n        )}\n      </Container>\n    </ModalScreen>\n  );\n};\n\nexport default PollCreation;\n","import React from 'react';\nimport { Switch, Route, useLocation } from 'react-router-dom';\nimport { Location } from 'history';\n\nimport PollCreation from '../PollCreation/PollCreation';\n\nconst Profile = React.lazy(() => import('../Profile/Profile'));\nconst Feed = React.lazy(() => import('../Feed/Feed'));\nconst Login = React.lazy(() => import('../Login/Login'));\nconst Registration = React.lazy(() => import('../Registration/Registration'));\nconst Home = React.lazy(() => import('../Home/Home'));\nconst Notifications = React.lazy(() => import('../Notifications/Notifications'));\n\nexport interface LocationState {\n  background: Location;\n}\n\nconst Router: React.FC = React.memo(() => {\n  const location = useLocation<LocationState>();\n  const background = location.state && location.state.background;\n\n  const ModalSwitch = (\n    <Switch>\n      <Route path=\"/new\" component={PollCreation} />\n    </Switch>\n  );\n\n  return (\n    <>\n      {ModalSwitch}\n      <Switch location={background || location}>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/login\" component={Login} />\n        <Route exact path=\"/registration\" component={Registration} />\n        <Route exact path=\"/notifications\" component={Notifications} />\n        <Route path=\"/feed\" component={Feed} />\n        <Route path=\"/profile/:username\" component={Profile} />\n      </Switch>\n    </>\n  );\n});\n\n\nexport default Router;\n\n","import React, {\n  useEffect,\n  useState,\n  useCallback,\n  useMemo\n} from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { get } from '../../requests';\nimport Loading from '../../components/Loading/Loading';\nimport EmptyState from '../../components/EmptyState/EmptyState';\n\nconst DYNO_WAKEUP_TIME = 30;\n\nconst messages = [\n  '',\n  'It looks like our server is sleeping.',\n  `We need about ${DYNO_WAKEUP_TIME} seconds to wake it up.`,\n  'Please, stay with us.',\n  'We love you <3',\n  'Almost done.'\n];\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center'\n  },\n  hidden: {\n    visibility: 'hidden',\n    position: 'absolute',\n    width: 0,\n    height: 0,\n    overflow: 'hidden'\n  },\n  img: {\n    width: theme.spacing(24)\n  }\n}));\n\n// TODO: if Dyno is sleeping, use this time to pre-load pages\n\nconst DynoWaiter: React.FC = ({ children }) => {\n  const classes = useStyles();\n  const [isReady, setIsReady] = useState<boolean>(false);\n  const [time, setTime] = useState<number>(0);\n\n  const tick = useCallback((): void => setTime(value => value + 1), [setTime]);\n\n  useEffect(() => {\n    const interval = setInterval(tick, 1000);\n    get('/ping').then(() => {\n      setIsReady(true);\n      clearInterval(interval);\n    });\n    return () => clearInterval(interval);\n  }, [setIsReady, tick]);\n\n  const message = useMemo(() => {\n    const interval = DYNO_WAKEUP_TIME / messages.length;\n    const index = Math.floor(time / interval);\n    const lastIndex = messages.length - 1;\n    return messages[index > lastIndex ? lastIndex : index];\n  }, [time]);\n\n  return (\n    <>\n      {!isReady && (\n        <>\n          <Loading />\n          {message && <EmptyState variant=\"waiting\" smart message={message} />}\n        </>\n      )}\n      <div className={isReady ? '' : classes.hidden}>\n        {children}\n      </div>\n    </>\n  );\n};\n\n\nexport default DynoWaiter;\n\n","import React, { Suspense, useEffect } from 'react';\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\nimport { useMediaQuery } from '@material-ui/core';\nimport { SnackbarProvider } from 'notistack';\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { useHistory } from 'react-router-dom';\n\nimport Router, { LocationState } from './Router';\nimport DynoWaiter from './DynoWaiter';\nimport Loading from '../../components/Loading/Loading';\nimport EmptyState from '../../components/EmptyState/EmptyState';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    [theme.breakpoints.down('sm')]: {\n      padding: theme.spacing(10, 0, 12, 0)\n    },\n    [theme.breakpoints.up('md')]: {\n      padding: theme.spacing(15, 5, 8, 5)\n    }\n  }\n}));\n\nconst ErrorFallback: React.FC = () => (\n  <EmptyState variant=\"error\" message=\"Try reloading the page.\" />\n);\n\nconst Page: React.FC = () => {\n  const classes = useStyles();\n  const theme = useTheme();\n  const history = useHistory<LocationState>();\n  const isMobile = useMediaQuery(theme.breakpoints.down('sm'));\n\n  useEffect(() => history.listen(update => {\n    if (!update.state?.background) window.scrollTo(0, 0);\n  }), [history]);\n\n  return (\n    <SnackbarProvider\n      preventDuplicate\n      maxSnack={isMobile ? 1 : 3}\n      anchorOrigin={\n        isMobile\n          ? { vertical: 'top', horizontal: 'right' }\n          : { vertical: 'bottom', horizontal: 'left' }\n      }\n    >\n      <div className={classes.root}>\n        <ErrorBoundary FallbackComponent={ErrorFallback}>\n          <Suspense fallback={<Loading />}>\n            <DynoWaiter>\n              <Router />\n            </DynoWaiter>\n          </Suspense>\n        </ErrorBoundary>\n      </div>\n    </SnackbarProvider>\n  );\n};\n\n\nexport default Page;\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\nimport { CssBaseline } from '@material-ui/core';\nimport { BrowserRouter } from 'react-router-dom';\nimport teal from '@material-ui/core/colors/teal';\nimport 'typeface-roboto';\n\nimport Header from './components/Header/Header';\nimport Page from './containers/Page/Page';\nimport { AuthProvider } from './hooks/useAuth';\n\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: teal[700],\n      light: teal[100]\n    },\n    secondary: {\n      main: teal[900]\n    }\n  }\n});\n\n\nconst App: React.FC = () => {\n  return (\n    <BrowserRouter>\n      <AuthProvider>\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          <Header />\n          <Page />\n        </ThemeProvider>\n      </AuthProvider>\n    </BrowserRouter>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n","import axios from 'axios';\nimport _ from 'lodash';\n\nconst baseURL = process.env.NODE_ENV === 'production'\n  ? '159.89.23.149:3030'\n  : 'http://localhost:3030';\n\nconst requests = axios.create({ baseURL });\n\nrequests.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  return _.set(config, 'headers.Authorization', token);\n});\n\nrequests.interceptors.response.use(response => response, error => {\n  if (error.message === 'Request failed with status code 401' && localStorage.getItem('token')) {\n    localStorage.removeItem('remember');\n    window.location.reload();\n  }\n  return Promise.reject(error);\n});\n\nexport const {\n  get, post, put, patch\n} = requests;\nexport default requests;\n\n","import { useState, useCallback } from 'react';\n\ntype Value = string | null;\ntype Setter = (value: Value) => void;\n\nexport default (key: string): [Value, Setter] => {\n  const [state, setState] = useState<Value>(() => localStorage.getItem(key) || null);\n\n  const update: Setter = useCallback(value => {\n    if (value) localStorage.setItem(key, value);\n    else localStorage.removeItem(key);\n    setState(value);\n  }, [key]);\n\n  return [state, update];\n};\n","import React, {\n  useEffect, useCallback, useMemo, useContext, createContext\n} from 'react';\nimport { User } from 'which-types';\nimport { post } from '../requests';\nimport { useUser } from './APIClient';\nimport useLocalStorage from './useLocalStorage';\n\n\ninterface ContextType {\n  user: User | undefined,\n  login: (username: string, password: string, remember?: boolean) => Promise<boolean>;\n  logout: () => void;\n  isAuthenticated: boolean;\n}\n\nconst authContext = createContext<ContextType>({\n  user: undefined,\n  login: async () => false,\n  logout: () => {},\n  isAuthenticated: false\n});\n\nconst useProvideAuth = () => {\n  const [remember, setRemember] = useLocalStorage('remember');\n  const [username, setUsername] = useLocalStorage('username');\n  const [token, setToken] = useLocalStorage('token');\n  const { data: user } = useUser(username);\n\n  const isAuthenticated = useMemo(() => Boolean(username), [username]);\n\n  const logout = useCallback(() => {\n    setToken(null);\n    setUsername(null);\n  }, [setToken, setUsername]);\n\n  useEffect(() => {\n    // If should not remember, logout\n    if (!remember) logout();\n  }, [remember, logout]);\n\n\n  const login: ContextType['login'] = (name, password, shouldRemember = true) => {\n    return post('/authentication', {\n      strategy: 'local',\n      username: name,\n      password\n    }).then(response => {\n      setToken(response.data.accessToken);\n      setUsername(name);\n      setRemember(shouldRemember ? 'true' : null);\n      return true;\n    }).catch(() => false);\n  };\n\n  return {\n    user, login, logout, token, isAuthenticated\n  };\n};\n\nexport const AuthProvider: React.FC = ({ children }) => {\n  const auth = useProvideAuth();\n  const { Provider } = authContext;\n  return <Provider value={auth}>{children}</Provider>;\n};\n\nexport const useAuth = (): ContextType => {\n  return useContext(authContext);\n};\n\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\ninterface PropTypes {\n  tagline?: string;\n  message?: string;\n  noMargin?: boolean;\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  margin: {\n    marginTop: theme.spacing(6)\n  },\n  content: {\n    margin: theme.spacing(2)\n  }\n}));\n\nconst Message: React.FC<PropTypes> = React.memo(({ tagline, message, noMargin, children }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={`${classes.root} ${!noMargin && classes.margin}`}>\n      <div className={classes.content}>\n        {children}\n      </div>\n      <Typography variant=\"h5\">\n        {tagline}\n      </Typography>\n      <Typography color=\"textSecondary\">\n        {message}\n      </Typography>\n    </div>\n  );\n});\n\nexport default Message;\n","import useSWR, { responseInterface } from 'swr';\nimport { User, Poll, Feedback } from 'which-types';\nimport axios from 'axios';\nimport { get } from '../requests';\n\ntype Response<T> = responseInterface<T, Error>;\n\nconst fetcher = (endpoint: string) => get(endpoint).then(response => response.data);\n\nexport const useUser = (username: string | null): Response<User> => {\n  return useSWR(\n    username && `/users?username=${username}`,\n    (url: string) => get(url).then(response => response.data[0])\n  );\n};\n\nexport const useProfile = (username: string): Response<Poll[]> => {\n  return useSWR(username && `/profiles/${username}`, fetcher);\n};\n\nexport const useFeed = (): Response<Poll[]> => {\n  return useSWR('/feed', fetcher, { revalidateOnFocus: false });\n};\n\nexport const useFeedback = (): Response<Feedback[]> => {\n  return useSWR('/feedback', fetcher);\n};\n\nexport interface Release {\n  url: string;\n  description: string;\n  version: string;\n  name: string;\n}\n\nexport const usePatchNotes = (): Response<Release> => {\n  const fetchRelease = () => axios.get('https://api.github.com/repos/which-ecosystem/which/releases/latest')\n    .then(({ data }) => ({\n      name: data.name,\n      url: data.html_url,\n      version: data.tag_name,\n      description: data.body\n    }));\n  return useSWR('/patchnotes', fetchRelease, { revalidateOnFocus: false });\n};\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport VerifiedIcon from '@material-ui/icons/CheckCircleOutline';\r\nimport { CardHeader } from '@material-ui/core/';\r\nimport { User } from 'which-types';\r\n\r\nimport Avatar from '../Avatar/Avatar';\r\n\r\n\r\ninterface PropTypes {\r\n  user: User;\r\n  info?: string | JSX.Element\r\n}\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n    alignItems: 'center'\r\n  },\r\n  verified: {\r\n    marginLeft: theme.spacing(0.5),\r\n    width: theme.spacing(2),\r\n    height: theme.spacing(2)\r\n  }\r\n}));\r\n\r\n\r\nconst UserStrip: React.FC<PropTypes> = ({ user, info }) => {\r\n  const classes = useStyles();\r\n  const { username, verified } = user;\r\n\r\n  const avatar = <Avatar user={user} />;\r\n\r\n  const title = (\r\n    <div className={classes.root}>\r\n      {username}\r\n      {verified && <VerifiedIcon color=\"primary\" className={classes.verified} />}\r\n    </div>\r\n  );\r\n\r\n  return <CardHeader avatar={avatar} title={title} subheader={info} />;\r\n};\r\n\r\nexport default UserStrip;\r\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Image from '../Image/Image';\nimport Message from '../Message/Message';\nimport noContentIcon from '../../assets/noContent.svg';\nimport constructionIcon from '../../assets/construction.svg';\nimport serverIcon from '../../assets/server.svg';\nimport errorIcon from '../../assets/error.svg';\n\n\ninterface PropTypes {\n  variant?: 'default' | 'construction' | 'waiting' | 'error';\n  message?: string;\n  smart?: boolean;\n}\n\nconst useStyles = makeStyles(theme => ({\n  img: {\n    width: theme.spacing(24)\n  }\n}));\n\nconst CONTEXT = {\n  default: {\n    icon: noContentIcon,\n    tagline: 'No content'\n  },\n  construction: {\n    icon: constructionIcon,\n    tagline: 'Coming soon'\n  },\n  waiting: {\n    icon: serverIcon,\n    tagline: 'Waiting for server'\n  },\n  error: {\n    icon: errorIcon,\n    tagline: 'Something went wrong'\n  }\n};\n\nconst EmptyState: React.FC<PropTypes> = ({ variant = 'default', smart = false, message }) => {\n  const classes = useStyles();\n  const { icon, tagline } = CONTEXT[variant];\n\n  const Component = smart ? Image : 'img';\n\n  return (\n    <Message tagline={tagline} message={message}>\n      <Component src={icon} className={classes.img} alt=\"No content\" />\n    </Message>\n  );\n};\n\nexport default EmptyState;\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Message from '../Message/Message';\n\ninterface PropTypes {\n  tagline?: string;\n  message?: string;\n}\n\nconst Loading: React.FC<PropTypes> = React.memo(({ tagline, message }) => {\n  return (\n    <Message tagline={tagline} message={message}>\n      <CircularProgress color=\"primary\" />\n    </Message>\n  );\n});\n\nexport default Loading;\n\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Avatar as AvatarBase } from '@material-ui/core';\nimport { User } from 'which-types';\n\ninterface PropTypes {\n  user?: User;\n  className?: string;\n}\n\nconst Avatar: React.FC<PropTypes> = ({ user, className }) => {\n  const history = useHistory();\n\n  const handleClick = () => {\n    if (user) history.push(`/profile/${user.username}`);\n  };\n\n  return (\n    <AvatarBase\n      src={user?.avatarUrl}\n      onClick={handleClick}\n      className={className}\n      style={{ cursor: 'pointer' }}\n    />\n  );\n};\n\nexport default Avatar;\n","import React, { useState, useCallback, useMemo } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ErrorIcon from '@material-ui/icons/BrokenImage';\nimport grey from '@material-ui/core/colors/grey';\n\ninterface PropTypes {\n  src?: string;\n  alt?: string;\n  className?: string;\n  animationDuration?: number;\n  disableLoading?: boolean;\n}\n\ntype Status = 'success' | 'loading' | 'error';\n\nconst useStyles = makeStyles(theme => ({\n  image: {\n    imageOrientation: 'from-image'\n  },\n  container: {\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  success: {\n    opacity: '100%',\n    filterBrightness: '100%',\n    filterSaturate: '100%'\n  },\n  loading: {\n    opacity: 0,\n    filterBrightness: 0,\n    filterSaturate: '20%',\n    position: 'absolute'\n  },\n  error: {\n    display: 'none'\n  },\n  errorIcon: {\n    color: grey[300],\n    width: theme.spacing(6),\n    height: theme.spacing(6)\n  }\n}));\n\nconst Image: React.FC<PropTypes> = React.memo(({\n  src,\n  alt,\n  className,\n  animationDuration = 1000,\n  disableLoading = false\n}) => {\n  const classes = useStyles();\n  const [status, setStatus] = useState<Status>('loading');\n\n  const handleLoad = useCallback((): void => {\n    setStatus('success');\n  }, [setStatus]);\n\n  const handleError = useCallback((): void => {\n    setStatus('error');\n  }, [setStatus]);\n\n  const transition = useMemo(() => `\n    filterBrightness ${animationDuration * 0.75}ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    filterSaturate ${animationDuration}ms cubic-bezier(0.4, 0.0, 0.2, 1),\n    opacity ${animationDuration / 2}ms cubic-bezier(0.4, 0.0, 0.2, 1)\n  `, [animationDuration]);\n\n  const image = (\n    <img\n      src={src}\n      alt={alt}\n      className={`${classes.image} ${classes[status]} ${className}`}\n      style={{ transition }}\n      onLoad={handleLoad}\n      onError={handleError}\n    />\n  );\n\n  return (\n    <>\n      {src && image}\n      {\n        status !== 'success' && (\n          <div className={classes.container}>\n            {\n              (status === 'error' || !src)\n                ? <ErrorIcon className={classes.errorIcon} />\n                : (!disableLoading && <CircularProgress color=\"primary\" />)\n            }\n          </div>\n        )\n      }\n    </>\n  );\n});\n\nexport default Image;\n\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Image from './Image';\n\ninterface PropTypes {\n  src?: string;\n  alt?: string;\n}\n\nconst useStyles = makeStyles({\n  root: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    overflow: 'hidden'\n  },\n  image: {\n    objectFit: 'cover',\n    pointerEvents: 'none',\n    width: '100%',\n    minHeight: '100%'\n  }\n});\n\nconst BackgroundImage: React.FC<PropTypes> = ({ src, alt }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <Image src={src} alt={alt} className={classes.image} />\n    </div>\n  );\n};\n\nexport default BackgroundImage;\n\n"],"sourceRoot":""}
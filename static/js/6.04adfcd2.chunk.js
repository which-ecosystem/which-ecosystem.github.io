(this.webpackJsonpwhich=this.webpackJsonpwhich||[]).push([[6],{209:function(e,t,a){"use strict";var n=a(16),l=a(0),r=a.n(l),c=a(372),i=a(353),o=a(354),u=a(355),s=a(366),m=a(356),h=a(357);t.a=function(e){var t=e.setIsOpen,a=e.isOpen,d=e.callback,f=Object(l.useState)(""),g=Object(n.a)(f,2),v=g[0],p=g[1],b=function(){t(!1)};return r.a.createElement("div",null,r.a.createElement(c.a,{open:a,onClose:b},r.a.createElement(i.a,null,"Upload an Image"),r.a.createElement(o.a,null,r.a.createElement(u.a,null,"Unfortunetly we do not support uploading images yet. Please provide a valid URL to your image:"),r.a.createElement(s.a,{autoFocus:!0,margin:"dense",id:"name",label:"Image URL",type:"text",fullWidth:!0,autoComplete:"off",onChange:function(e){p(e.target.value)}})),r.a.createElement(m.a,null,r.a.createElement(h.a,{onClick:b,color:"primary"},"Cancel"),r.a.createElement(h.a,{onClick:function(){var e=v;if(v.startsWith("https://www.instagram.com/")){var t=v.match("/p/(.*)/"),a=t&&t[1];e="https://www.instagram.com/p/".concat(a,"/media/?size=l")}else if(v.startsWith("https://drive.google.com/")){var n=v.match("/d/(.*)/"),l=n&&n[1];e="https://drive.google.com/uc?export=view&id=".concat(l)}d(e||""),b()},color:"primary",disabled:!v.length},"Submit"))))}},230:function(e,t,a){"use strict";var n=a(229),l=a(0),r=a.n(l),c=a(258),i=a(52),o=a(100),u=a(330),s=a(358),m=a(359),h=a(66),d=a(257),f=a.n(d),g=Object(o.a)({root:{position:"absolute",color:"white",top:"86%",fontSize:20,textShadow:"0 0 3px black",display:"flex",alignItems:"center"},left:{left:30},right:{right:30}}),v=function(e){var t=e.value,a=e.which,n=e.like,l=g();return r.a.createElement("div",{className:"".concat(l.root," ").concat(l[a])},n&&r.a.createElement(f.a,null),"".concat(t,"%"))},p=a(64),b=a(24),E=a(41),O={month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"},j=Object(o.a)((function(e){return{images:{height:e.spacing(50)},imagesBlock:{display:"flex"},rateLine:{position:"relative",width:"100%",height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"},highlight:{backgroundColor:"".concat(e.palette.primary.main," !important")},fillRateLine:{height:e.spacing(2),backgroundColor:e.palette.primary.light,transitionDuration:"0.5s"}}})),w=function(e){var t,a,n=e.poll,l=e.setPoll,c=j(),o=n.author,d=n.contents,f=d.left,g=d.right,w=n.vote,y=Object(h.b)().enqueueSnackbar,C=Object(E.b)().isAuthenticated,k=new Date(n.createdAt).toLocaleString("default",O),S=function(e){if(C)if(w)y("You have already voted in this poll",{variant:"error"});else{var t={which:e,pollId:n._id},a=Object(i.a)({},n);a.contents[e].votes+=1,a.vote=Object(i.a)({_id:"",authorId:"",createdAt:new Date},t),l(a),Object(b.c)("votes/",t)}else y("Unauthorized users can not vote in polls",{variant:"error"})};f.votes||g.votes?a=100-(t=Math.round(f.votes/(f.votes+g.votes)*100)):(t=0,a=0);var x=f.votes>=g.votes?"left":"right";return r.a.createElement(u.a,null,r.a.createElement(p.a,{user:o,info:k}),r.a.createElement("div",{className:c.imagesBlock},r.a.createElement(s.a,{onDoubleClick:function(){return S("left")}},r.a.createElement(m.a,{className:c.images,image:f.url}),r.a.createElement(v,{value:t,which:"left",like:"left"===(null===w||void 0===w?void 0:w.which)})),r.a.createElement(s.a,{onDoubleClick:function(){return S("right")}},r.a.createElement(m.a,{className:c.images,image:g.url}),r.a.createElement(v,{value:a,which:"right",like:"right"===(null===w||void 0===w?void 0:w.which)}))),r.a.createElement("div",{className:"".concat(c.rateLine," ").concat("right"===x?c.highlight:"")},r.a.createElement("div",{className:"".concat(c.fillRateLine," ").concat("left"===x?c.highlight:""),style:{width:"".concat(t,"%")}})))};t.a=function(e){var t=e.polls,a=e.mutate,l=function(e){var l=e.index,c=e.style,i=e.key,o=t[l];return r.a.createElement("div",{key:"".concat(i,"-").concat(o._id,"-").concat(t.length),style:c},r.a.createElement(w,{poll:o,setPoll:function(e){var r=Object(n.a)(t);r[l]=e,a([],!1),a(r,!1)}}))};return r.a.createElement(c.c,null,(function(e){var a=e.height,n=e.isScrolling,i=e.registerChild,o=e.onChildScroll,u=e.scrollTop;return r.a.createElement(c.a,{disableHeight:!0},(function(e){var s=e.width;return r.a.createElement("div",{ref:i},r.a.createElement(c.b,{autoHeight:!0,height:a,isScrolling:n,onScroll:o,rowCount:t.length,rowHeight:550,rowRenderer:l,scrollTop:u,width:s,containerStyle:{pointerEvents:"auto"},overscanRowCount:1}))}))}))}},331:function(e,t,a){"use strict";var n=a(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=(0,n(a(27)).default)(l.default.createElement("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"}),"CloudUpload");t.default=r},332:function(e,t,a){"use strict";var n=a(23);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(a(0)),r=(0,n(a(27)).default)(l.default.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"}),"CancelOutlined");t.default=r},370:function(e,t,a){"use strict";a.r(t);var n=a(229),l=a(0),r=a.n(l),c=a(360),i=a(230),o=a(36),u=a(52),s=a(16),m=a(100),h=a(172),d=a(164),f=a(330),g=a(167),v=a(357),p=a(66),b=a(331),E=a.n(b),O=a(50),j=a(359),w=a(358),y=a(332),C=a.n(y),k=a(209),S=Object(m.a)({root:{display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},clearIcon:{opacity:".5",fontSize:50},media:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"},text:{textAlign:"center"}}),x=function(e){var t=e.url,a=e.setUrl,n=S(),c=Object(l.useState)(!1),i=Object(s.a)(c,2),o=i[0],u=i[1],m=Object(l.useState)(!1),h=Object(s.a)(m,2),d=h[0],f=h[1],g=r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{fontSize:"large",color:"primary"}),r.a.createElement(O.a,{variant:"h5",className:n.text}," Upload an image ")),v=r.a.createElement(j.a,{image:t,className:n.media,onMouseEnter:function(){f(!0)},onMouseLeave:function(){f(!1)}},d&&r.a.createElement(C.a,{className:n.clearIcon}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{onClick:function(){o||(t?a(""):u(!o))},className:n.root},t?v:g),r.a.createElement(k.a,{isOpen:o,setIsOpen:u,callback:a}))},N=a(64),I=a(24),z=a(41),U=Object(m.a)((function(e){return{root:{marginBottom:e.spacing(4)},images:{height:e.spacing(50),display:"flex"}}})),L={left:{url:""},right:{url:""}},M=function(e){var t=e.addPoll,a=U(),n=Object(l.useState)(!1),c=Object(s.a)(n,2),i=c[0],m=c[1],b=Object(l.useState)(L),E=Object(s.a)(b,2),O=E[0],j=E[1],w=Object(p.b)().enqueueSnackbar,y=Object(z.b)().user,C=O.left.url&&O.right.url,k=function(e){return function(t){j(Object(u.a)(Object(u.a)({},O),{},Object(o.a)({},e,{url:t})))}};return r.a.createElement(d.a,{onClickAway:function(){m(!1)}},r.a.createElement(f.a,{className:a.root},r.a.createElement(h.a,{in:i,timeout:"auto",unmountOnExit:!0},y&&r.a.createElement(N.a,{user:y,info:""}),r.a.createElement(g.a,null),r.a.createElement("div",{className:a.images},r.a.createElement(x,{url:O.left.url,setUrl:k("left")}),r.a.createElement(x,{url:O.right.url,setUrl:k("right")}))),r.a.createElement(v.a,{color:"primary",disabled:i&&!C,variant:i?"contained":"outlined",onClick:function(){i&&C&&(Object(I.c)("/polls/",{contents:O}).then((function(e){t(e.data),w("Your poll has been successfully created!",{variant:"success"})})),j(Object(u.a)({},L))),m(!i)},fullWidth:!0},i?"Submit":"Create a Poll")))},P=a(67);t.default=function(){var e=Object(P.a)(),t=e.data,a=e.mutate,l=Object(z.b)().isAuthenticated;return r.a.createElement(c.a,{maxWidth:"sm",disableGutters:!0},l&&r.a.createElement(M,{addPoll:function(e){a([e].concat(Object(n.a)(t)),!0)}}),r.a.createElement(i.a,{polls:t,mutate:a}))}}}]);
//# sourceMappingURL=6.04adfcd2.chunk.js.map